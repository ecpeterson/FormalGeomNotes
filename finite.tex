% -*- root: main.tex -*-

\chapter{Finite Spectra}\label{ChapterFiniteSpectra}



Our goal in this Case Study is to thoroughly examine one of the techniques from \Cref{UnorientedBordismChapter} that has not yet resurfaced: the idea that \(\HFtwo\)--homology takes values in quasicoherent sheaves over an algebro-geometric object encoding the coaction of the dual Steenrod Hopf algebra.  We will find that this is quite generic: associated to a mildly nice ring spectrum \(E\), we will construct a rich algebro-geometric object \(\context{E}\), called its \textit{context}, such that \(E\)--homology sends spaces \(X\) to sheaves \(\context{E}(X)\) over \(\context{E}\).  In still nicer situations, the sheaf \(\context{E}(X)\) tracks exactly \(E_* X\) as well as the action of the \(E\)--analogue of the dual Steenrod algebra, called the \textit{Hopf algebroid of stable \(E\)--homology cooperations}.  From this perspective, we reinterpret \Cref{QuillensTheorem} as giving a presentation \[\context{MUP} \xrightarrow{\simeq} \moduli{fg},\] where \(\moduli{fg}\) is the \textit{moduli of formal groups}.  This indicates a program for studying periodic complex bordism, which we now outline.

Abstractly, one can hope to study any sheaf, including \(\context{E}(X)\), by analyzing its stalks---or, relatedly (with some luck), by analyzing its geometric fibers.  The main utility of Quillen's theorem is that it gives us access to a concrete model of the context \(\context{MUP}\), so that we can determine where to even look.  However, even this is not really enough to get off the ground: the stalks of some sheaf can exhibit nearly arbitrary behavior, and in particular there is little reason to expect the stalks of \(\context{E}(X)\) to vary nicely with \(X\) or otherwise reflect its structure.  In an ideal world, these stalks would themselves vary so nicely with \(X\) as to form homology theories, carrying cofiber sequences to short exact sequences of fibers.  In general, one might ask whether a map \(f\) as in the diagram
\begin{center}
\begin{tikzcd}[row sep=0.8em]
\Spec R \arrow{r}{f} & \moduli{fgl} \arrow[equal]{r} \arrow{d} & \context{MUP}[0] \arrow{d} \arrow[equal]{r} & \Spec MUP_0 \\
& \moduli{fg} \arrow[equal]{r} \arrow[leftarrow]{lu} & \context{MUP},
\end{tikzcd}
\end{center}
determines a homology theory by the formula \[f^* \context{MUP}(X) = (MUP_0 X \otimes_{MUP_0} R)\widetilde{\quad}.\]  Since \(MUP_0(-)\) is already a homology theory, this is exactly the question of whether the operation \(- \otimes_{MUP_0} R\) preserves exact sequences---and this is precisely what it means for \(f\) to be \textit{flat}.  When flatness is satisfied, this gives the following theorem:

\begin{theorem}[Landweber]\label{LandwebersStackyTheorem}
Given such a diagram where the diagonal arrow is flat, the functor \[R_0(X) := MUP_0(X) \otimes_{MUP_0} R\] is a \(2\)--periodic homology theory.
\end{theorem}

In the course of proving this theorem, Landweber additionally devised a method to recognize flat maps.  Recall that a map \(f\co Y \to X\) of schemes is flat exactly when for any closed subscheme \(i\co A \to X\) with ideal sheaf \(\mathcal I\) there is an exact sequence \[0 \to f^* \sheaf I \to f^* \sheaf O_X \to f^* i_* \sheaf O_A \to 0.\]  Landweber classified the closed subobjects of \(\moduli{fg}\), thereby giving a precise list of conditions needed to check maps for flatness.

This appears to be a moot point, however, as it is unreasonable to expect this idea to apply to computing geometric fibers: the inclusion of a geometric point is flat only in highly degenerate cases.  We will see that this can be repaired: the inclusion of the formal completion of a subobject is flat in friendly situations, and so we naturally become interested in the infinitesimal deformation spaces of the geometric points \(\Gamma\) on \(\moduli{fg}\).  If we can analyze those, then Landweber's theorem will produce homology theories called \textit{Morava \(E_\Gamma\)--theories}.  Moreover, if we find that these deformation spaces are \emph{smooth}, it will follow that their deformation rings support regular sequences.  In this excellent case, by taking the regular quotient we will be able to recover \textit{Morava \(K_\Gamma\)--theory}, a \emph{homology theory}, which plays the role\footnote{To be clear: \(K_\Gamma(X)\) may not actually compute the literal stalk of \(\context{MUP}(X)\) at \(\Gamma\), since the homotopical operation of quotienting out the regular sequence is potentially sensitive to torsion sections of the module \(\context{MUP}(X)\).} of computing the stalk of \(\context{MUP}(X)\) at \(\Gamma\).\footnote{Incidentally, this program has no content when applied to \(\context{\HFtwo}\), as \(\Spec \F_2\) is simply too small.}

We have thus assembled a task list:
\begin{itemize}
\item Describe the open and closed subobjects of \(\moduli{fg}\).
\item Describe the geometric points of \(\moduli{fg}\).
\item Analyze their infinitesimal deformation spaces.
\end{itemize}
These will occupy our attention for the first half of this Case Study.  In the second half, we will exploit these homology theories \(E_\Gamma\) and \(K_\Gamma\), as well as their connection to \(\moduli{fg}\) and to \(MUP\), to make various structural statements about the category \(\CatOf{Spectra}\).  These homology theories are especially well-suited to understanding the subcategory \(\CatOf{Spectra}^{\fin}\) of finite spectra, and we will recount several important statements in that setting.  Together with these homology theories, these celebrated results (collectively called the nilpotence and periodicity theorems) form the basis of \textit{chromatic homotopy theory}.  In fact, our \emph{real} goal in this Case Study is to give an introduction to the chromatic perspective that remains in line with our algebro-geometrically heavy narrative.








\section{Descent and the context of a spectrum}\label{StableContextLecture}

In \Cref{HopfAlgebraLecture} we took for granted the \(\HFtwo\)--Adams spectral sequence, which had the form \[E_2^{*, *} = H^*_{\mathrm{gp}}(\InternalAut_1(\G_a); \widetilde{\HFtwo P_0 X}) \Rightarrow \pi_* X^\wedge_2,\] where we had already established some yoga by which we could identify the dual Steenrod coaction on \(\HFtwo P_0 X\) with an action of \(\InternalAut{\G_a}\) on its associated quasicoherent sheaf over \(\Spec \F_2\).  Our goal in this Lecture is to revise this tool to work for other ring spectra \(E\) and target spectra \(X\), eventually arriving at a spectral sequence with signature \[E_2^{*, *} = H^*(\context{E}; \context{E}(X)) \Rightarrow \pi_* X.\]  In particular, we will encounter along the way the object ``\(\context{E}\)'' envisioned in the introduction to this Case Study.

At a maximum level of vagueness, we are seeking a process by which homotopy groups \(\pi_* X\) can be recovered from \(E\)--homology groups \(E_* X\).  Recognizing that \(X\) can be thought of as an \(\S\)--module and \(E \sm X\) can be thought of as its base change to an \(E\)--module, we are inspired to double back and consider as inspiration a completely algebraic analogue of the same situation.  Given a ring map \(f\co R \to S\) and an \(S\)--module \(N\), Grothendieck's framework of \index{descent!faithfully flat}\textit{(faithfully flat) descent} addresses the following questions:
\begin{enumerate}
\item When is there an \(R\)--module \(M\) such that \(N \cong S \otimes_R M = f^* M\)?
\item What extra data can be placed on \(N\), called \textit{descent data}, so that the category of descent data for \(f\) is equivalent to the category of \(R\)--modules under the map \(f^*\)?
\item What conditions can be placed on \(f\) so that the category of descent data for any given module is always contractible, called \index{descent!effective}\textit{effectivity}?
\end{enumerate}

Suppose that we begin with an \(R\)--module \(M\) and set \(N = f^* M\), so that we are certain \emph{a priori} that the answer to the first question is positive.  The \(S\)--module \(N\) has a special property, arising from \(f\) being a ring map: there is a canonical isomorphism of \((S \otimes_R S)\)--modules
\begin{align*}
\phi\co S \otimes_R N & = \\
(f \otimes 1)^* N & = \\
((f \otimes 1) \circ f)^* M & \cong ((1 \otimes f) \circ f)^* M & s_1 \otimes (s_2 \otimes m) & \mapsto (s_1 \otimes m) \otimes s_2. \\
& = (1 \otimes f)^* N \\
& = N \otimes_R S,
\end{align*}
Equivalently, we are noticing that pulling back an \(R\)--module from the bottom-right corner to the top-left corner along either arm of the following pullback diagram results in an isomorphic \(S \otimes_R S\)--module:
\begin{center}
\begin{tikzcd}
\Spec S \times_{\Spec R} \Spec S \arrow{r} \arrow{d} & \Spec S \arrow{d} \\
\Spec S \arrow{r} & \Spec R
\end{tikzcd}
\end{center}
In fact, this isomorphism is compatible with further shuffles, in the sense that the following diagram commutes:\footnote{The commutativity of this triangle also shows that any number of shuffles also commutes.}
\begin{center}
\begin{tikzcd}
N \otimes_R S \otimes_R S \arrow["\phi_{13}", "\simeq"']{rr} \arrow["\phi_{12}", "\simeq"']{rd} & & S \otimes_R S \otimes_R N \\
& S \otimes_R N \otimes_R S \arrow["\phi_{23}"', "\simeq"]{ru},
\end{tikzcd}
\end{center}
where \(\phi_{ij}\) denotes applying \(\phi\) to the \(i\){\th} and \(j\){\th} coordinates.

\begin{definition}
An \(S\)--module \(N\) equipped with such an isomorphism \[\phi\co S \otimes_R N \to N \otimes_R S\] which causes the triangle to commute is called a \index{descent!data}\textit{descent datum for \(f\)}.
\end{definition}

Descent data admit two equivalent reformulations, both of which are useful to note.
\begin{remark}[{\cite{Amitsur}}]
The ring \(C = S \otimes_R S\) admits the structure of an \(S\)--coring: we can use the map \(f\) to produce a relative diagonal map \[\Delta\co S \otimes_R S \cong S \otimes_R R \otimes_R S \xrightarrow{1 \otimes f \otimes 1} S \otimes_R S \otimes_R S \cong (S \otimes_R S) \otimes_S (S \otimes_R S).\]  The descent datum \(\phi\) on an \(S\)--module \(N\) is equivalent to a \index{comodule}\(C\)--coaction map.  The \(S\)--linearity of the coaction map is encoded by a square
\begin{center}
\begin{tikzcd}
S \otimes_R N \arrow["1 \otimes \psi"]{r} \arrow["\phi" near end]{rrd} \arrow{d} & S \otimes_R N \otimes_S (S \otimes_R S) \arrow[crossing over]{d} \\
N \arrow["\psi"]{r} & N \otimes_S (S \otimes_R S) \arrow[equal]{r} & N \otimes_R S,
\end{tikzcd}
\end{center}
and the long composite gives the descent datum \(\phi\).  Conversely, given a descent datum \(\phi\) we can restrict it to get a coaction map by \[\psi\co N = R \otimes_R N \xrightarrow{f \otimes 1} S \otimes_R N \xrightarrow{\psi} N \otimes_R S.\]  The coassociativity condition on the comodule is equivalent under this correspondence to the commutativity of the triangle associated to \(\phi\).
\end{remark}

\begin{remark}[{\cite[Theorem A]{HoveyMoritaThy}}]\label{StrictCechDescentRemark}
Alternatively, descent data also arise naturally as sheaves on \index{scheme!simplicial}simplicial schemes.  Associated to the map \(f\co \Spec S \to \Spec R\), we can form a \index{Cech complex@\v{C}ech complex}{\Cech} complex
\[\mathcal D_f := \left\{
\begin{tikzcd}[ampersand replacement=\&]
\Spec S \arrow{r} \arrow[leftarrow,shift left=\baselineskip]{r} \arrow[leftarrow,shift right=\baselineskip]{r} \&
\begin{array}{c} \Spec S \\ \times_{\Spec R} \\ \Spec S \end{array} \arrow[leftarrow, shift left=(2*\baselineskip)]{r} \arrow[shift left=\baselineskip]{r} \arrow[leftarrow]{r} \arrow[shift right=\baselineskip]{r} \arrow[leftarrow, shift right=(2*\baselineskip)]{r} \&
\begin{array}{c} \Spec S \\ \times_{\Spec R} \\ \Spec S \\ \times_{\Spec R} \\ \Spec S \end{array} \arrow[leftarrow, shift left=(3*\baselineskip)]{r} \arrow[shift left=(2*\baselineskip)]{r} \arrow[leftarrow, shift left=\baselineskip]{r} \arrow{r} \arrow[leftarrow, shift right=\baselineskip]{r} \arrow[shift right=(2*\baselineskip)]{r} \arrow[leftarrow, shift right=(3*\baselineskip)]{r} \&
\cdots
\end{tikzcd}
\right\},\]
which factors the map \(f\) as
\begin{center}
\begin{tikzcd}
\Spec S \arrow["\mathrm{sk}^0"]{r} \arrow[bend left, "f"]{rr} & \mathcal D_f \arrow["c"]{r} & \Spec R.
\end{tikzcd}
\end{center}
A \index{sheaf!simplicial}quasicoherent (and Cartesian~\cite[Tag 09VK]{stacks-project}) sheaf \(\sheaf F\) over a simplicial scheme \(X\) is a sequence of quasicoherent sheaves \(\sheaf F[n]\) on \(X[n]\) as well as, for each map \(\sigma\co [m] \to [n]\) in the simplicial indexing category inducing a map \(X(\sigma)\co X[n] \to X[m]\), a natural choice of isomorphism of sheaves \[\sheaf F(\sigma)^*\co X(\sigma)^* \sheaf F[m] \to \sheaf F[n].\]  In particular, a pullback \(c^* \widetilde{M}\) gives such a quasicoherent sheaf on \(\mathcal D_f\).  By restricting attention to the first three levels we find exactly the structure of the descent datum described before.  Additionally, we have a natural \index{Segal condition}\textit{Segal isomorphism}
\begin{align*}
\mathcal D_f[1]^{\times_{\mathcal D_f[0]}(n)} & \xrightarrow{\simeq} \mathcal D_f[n] &
\text{(cf.\ \(S \otimes_R S \otimes_R S\)} & \cong \text{\((S \otimes_R S) \otimes_S (S \otimes_R S)\) at \(n = 2\))},
\end{align*}
which shows that any descent datum (including those not arising, a priori, from a pullback) can be naturally extended to a full quasicoherent sheaf on \(\mathcal D_f\).
\end{remark}

The following Theorem is the culmination of a typical first investigation of descent:\footnote{For details and additional context, see Vistoli~\cite[Section 4.2.1]{Vistoli}.  The story in the context of Hopf algebroids is also spelled out in detail by Miller~\cite{MillerSheavesGradings}.}

\begin{theorem}[{Faithfully flat descent, \cite[Expos\'e VIII]{GrothendieckSGAI}}]\label{OriginalFFDescent}
If \(f\co R \to S\) is \index{descent!faithfully flat}faithfully flat, the natural assignments
\begin{center}
\begin{tikzcd}
\CatOf{QCoh}(\Spec R) \arrow[bend left,"c^*"]{r} & \CatOf{QCoh}(\mathcal D_f) \arrow[bend left,"\lim"]{l}
\end{tikzcd}
\end{center}
form an equivalence of categories.
\end{theorem}
\begin{proof}[Jumping off point]
The basic observation in this case is that \(0 \to R \to S \to S \otimes_R S\) is an exact sequence of \(R\)--modules.\footnote{In the language of \Cref{HF2HomologyIsValuedInAutGaEquivarModules}, this says that \(R\) itself appears as the cofixed points \(S \cotensor_{S \otimes_R S} R\).}  This makes much of the homological algebra involved work out.
\end{proof}

Without the flatness hypothesis, this Theorem fails dramatically and immediately.  For instance, the inclusion of the closed point \[f\co \Spec \F_p \to \Spec \Z\] fails to distinguish the \(\Z\)--modules \(\Z\) and \(\Z/p\).  Remarkably, this can be to large extent repaired by reintroducing homotopy theory and passing to derived categories---for instance, the complexes \(Lf^* \widetilde{\Z}\) and \(Lf^* \widetilde{\Z/p}\) become distinct as objects of \(D(\Spec \F_p)\).  Our preceding discussion of descent in \Cref{StrictCechDescentRemark} can be quickly revised for this new homotopical setting, provided we remember to derive not just the categories of sheaves but also their underlying geometric objects.  Our approach is informed by the following result:

\begin{lemma}[{\cite[Theorem IV.2.4]{EKMM}}]
There is an equivalence of \(\infty\)--categories between \(D(\Spec R)\) and \(\CatOf{Modules}_{HR}\). \qed
\end{lemma}

Hence, given a map of rings \(f\co R \to S\), we redefine the derived descent object to be the cosimplicial ring spectrum
\[\mathcal D_{Hf} := \left\{
\begin{tikzcd}[ampersand replacement=\&]
HS \arrow[leftarrow]{r} \arrow[shift left=\baselineskip]{r} \arrow[shift right=\baselineskip]{r} \&
\begin{array}{c} HS \\ \sm_{HR} \\ HS \end{array} \arrow[shift left=(2*\baselineskip)]{r} \arrow[leftarrow, shift left=\baselineskip]{r} \arrow{r} \arrow[leftarrow, shift right=\baselineskip]{r} \arrow[shift right=(2*\baselineskip)]{r} \&
\begin{array}{c} HS \\ \sm_{HR} \\ HS \\ \sm_{HR} \\ HS \end{array} \arrow[shift left=(3*\baselineskip)]{r} \arrow[leftarrow, shift left=(2*\baselineskip)]{r} \arrow[shift left=\baselineskip]{r} \arrow[leftarrow]{r} \arrow[shift right=\baselineskip]{r} \arrow[leftarrow, shift right=(2*\baselineskip)]{r} \arrow[shift right=(3*\baselineskip)]{r} \&
\cdots
\end{tikzcd}
\right\},\]
and note that an \(R\)--module \(M\) gives rise to a cosimplicial left--\(\mathcal D_{Hf}\)--module which we denote \(\mathcal D_{Hf}(HM)\).  The totalization of this cosimplicial module gives rise to an \(HR\)--module receiving a natural map from \(M\), and we can ask for an analogue of \Cref{OriginalFFDescent}.

\begin{lemma}\label{DescentFromHFpToHZp}
For \(f\co \Z \to \F_p\) and \(M\) a connective complex of \(\Z\)--modules, the totalization \(\Tot \mathcal D_{Hf}(HM)\) recovers the \(p\)--completion of \(M\).\footnote{There is an important distinction between a \(p\)--complete module and a module over the \(p\)--completion.  For example, \(\Q_p\) has a (continuous!) \(\Z_p\)--module structure, but it is not \(p\)--complete: the identity \(\Q_p \otimes_{\Z_p} \Z_p / p^j = 0\) inhibits its reconstruction from the associated descent data.}
\end{lemma}
\begin{proof}[Proof sketch]
The map \(H\Z \to \HFp\) kills the ideal \((p)\), and we calculate \[\HFp \sm_{H\Z} \HFp \simeq \HFp \vee \Susp \HFp\] to be connective.  Together, these facts show that the filtration of \(\mathcal D_{Hf}(HM)\) gives the \(p\)--adic filtration on homotopy.  If \(\pi_* HM\) is already \(p\)--complete, then the reassembly map \(HM \to \Tot \mathcal D_{Hf}(HM)\) is a weak equivalence.
\end{proof}

We are now close enough to our original situation that we can make the last leap: rather than studying a map \(Hf\co HR \to HS\), we instead have the unit map \(\eta\co \S \to E\) associated to some ring spectrum \(E\).  Fixing a target spectrum \(X\), we define the analogue of the descent object:
\begin{definition}
The \index{descent!object}\textit{descent object} for \(X\) along \(\eta\co \S \to E\) is the cosimplicial spectrum
\[\mathcal{D}_E(X) := \left\{
\begin{tikzcd}
\begin{array}{c} E \\ \sm \\ X \end{array} \arrow[leftarrow, shift left=(\baselineskip)]{r}{\mu} \arrow[shift left=(2*\baselineskip)]{r}{\eta_L} \arrow{r}{\eta_R} &
\begin{array}{c} E \\ \sm \\ E \\ \sm \\ X \end{array} \arrow[shift left=(3*\baselineskip)]{r} \arrow[leftarrow, shift left=(2*\baselineskip)]{r} \arrow[shift left=(\baselineskip)]{r}{\Delta} \arrow[leftarrow]{r} \arrow[shift right=(\baselineskip)]{r} &
\begin{array}{c} E \\ \sm \\ E \\ \sm \\ E \\ \sm \\ X \end{array} \arrow[shift left=(4*\baselineskip)]{r} \arrow[leftarrow, shift left=(3*\baselineskip)]{r} \arrow[shift left=(2*\baselineskip)]{r} \arrow[leftarrow, shift left=(\baselineskip)]{r} \arrow{r} \arrow[leftarrow, shift right=(\baselineskip)]{r} \arrow[shift right=(2*\baselineskip)]{r} &
\cdots
\end{tikzcd}
\right\}.\]
\end{definition}

\begin{lemma}[{\cite[Theorem 4.4.2.8.ii]{LurieHA}}]
If \(E\) is an \(A_\infty\)--ring spectrum, then \(\mathcal D_E(X)\) can be considered as a cosimplicial object in the \(\infty\)--category of \(\CatOf{Spectra}\). \qed
\end{lemma}

\begin{definition}\label{DefnOfNilpCompletionAndASS}
The \index{completion}\textit{\(E\)--nilpotent completion} of \(X\) is the totalization of this cosimplicial spectrum: \[X^\wedge_E := \Tot \mathcal D_E(X).\]  It receives a natural map \(X \to X^\wedge_E\), the analogue of the natural map of \(R\)--modules \(M \to c_* c^* M\) considered in \Cref{OriginalFFDescent}.
\end{definition}

\begin{remark}[{\cite[Theorem 1.12]{RavenelLocalizationWRTPeriodic}, \cite{BousfieldLocalization}}]
Ravenel proves the following generalization of \Cref{DescentFromHFpToHZp}.  Let \(E\) be a connective ring spectrum, let \(J\) be the set of primes complementary to those primes \(p\) for which \(E_*\) is uniquely \(p\)--divisible, and let \(X\) be a connective spectrum.\footnote{Even for connective ring spectra \(E\), the Bousfield localization \(L_E X\) does \emph{not} have to recover an arithmetic localization of \(X\) if \(X\) is not connective.  Take \(E = H\Z\) and \(X = KU\), which Snaith's theorem presents as \(X = KU = \Susp^\infty_+ \CP^\infty[\beta^{-1}]\), where \(\beta\co \CP^1 \to \CP^\infty\) is the Bott element.  This gives \(H\Z_* KU = H\Z_*(\CP^\infty[\beta^{-1}]) = (H\Z_* \CP^\infty)[b_1^{-1}]\).  We can identify the pieces in turn: \Cref{HZGivesGa} shows \(\CP^\infty_{H\Z} = \G_a\), so the dual Hopf algebra \((\sheaf O_{\G_a})^* = H\Z_* \CP^\infty\) is a divided polynomial algebra on the class \(b_1\).  Inverting \(b_1\) then gives \((H\Z_* \CP^\infty)[b_1^{-1}] = \Gamma[b_1][b_1^{-1}] = \Q[b_1^\pm]\), so that, in particular, there is a weak equivalence \(H\Z \sm KU \to H\Q \sm KU\).  The cofiber \(KU \to KU \otimes \Q \to KU \otimes \Q/\Z\) is thus a nonzero \(H\Z\)--acyclic spectrum.  You can also work this example without knowing Snaith's theorem: all you really need to know is that \(\Susp^\infty_+ \CP^\infty[\beta^{-1}] \to KU\) is a map of ring spectra, so that \(\pi_0 \Susp^\infty_+ \CP^\infty[\beta^{-1}]\) cannot be a rational group since \(\pi_0 KU = \Z\).  Another entertaining consequence of this is \(D(KU/p) = F(KU/p, \S) = 0\), since $\S$ is $H\Z$--local.}  If each element of \(E_*\) has finite order, then \(X^\wedge_E = X^\wedge_J\) gives the arithmetic completion of \(X\)---which we reinterpret as \(\S^\wedge_J \to E\) being of effective descent for connective objects.  Otherwise, if \(E_*\) has elements of infinite order, then \(X^\wedge_E = X_{(J)}\) gives the arithmetic localization---which we reinterpret as saying that \(\S_{(J)} \to E\) is of effective descent.  Finding more encompassing conditions on maps \(f\co R \to S\) of \(E_\infty\)--rings for which descent holds is a subject of serious study~\cite[Appendix D]{LurieSAG}.
\end{remark}

Finally, we can interrelate these algebraic and topological notions of descent by studying the coskeletal filtration spectral sequence\footnote{The reader who would like a refresher about the construction of spectral sequences is referred to Boardman's exceptional article~\cite{BoardmanConditionallyConvergent}.} for \(\pi_* X^\wedge_E\), which we define to be the \index{Adams spectral sequence}\textit{\(E\)--Adams spectral sequence} for \(X\).  Applying the homotopy groups functor to the cosimplicial ring spectrum \(\mathcal D_E\) gives a cosimplicial ring \(\pi_* \mathcal D_E\), which we would like to connect with an algebraic descent object of the sort considered in \Cref{StrictCechDescentRemark}.  In order to make this happen, we need two niceness conditions on \(E\):

\begin{definition}[\textbf Commutativity \textbf Hypothesis]
An even-periodic ring spectrum \(E\) satisfies \index{commutativity hypothesis@commutativity hypothesis, \CH}{\CH} when the ring \(\pi_* E^{\sm j}\) is commutative for all \(j \ge 1\).  In this case, we can form the simplicial scheme \[\context{E} = \Spec \pi_0 \mathcal D_E,\] called the \index{context}\textit{context} of \(E\).
\end{definition}

\begin{definition}[\textbf Flatness \textbf Hypothesis]
An even-periodic ring spectrum \(E\) satisfies \index{flatness hypothesis@flatness hypothesis, \FH}{\FH} when the right-unit map \(E_0 \to E_0 E\) is flat.\footnote{If \(E\) is a commutative ring spectrum, then this is equivalent to asking that the left-unit map is a flat map of \(E_0\)--modules.}  In this case, the Segal map \[(E_0 E)^{\otimes_{E_0} j} \otimes_{E_0} E_0 X \to \pi_0(E^{\sm (j+1)} \sm X) = \pi_0 \mathcal D_E(X)[j]\] is an isomorphism for all \(X\).  In geometric language, this says that \(\context{E}\) is valued in simplicial sets equivalent to nerves of groupoids and that \[\context{E}(X) := \widetilde{\pi_0 \mathcal D_E(X)}\] forms a Cartesian quasicoherent sheaf over \(\context{E}\).  In this sense, we have constructed a factorization
\begin{center}
\begin{tikzcd}
\CatOf{Spectra} \arrow["E_0(-)"]{rr} \arrow["\context{E}(-)"]{rd} & & \CatOf{Modules}_{E_0} \\
& \CatOf{QCoh}(\context{E}) \arrow["{(-)[0]}"]{ru} .
\end{tikzcd}
\end{center}
\end{definition}

While {\CH} and {\FH} are enough to guarantee that \(\context{E}\) and \(\context{E}(X)\) are well-behaved, they still do not exactly connect us with \Cref{StrictCechDescentRemark}.  The main difference is that the ring of homology cooperations for \(E\) \[E_0 E = \pi_0(E \sm E) = \pi_0 \mathcal D_E[1]\] is only distantly related to the tensor product \(E_* \otimes_{\pi_* \S} E_*\) (or even \(\Tor^{\pi_* \S}_{*, *}(E_*, E_*)\)).  This is a trade we are eager to make, as the latter groups are typically miserably behaved, whereas \(E_0 E\) is typically fairly nice.  In order to take advantage of this, we enlarge our definition to match:

\begin{definition}\label{FHGivesComodules}
Let \(A\) and \(\Gamma\) be commutative rings with associated affine schemes \(X_0 = \Spec A\), \(X_1 = \Spec \Gamma\).  A \index{Hopf algebroid}\textit{Hopf algebroid} consists of the pair \((A, \Gamma)\) together with structure maps
\begin{align*}
\eta_L \co A & \to \Gamma, & s\co X_1 & \to X_0, \\
\eta_R \co A & \to \Gamma, & t\co X_1 & \to X_0, \\
\chi \co \Gamma & \to \Gamma, & (-)^{-1}\co X_1 & \to X_1, \\
\Delta \co \Gamma & \to \Gamma \presuper{\eta_R}{\underset{A}\otimes}^{\eta_L} \Gamma, & \circ\co X_1 \presuper{t}{\underset{X_0}{\times}}^{s} X_1 & \to X_1,
\end{align*}
such that \((X_0, X_1)\) forms a groupoid scheme.  An \index{comodule}\textit{\((A, \Gamma)\)--comodule} is an \(A\)--module equipped with a \(\Gamma\)--comodule structure, and such a comodule is equivalent to a Cartesian quasicoherent sheaf on the nerve of \((X_0, X_1)\).\footnote{An extremely---excuse the pun---\emph{enlightening} discussion of the intricacies of this construction was set out by Boardman~\cite{BoardmanEightfoldWay} in the traditional language of Hopf algebroids.}
\end{definition}

\begin{example}
A \index{Hopf algebra}Hopf \(k\)--algebra \(H\) gives a Hopf algebroid \((k, H)\).  The scheme of objects \(\Spec k\) in the groupoid scheme is the constant scheme \(0\).
\end{example}

\begin{lemma}\label{IdentifyingAdamsE2Page}
For \(E\) an \(A_\infty\)--ring spectrum satisfying {\CH} and {\FH}, the \(E_2\)--page of its Adams spectral sequence can be identified as
\begin{align*}
E_2^{*, *} & = \Cotor_{E_* E}^{*, *}(E_*, E_* X) \\
& \cong H^*(\context{E}; \context{E}(X) \otimes \omega^{\otimes *}) \oplus H^*(\context{E}; \context{E}(\Susp X) \otimes \omega^{\otimes *})[1] \Rightarrow \pi_* X^\wedge_E.
\end{align*}
\end{lemma}
\begin{proof}[Proof sketch]
The homological algebra of Hopf algebras from \Cref{HopfAlgebraLecture} can be lifted almost verbatim, allowing us to define resolutions suitable for computing derived functors~\cite[Definition A1.2.3]{RavenelGreenBook}.  This includes the cobar resolution~\cite[Definition A1.2.11]{RavenelGreenBook}, which shows that the associated graded for the coskeletal filtration of \(\mathcal D_E(X)\) is a complex computing the derived functors claimed in the Lemma statement.
\end{proof}

\begin{remark}[{cf.\ \Cref{HurewiczImageOnZeroLine}}]\label{HurewiczRemark}
The sphere spectrum fails to satisfy {\CH}, so the above results do not apply to it, but the \(\S\)--Adams spectral sequence is particularly degenerate: it consists of \(\pi_* X\), concentrated on the \(0\)--line.  For any other ring spectrum \(E\), the unit map \(\S \to E\) induces a map of Adams spectral sequences whose image on the \(0\)--line are those maps of comodules induced by applying \(E\)--homology to a homotopy element of \(X\)---i.e., the \index{Hurewicz homomorphism}Hurewicz image of \(E\).
\end{remark}

\begin{remark}\label{WarningAboutStacks}
In \Cref{DescentFromHFpToHZp}, we discussed translating from the algebraic descent picture to a homotopical one, and a crucial point was how thorough we had to be: we transferred not just to the derived category \(D(\Spec R)\) but we also replaced the base ring \(R\) with its homotopical incarnation \(HR\).  In \Cref{FHGivesComodules}, we have not been as thorough as possible: both \(X_0\) and \(X_1\) are schemes and hence satisfy a sheaf condition individually, but the functor \((X_0, X_1)\), thought of as valued in homotopy \(1\)--types, does not necessarily satisfy a homotopy sheaf condition.  Enforcing this descent condition results in the \index{stack!associated}\textit{associated stack}~\cite[Definition 8.13]{HopkinsCOCTALOS}, denoted \[\Spec A \mmod \Spec \Gamma = X_0 \mmod X_1.\]  Remarkably, this does not change the category of Cartesian quasicoherent sheaves---it is still equivalent to the category of \((A, \Gamma)\)--comodules~\cite[Proposition 11.6]{HopkinsCOCTALOS}.  However, several different Hopf algebroids (such as those with maps between them inducing natural equivalences of groupoid schemes, as studied by Hovey~\cite[Theorem D]{HoveyMoritaThy}, but also some with \emph{no} such zig-zag) can give the same associated stack, resulting in surprising equivalences of comodule categories.\footnote{We will employ one of these surprising equivalences in \Cref{OpenSubstacksOfMfg}.}  For the most part, it will not be especially relevant to us whether we are considering the groupoid scheme or its associated stack, so we will not draw much of a distinction.  For the most part, the associated stack is theoretically preferable, but the groupoid scheme is easier to think about.\footnote{Constructing the correct derived category of comodules also has subtle associated homotopical issues.  Hovey gives a good reference for this in the case of a stack associated to a Hopf algebroid~\cite{HoveyHomotopyOfComodules}.}
\end{remark}

\begin{example}
Most of the homology theories we will discuss have these {\CH} and {\FH} properties.  For an easy example, \(\HFtwo P\) certainly has this property: there is only one possible algebraic map \(\F_2 \to \mathcal A_*\), so {\FH} is necessarily satisfied.  Our work in \Cref{TheSteenrodAlgebraSection}\footnote{The reader should spend a moment contrasting our two approaches to the definition of \(\context{\HFtwo}(X)\).  Previously, we assumed that \(X\) was finite type and worked with cohomology---but under exactly this assumption, the cohomology of \(X\) can always be written as the homology of \(Y\) for another finite spectrum satisfying \(X = DY\).} thus grants us access to a description of the context for \(\HFtwo\):\footnote{This is a bit glib: this gives a presentation of the \emph{even} part of the context for \(\HFtwo P\), and the ``\(\G_a\)'' in the formula is \(\CP^\infty_{\HFtwo}\) rather than \(\RP^\infty_{\HFtwo}\).  This sleight of hand abuts the discussion of Bocksteins in \Cref{ASSForLKdS}.} \[\context{\HFtwo P} = \Spec \F_2 \mmod \InternalAut{\G_a}.\]
\end{example}

\begin{example}\label{ContextOfMUPExample}
The context for \(MUP\) is considerably more complicated, but Quillen's theorem can be equivalently stated as giving a description of it.  Quillen's theorem on its face gives an equivalence \(\Spec MUP_0 \cong \moduli{fgl}\), but in \Cref{OrientationsOnEAndMU} we also gave a description of \(\Spec MUP_0 MUP\): it is the moduli of pairs of formal group laws equipped with an invertible power series intertwining them.  Altogether, this presents \(\context{MUP}\) as the moduli of formal groups: \[\context{MUP} \simeq \moduli{fg} := \moduli{fgl} \mmod \moduli{ps}^{\gpd},\] where \(\moduli{ps} = \InternalEnd(\A^1)\) is the moduli of endomorphisms of the affine line (i.e., of power series) and \(\moduli{ps}^{\gpd}\) is the multiplicative subgroup of invertible such maps.  We include a picture of the \(p\)--localization of the \(MU\)--Adams \(E_2\)--page in \Cref{ANSS2Figure} and \Cref{ANSS3Figure}.  In view of \Cref{WarningAboutStacks}, there is an important subtlety about the stack \(\moduli{fg}\): an \(R\)--point is a functor on affines over \(\Spec R\) which is locally isomorphic to a formal group, but whose local isomorphism \emph{may not patch} to give a global isomorphism.  This does not agree, a priori, with the definition of formal group given in \Cref{DefnFormalGps}, where the isomorphism witnessing a functor as a formal variety was expected to be global.  We will address this further in \Cref{CoordinatizbleFGs} below.\footnote{Naumann gives a very pleasant write-up of, among other things, the difference between $\moduli{fg}$ as a simplicial scheme and as a stack~\cite{Naumann}.}
\end{example}

\afterrectopage{
\begin{sidewaysfigure}
\centering
\input{anss2.tex}
\caption{A small piece of the \(MU_{(2)}\)--Adams spectral sequence for the sphere, beginning at the second page~\cite[pg.\ 429]{RavenelNovicesGuide}.  North-east lines denote multiplication by \(\eta = \alpha_1\), north-west lines denote \(d_3\)--differentials, and vertical dotted lines indicate additive extensions.  Elements are labeled according to the conventions of \Cref{GreekLetterElements}, and in particular \(\alpha_{i/j}\) is \(2^j\)--torsion.}\label{ANSS2Figure}
\end{sidewaysfigure}
\begin{sidewaysfigure}
\centering
\input{anss3.tex}
\caption{A small piece of the \(MU_{(3)}\)--Adams spectral sequence for the sphere, beginning at the second page~\cite[Figure 1.2.19]{RavenelGreenBook}.  North-east lines denote multiplication by \(\alpha_1\) or by \(\beta_1/\alpha_1\), and north-west lines denote \(d_5\)--differentials.  Elements are labeled according to the conventions of \Cref{GreekLetterElements}, and in particular \(\alpha_{i/j}\) is \(3^j\)--torsion.}\label{ANSS3Figure}
\end{sidewaysfigure}
}

\begin{example}\label{ContextOfMOPExample}
The context for \(MOP\), by contrast, is reasonably simple.  \Cref{CalculationOfPiStarMO} shows that the scheme \(\Spec MOP_0\) classifies formal group laws over \(\F_2\) which admit logarithms, so that \(\context{MOP}\) consists of the groupoid of formal group laws with logarithms and isomorphisms between them.  This admits a natural deformation-retraction to the moduli consisting just of \(\G_a\) and its automorphisms, expressing the redundancy in \(MOP_0(X)\) encoded in the splitting of \Cref{MOSplitsIntoHF2s}.
\end{example}

\begin{remark}\label{MUstarVsMUAsModuli}
The algebraic moduli \(\context{MU} = (\Spec MU_*, \Spec MU_* MU)\) and the topological moduli \((MU, MU \sm MU)\) are quite different.  An orientation \(MU \to E\) selects a coordinate on the formal group \(\CP^\infty_E\), but \(\CP^\infty_E\) itself exists independently of the orientation.  Hence, while \(\context{MU}(E_*)\) can have many connected components corresponding to \emph{distinct formal groups} on the coefficient ring \(E_*\), the groupoid \(\CatOf{RingSpectra}(\sheaf D_{MU}, E)\) has only \emph{one} connected component corresponding to the formal group \(\CP^\infty_E\) intrinsic to \(E\).\footnote{The reader ought to compare this with the situation in explicit local class field theory, where a local number field has a preferred formal group attached to it.}\footnote{The precocious student might ask what functor \(MU\) represents as an \(E_\infty\)--ring spectrum.  To date, this functor has not been algebraically recognized.}
\end{remark}

\begin{remark}[{\cite[{pg.\ 5}]{HopkinsFromSpectraToStacks}}]\label{StackinessMeasuresNonorientability}
If \(E\) is a complex-oriented ring spectrum, then the simplicial sheaf \(\context{MU}(E)\) has an extra degeneracy, which causes the \(MU\)--based Adams spectral sequence for \(E\) to degenerate.  In this sense, the ``stackiness'' of \(\context{MU}(E)\) is exactly a measure of the failure of \(E\) to be orientable.
\end{remark}

\begin{remark}
It is also possible to construct an \(E\)--Adams spectral sequence by iteratively smashing with the fiber sequence \(\overline E \to \S \to E\) to form the tower
\begin{center}
\begin{tikzcd}
\S \sm X \arrow{d} & \overline E \sm X \arrow{l} \arrow{d} & \overline E^{\sm 2} \sm X \arrow{l} \arrow{d} & \cdots \arrow{l} \\
E \sm X & E \sm \overline E \sm X & E \sm \overline E^{\sm 2} \sm X & \cdots.
\end{tikzcd}
\end{center}
This presentation makes the connection to descent much more opaque, but it does not require \(E\) to be an \(A_\infty\)--ring spectrum.
\end{remark}

\begin{remark}
Many algebro-geometric properties lift automatically to the setting of \index{stack!representable}\textit{representable} maps: a map \(f\co \stack M \to \stack N\) is representable when for all affines \(\Spec R \to \stack N\), the pullback \(\stack M \times_{\stack N} \Spec R\) is affine.  A representable such \(f\) is said to have property \textbf{P} when the natural map \(\stack M \times_{\stack N} \Spec R \to \Spec R\) has property \textbf{P} for every choice of affine over \(\stack N\), giving us intrinsic notions of adjectives like open, flat, \ldots.
\end{remark}










\section{The structure of \texorpdfstring{\(\moduli{fg}\)}{Mfg} I: The affine cover}\label{MfgI:AffineCover}

In \Cref{FHGivesComodules} we gave a factorization
\begin{center}
\begin{tikzcd}
\CatOf{Spectra} \arrow["MUP_0(-)"]{rr} \arrow["\context{MUP}(-)"]{rd} & & \CatOf{Modules}_{MUP_0} \\
& \CatOf{QCoh}(\context{MUP}) \arrow["{(-)[0]}"]{ru} ,
\end{tikzcd}
\end{center}
and in \Cref{ContextOfMUPExample} we established an equivalence \[\phi\co \context{MUP} \xrightarrow{\simeq} \moduli{fg}.\]  Our program, as outlined in the introduction, is to analyze this functor \(\context{MUP}(-)\) by postcomposing it with \((\phi^{-1})^*\) and studying the resulting sheaf over \(\moduli{fg}\).  In order to perform such an analysis, we will want a firm grip on the geometry of the stack \(\moduli{fg}\), and in this Lecture we begin by studying the scheme \(\moduli{fgl}\) as well as the natural \index{stack!cover}covering map \[\moduli{fgl} \to \moduli{fg}.\]  Additionally, \Cref{ContextOfMUPExample} was a consequence of \Cref{QuillensTheorem}, which relied on the unproven result stated as \Cref{DummyLazardsThm}, which we will now prove in this section as \Cref{LazardsTheorem}.

\begin{definition}\label{MfglDefn}
There is an affine scheme \(\moduli{fgl}\) classifying formal group laws.  Begin with the scheme classifying \emph{all} bivariate power series:
\begin{align*}
\Spec \Z[a_{ij} \mid i, j \ge 0] & \leftrightarrow \left\{ \text{bivariate power series} \right\}, \\
f \in \Spec\Z[a_{ij} \mid i, j \ge 0](R) & \leftrightarrow \sum_{i, j \ge 0} f(a_{ij}) x^i y^j.
\end{align*}
Then, \(\moduli{fgl}\) is the closed subscheme selected by the formal group law axioms in \Cref{FGLDefinition}.
\end{definition}

This presentation of \(\moduli{fgl}\) as a subscheme appears to be extremely complicated in that its ideal is generated by many hard-to-describe elements, but \(\moduli{fgl}\) itself is actually not complicated at all.  We will prove the following:
\begin{theorem}[{Lazard's Theorem, \cite[Th\'eor\`eme II]{LazardGroupesDeLie}}]\label{LazardsTheorem}
There is a noncanonical isomorphism \[\sheaf{O}_{\moduli{fgl}} \cong \Z[t_n \mid 1 \le n < \infty] =: L.\]
\end{theorem}
\begin{proof}
We begin by studying simpler moduli with the intention of comparing them with the more complicated \(\moduli{fgl}\).  Let \(U = \Z[b_0, b_1, b_2, \ldots] / (b_0 - 1)\) be the universal ring supporting a strict exponential
\begin{align*}
\exp(x) & := \sum_{j=0}^\infty b_j x^{j+1}. \\
\intertext{Because \(b_0 = 1\) is invertible in this ring, this series has a formal inverse, i.e., a universal logarithm:}
\log(x) & := \sum_{j=0}^\infty m_j x^{j+1},
\end{align*}
where the coefficients \(m_j\) are rather complicated polynomials in the indeterminates \(b_*\).\footnote{In the context of complex-oriented cohomology theories, this is called the \index{logarithm!Miscenko@Mi\v{s}\v{c}enko}\textit{Mi\v{s}\v{c}enko logarithm}, and the coefficients \(m_j\) have the simple formula \(\log_\phi(x) = \sum_{n=0}^\infty \frac{\phi[\CP^n]}{n+1} x^{n+1}\).  In trade, the coefficients \(b_j\) are more mysterious.}  Together, these series induce a formal group law on \(U\) by the conjugation formula \[x +_u y = \exp(\log(x) + \log(y)),\] which is in turn classified by a map \(u\co \sheaf O_{\moduli{fgl}} \to U\).\footnote{This is \emph{not} the universal formal group law.  We will soon see that some formal group laws do not admit logarithms.  Rather, it is the group law associated to \(H\Z \sm MU\), and the map we are studying is that induced by \(MU \to H\Z \sm MU\) as in \Cref{OrientationsOnEAndMU}.  In light of this, there is a multiplicative version of this same story: the Hattori--Stong theorem states that \(MU_* \to K_* MU\) has image a direct summand~\cite{Araki,BakerCombinatorialFGLs}.}  Using \Cref{RationalFGLsHaveLogarithms}, we know that the map \(u\) is a rational isomorphism, so we become interested in learning more about the behavior of the elements \(m_j\), and in particular their torsion properties.  Since these elements are difficult to handle precisely, we compute modulo decomposables:
\begin{align*}
x & = \exp(\log(x)) \\
& = x + \sum_{n=1}^\infty m_n x^{n+1} + \sum_{n=1}^\infty b_n \left( x + \sum_{j=1}^\infty m_j x^{j+1} \right)^{n+1} \\
& \equiv x + \sum_{n=1}^\infty m_n x^{n+1} + \sum_{n=1}^\infty b_n x^{n+1} \pmod{\text{decomposables}},
\end{align*}
hence \(b_n \equiv -m_n \pmod{\text{decomposables}}\).  Using this, we then compute
\begin{align*}
x +_u y & = \exp(\log(x) + \log(y)) \\
& = \left( (x + y) + \sum_{n=1}^\infty m_n (x^{n+1} + y^{n+1}) \right) \\
& \quad + \sum_{n=1}^\infty b_n \left( (x + y) + \sum_{j=1}^\infty m_j (x^{j+1} + y^{j+1}) \right)^{n+1} \\
& \equiv x + y \\
& \quad + \sum_{n=1}^\infty -b_n (x^{n+1} + y^{n+1}) + \sum_{n=1}^\infty b_n (x+y)^{n+1} \pmod{\text{decomposables}} \\
& = x + y + \sum_{n=1}^\infty b_n ((x+y)^{n+1} - x^{n+1} - y^{n+1}),
\end{align*}
hence \[u(a_{i(n-i)}) \equiv \binom{n}{i} b_{n-1} \pmod{\text{decomposables}}.\]  It follows that the map \(Qu\) on the indecomposable quotient has image in degree \(2n\) the subgroup \(T_{2n}\) generated by \(d_{n+1} b_n\), where \(d_{n+1} = \gcd\left( \binom{n+1}{k} \middle| 0 < k < n + 1 \right)\).

Appealing to \Cref{LazardSplittingLemma} below, select elements \(t_n \in \sheaf O_{\moduli{fgl}}\) projecting to \(r(d_{n+1} b_n)\) on indecomposables, and consider the induced map \[\Z[t_n \mid n \ge 1] \xrightarrow{v} \sheaf O_{\moduli{fgl}} \xrightarrow{u} U.\]  The map \(r\) is surjective and \(Qv\) has the same image, so it is also surjective and hence \(v\) is as well.  Additionally, because \[Q(uv)_{2n}\co \Z\{t_n\} \to \Z\{d_{n+1} b_n\}\] is a surjective map of free \(\Z\)--modules, it must also be injective.  It follows that the map \(uv\) of free \(\Z\)--algebras is injective, and hence \(v\) itself is injective.
\end{proof}

We have yet to prove the following Lemma:

\begin{lemma}\label{LazardSplittingLemma}
There is a canonical retraction \(r\co T_{2n} \to (Q \mathcal O_{\moduli{fgl}})_{2n}\) of \(Qu\).
\end{lemma}

In order to prove this Lemma, it will be useful to have a more moduli-theoretic interpretation of \(Qu\).  The graded ring \(\sheaf O_{\moduli{fgl}}\) splits naturally as \(\Z\) in degree \(0\) and the elements of positive degree, and using this we can extend the map \(Qu\) to a ring homomorphism \[Qu\co \sheaf O_{\moduli{fgl}} \to \Z \oplus QL,\] which factors through \(T\) and projects to degree \(2n\) to give a ring homomorphism \[\sheaf O_{\moduli{fgl}} \to \Z \oplus T_{2n}.\]  For any abelian group \(A\), a graded ring homomorphism \(\sheaf O_{\moduli{fgl}} \to \Z \oplus \Susp^{2n} A\) selects a formal group law with two clear properties: modulo terms of degree \(n\) it equals the additive group law, and it has no terms of degree greater than \(n\).  The terms appearing in exactly degree \(n\) take the following particular form:

\begin{definition}\label{DefinitionSymmetric2Cocycle}
A \index{symmetric 2 cocycle@symmetric \(2\)--cocycle}\textit{symmetric \(2\)--cocycle of degree \(n\)} is a polynomial \(f(x, y)\) satisfying
\begin{itemize}
    \item Symmetry: \(f(x, y) = f(y, x)\).
    \item Homogeneity: \(f\) consists solely of terms of total degree \(n\).
    \item \(2\)--cocycle condition:\footnote{We will justify the ``\(2\)--cocycle'' terminology in the course of the proof of \Cref{Symmetric2CocycleLemma}.} \[f(x, y) - f(t + x, y) + f(t, x + y) - f(t, x) = 0.\]
\end{itemize}
\end{definition}

Dropping the homogeneity condition in favor of a bounded above condition, we also have the following definition:
\begin{definition}
A series satisfying the analogues of the formal group law axioms modulo terms of degree \((n+1)\) is called a \index{formal group!bud}\textit{formal \(n\)--bud}.\footnote{A formal \(n\)--bud determines a ``multiplication'' \((\A^1 \times \A^1)^{(n)} \to \A^{1,(n)}\).  Note that this does \emph{not} belong to a group object, since \((\A^1 \times \A^1)^{(n)} \not\simeq \A^{1,(n)} \times \A^{1,(n)}\).  This is the observation that the ideals \((x, y)^{n+1}\) and \((x^{n+1}, y^{n+1})\) are distinct.}
\end{definition}

\begin{lemma}\label{TwoNBudsDifferByACocycle}
If \(+_\phi\) and \(+_\phi'\) are two \(n\)--buds which reduce to the same \((n-1)\)--bud, the difference \((x +_\phi y) - (x +_\phi' y)\) is a symmetric \(2\)--cocycle of degree \(n\).  Conversely, given such an \(n\)--bud \(+_\phi\) and a symmetric \(2\)--cocycle \(f\), the series \[x +_\phi' y := (x +_\phi y) + f(x, y)\] is also an \(n\)--bud.
\end{lemma}
\begin{proof}
This is made explicit in the following calculation:
\begin{align*}
x +_\phi' (y +_\phi' z) & = x +_\phi' (y +_\phi z + f(y, z)) \\
& = x +_\phi (y +_\phi z + f(y, z)) + f(x, y +_\phi z + f(y, z)) \\
& \equiv x +_\phi (y +_\phi z) + f(y, z) + f(x, y + z) \pmod{(x, y)^{n+1}}, \\
(x +_\phi' y) +_\phi' z & = (x +_\phi y + f(x, y)) +_\phi' z \\
& = (x +_\phi y + f(x, y)) +_\phi z + f(x +_\phi y + f(x, y), z) \\
& \equiv (x +_\phi y) +_\phi z + f(x, y) + f(x + y, z) \pmod{(x, y)^{n+1}},
\end{align*}
resulting in the \(2\)--cocycle condition on \(f\), and symmetry of \(x +_\phi' y\) enforces the symmetry of \(f\).  Reading the sequence of equalities backwards shows the converse.
\end{proof}

\begin{proof}[{Reduction of \Cref{LazardSplittingLemma} to \Cref{Symmetric2CocycleLemma}}]\index{symmetric 2 cocycle@symmetric \(2\)--cocycle!lemma}
We now show that the following conditions are equivalent:
\begin{enumerate}
\item (\Cref{Symmetric2CocycleLemma}) Symmetric \(2\)--cocycles of degree \(n\) are spanned by \[c_n = \frac{1}{d_n} \cdot ((x + y)^n - x^n - y^n),\] where \(d_n = \gcd\left( \binom{n}{k} \middle| 0 < k < n \right)\).
\item For \(F\) is an \((n-1)\)--bud, the set of \(n\)--buds extending \(F\) form a torsor under addition for \(R \otimes c_n\).
\item Any homomorphism \((Q\mathcal O_{\moduli{fgl}})_{2n} \to A\) of additive groups factors through a homomorphism \((Q \mathcal O_{\moduli{fgl}})_{2n} \to T_{2n}\).
\item (\Cref{LazardSplittingLemma}) There is a canonical splitting \(T_{2n} \to (Q \mathcal O_{\moduli{fgl}})_{2n}\).
\end{enumerate}

To verify that Claims 1 and 2 are equivalent, note first that \Cref{TwoNBudsDifferByACocycle} shows that the set of \(n\)--buds in Claim 2 is a torsor for the group of such polynomials in Claim 1, and hence Claims 1 and 2 are a simultaneous assertion about the precise form of the structure group for that torsor.  The equivalence of Claims 2 and 3 amounts to our moduli-theoretic interpretation of formal group laws on rings formed by square-zero extensions: a group map \[(Q\mathcal O_{\moduli{fgl}})_{2n} \to A\] is equivalent data to a ring map \[\mathcal O_{\moduli{fgl}} \to Z \oplus A\] with the prescribed behavior on \((Q\mathcal O_{\moduli{fgl}})_{2n}\) and which sends all other indecomposables to \(0\).  Finally, Claim 4 is the universal case of Claim 3, using the projection map \(\sheaf O_{\moduli{fgl}} \to (Q \sheaf O_{\moduli{fgl}})_{2n}\).  Applying Claim 3 to this map yields a diagram
\begin{center}
\begin{tikzcd}
\sheaf O_{\moduli{fgl}} \arrow{r} \arrow[equals]{rrd} & L \arrow[crossing over]{d} \\
& \Z \oplus T_{2n} \arrow[densely dotted]{r} & \Z \oplus (\sheaf O_{\moduli{fgl}})_{2n}.
\end{tikzcd}
\end{center}
\end{proof}

We will now verify Claim 1 computationally, thereby completing the proof of \Cref{LazardSplittingLemma} (and hence \Cref{LazardsTheorem}).

\begin{lemma}[{Symmetric \(2\)--cocycle lemma~\cite[Lemme 3]{LazardGroupesDeLie}, cf.\ \cite[Theorem 3.1]{HopkinsCOCTALOS}}]\label{Symmetric2CocycleLemma}
Symmetric \(2\)--cocycles of degree \(n\) are spanned by \[c_n = \frac{1}{d_n} \cdot ((x + y)^n - x^n - y^n),\] where \(d_n = \gcd\left( \binom{n}{k} \middle| 0 < k < n \right)\).
\end{lemma}
\begin{proof}
We begin with a reduction of the sorts of rings over which we must consider the possible symmetric \(2\)--cocycles.  First, notice that only the additive group structure of the ring matters: the symmetric \(2\)--cocycle condition does not involve any ring multiplication.  Second, it suffices to show the Lemma over a finitely generated abelian group, as a particular polynomial has finitely many terms and hence involves finitely many coefficients.  Noticing that the Lemma is true for \(A \oplus B\) if and only if it's true for \(A\) and for \(B\), we couple these facts to the structure theorem for finitely generated abelian groups to reduce to the cases \(\Z\) and \(\Z/p^r\).  From here, we can reduce to the prime fields: if \(A \le B\) is a subgroup and the Lemma is true for \(B\), it's true for \(A\), so we will be able to deduce the case of \(\Z\) from the case of \(\Q\).  Lastly, we can also reduce from \(\Z/p^r\) to \(\Z/p\) using an inductive Bockstein-style argument over the extensions \[(p^r) / (p^{r+1}) \to \Z/p^{r+1} \to \Z/p^r\] and noticing that \((p^r) / (p^{r+1}) \cong \Z/p\) as abelian groups.  Hence, we can now freely assume that our ground object is a prime field.

We now ground ourselves by fitting symmetric \(2\)--cocycles into a more general homological framework, hoping that we can use such a machine to power a computation.  For a formal group scheme \(\G\), we can form a simplicial scheme \(B\G\) in the usual way:
\[B\G := \left\{
\begin{tikzcd}[ampersand replacement=\&]
\begin{array}{c} * \\ \times \\ * \end{array} \arrow{r} \arrow[leftarrow,shift left=\baselineskip]{r} \arrow[leftarrow,shift right=\baselineskip]{r} \&
\begin{array}{c} * \\ \times \\ \G \\ \times \\ * \end{array} \arrow[leftarrow, shift left=(2*\baselineskip)]{r} \arrow[shift left=\baselineskip]{r} \arrow[leftarrow]{r} \arrow[shift right=\baselineskip]{r} \arrow[leftarrow, shift right=(2*\baselineskip)]{r} \&
\begin{array}{c} * \\ \times \\ \G \\ \times \\ \G \\ \times \\ *\end{array} \arrow[leftarrow, shift left=(3*\baselineskip)]{r} \arrow[shift left=(2*\baselineskip)]{r} \arrow[leftarrow, shift left=\baselineskip]{r} \arrow{r} \arrow[leftarrow, shift right=\baselineskip]{r} \arrow[shift right=(2*\baselineskip)]{r} \arrow[leftarrow, shift right=(3*\baselineskip)]{r} \&
\cdots
\end{tikzcd}
\right\}.\]
By applying the functor \(\InternalHom{FormalSchemes}(-, \G_a)(k)\), we get a cosimplicial abelian group stemming from the group scheme structure on \(\G_a\), and this gives a cochain complex of which we can take the \index{formal group!cohomology}cohomology.  In the case \(\G = \G_a\), the \(2\)--cocycles in this cochain complex are \emph{precisely} what we've been calling \(2\)--cocycles, so we may be interested in computing \(H^2\).  In particular, although the elements of \(H^2\) are \emph{not} required to be symmetric, we might find symmetry to be automatically enforced if \(H^2\) and \(B^2\) (and hence \(C^2\)) are sufficiently small.  Toward that end, we make the early remark that \(B^2\) is indeed very small: the generators \(x^k\) of \(C^1\) allow us to compute generators for \(B^2\) as \[d^1(x^k) = d_k c_k.\]

Now we turn to the computation of \(H^2\).  First, using the standard coordinate on \(\G_a\), we can compute the above cochain complex to be \[C^* = \left\{ (0) \xrightarrow{\partial} (x_1) \xrightarrow{\partial} (x_1, x_2) \xrightarrow{\partial} \cdots \right\},\] where the indicated objects are ideals of \(k\), \(k\ps{x_1}\), \(k\ps{x_1, x_2}\), and so on.  The differential in this complex is given by the formula
\begin{align*}
(\partial f)(x_1, \ldots, x_{n+1}) & = f(x_1, \ldots, x_n) \\
& \quad + \sum_{j=1}^n (-1)^j f(x_1, \ldots, x_j + x_{j+1}, \ldots, x_n) \\
& \quad + (-1)^{n+1} f(x_2, \ldots, x_{n+1}),
\end{align*}
and one sees from this definition that it extends to the constants in \(k\ps{x_1, \ldots, x_n}\) and that the constants form an exact complex, hence we can include them without harming the cohomology of the complex to form \[C^* = \left\{ k \xrightarrow{\partial} k\ps{x_1} \xrightarrow{\partial} k\ps{x_1, x_2} \xrightarrow{\partial} \cdots \right\}.\]

This complex plays a recognizable role: it computes \(\Cotor_{k\ps{x}}(k, k)\), according to \Cref{ExtendedComodulesExist} and \Cref{CotensorDefn}.  We now seek to apply theorems from homological algebra to compute this derived functor in an alternative way.  First, note from \Cref{ExtAndCotorAgree} that there is an isomorphism \[\Cotor_{\sheaf O_{\G}}(k, k) \cong \Ext_{\sheaf O_{\G}}(k, k),\] where we have taken \(\Ext\) in the category of comodules.  Then, we can apply Koszul duality to thread \(k\)--linear duality through the formula, effectively trading comodule calculations for module calculations: \[\Ext_{\sheaf O_{\G}}(k, k) \cong \left(\Tor_{\sheaf O_{\G}^*}(k, k)\right)^*.\]  These last groups, finally, are accessible by other, more efficient means.

\begin{description}
\item[\(\Q\):] There is a free \(\Q[t]\)--module resolution
\begin{center}
\begin{tikzcd}
& \Q \\
0 & \Q[t] \arrow{u} \arrow{l} & \Q[t] \arrow["\cdot t"]{l} & 0 \arrow{l},
\end{tikzcd}
\end{center}
to which we apply \((-) \otimes_{\Q[t]} \Q\) to calculate \[H^* \InternalHom{FormalSchemes}(B\G_a, \G_a)(\Q) = \begin{cases} \Q & \text{when \(* = 0\)}, \\ \Q & \text{when \(* = 1\)}, \\ 0 & \text{otherwise}. \end{cases}\] This means that every \(2\)--cocycle is a coboundary, symmetric or not.
\item[\(\F_p\):] Now we are computing \(\Ext\) over a free commutative \(\F_p\)--algebra on one generator with divided powers.  Such an algebra splits as a tensor of truncated polynomial algebras, and again computing a minimal free resolution results in the calculation
\[H^* \InternalHom{FormalSchemes}(B\G_a, \G_a)(\F_p) =\hspace{12em}\]
\[\hspace{8.5em}=
\begin{cases}
\frac{\F_p[\alpha_k \mid k \ge 0]}{\alpha_k^2 = 0} \otimes \F_p[\beta_k \mid k \ge 0] & \text{when \(p > 2\)}, \\
\F_2[\alpha_k \mid k \ge 0] & \text{when \(p = 2\)},
\end{cases}\] with \(\alpha_k \in H^1\) and \(\beta_k \in H^2\).  Now that we know what to look for, we can find representatives of each of these classes:
\begin{itemize}
\item The class \(\alpha_k\) can be represented by \(x^{p^k}\), as this is a minimally divisible monomial of degree \(p^k\) satisfying the \(1\)--cocycle condition \[x^{p^k} - (x+y)^{p^k} + y^{p^k} = 0.\]
\item The \(2\)--cohomology is concentrated in degrees of the form \(p^k\) and \(p^j + p^k\), corresponding to \(\beta_k\) and \(\alpha_j \alpha_k\).  Since \(c_{p^k}\) is a \(2\)--cocycle of the correct degree and not a \(2\)--coboundary (cf.\ \(d^1(x^{p^k}) = d_{p^k} c_{p^k}\), and \(p \mid d_{p^k}\)), we can use it as a representative for \(\beta_k\).  (Additionally, the asymmetric class \(\alpha_k \alpha_j\) is represented by \(x^{p^k} y^{p^j}\).)
\item Similarly, in the case \(p = 2\) the exceptional class \(\alpha_{k-1}^2\) is represented by \(c_{2^k}(x, y)\), as this is a \(2\)--cocycle in the correct degree which is not a \(2\)--coboundary.
\end{itemize}
Given how few \(2\)--coboundaries and \(2\)--cohomology classes there are, we conclude that \(c_n(x, y)\) and \(x^{p^a} y^{p^b}\) give a basis for \emph{all} of the \(2\)--cocycles.  Of these it is easy to select the symmetric ones, which agrees with our expected conclusion. \qedhere
\end{description}
\end{proof}

The most important consequence of \Cref{LazardsTheorem} is \emph{smoothness}:
\begin{corollary}\label{MfglIsSmooth}
Given a formal group law \(F\) over a ring \(R\) and a surjective ring map \(f\co S \to R\), there exists a formal group law \(\widetilde F\) over \(S\) with \[F = f^* \widetilde F.\]
\end{corollary}
\begin{proof}
Identify \(F\) with the classifying map \(\Spec R \to \moduli{fgl}\).  Employ an isomorphism \[\phi\co \moduli{fgl} \to \Spec L\] afforded by \Cref{LazardsTheorem}, so that \(\phi \circ F\) is selected by a sequence of elements \(r_n = \phi^* F^*(t_n) \in R\).  Each of these admit preimages \(s_n\) through \(f\), and we determine a map \[\widetilde{\phi \circ F}\co \Spec S \to \Spec L\] by the formula \(\widetilde{\phi \circ F}^* (t_j) = s_j\) and freeness of \(L\).  Since \(\phi\) is an isomorphism, this determines a map \(\widetilde F = \phi^{-1} \circ \widetilde{\phi \circ F}\) factoring \(F\).
\end{proof}

In order to employ \Cref{MfglIsSmooth} effectively, we will need to know when a map \(\Spec R \to \moduli{fg}\) classifying a local formal group (i.e., a map to the moduli stack as in \Cref{WarningAboutStacks}) can be lifted to a triangle
\begin{center}
\begin{tikzcd}
& \moduli{fgl} \arrow{d} \\
\Spec R \arrow{r} \arrow[densely dotted]{ru} & \moduli{fg}.
\end{tikzcd}
\end{center}
Once this is achieved, we can apply \Cref{MfglIsSmooth} to a surjective map of rings \(\Spec R \to \Spec S\) to build a second diagram
\begin{center}
\begin{tikzcd}
\Spec S \arrow[densely dotted]{r} \arrow[densely dotted]{rd} & \moduli{fgl} \arrow{d} \\
\Spec R \arrow{r} \arrow[crossing over]{ru} \arrow{u} & \moduli{fg}.
\end{tikzcd}
\end{center}

\begin{lemma}[{\cite[Proposition 11.7]{LurieChromaticCourseNotes}}]\label{CoordinatizbleFGs}
A map \(\G\co \Spec R \to \moduli{fg}\) lifts to \(\moduli{fgl}\) exactly when the Lie algebra \(T_0 \G\) of \(\G\) is isomorphic to \(R\).
\end{lemma}
\begin{proof}
Certainly if \(\G\) admits a global coordinate, then \(T_0 \G \cong R\).  Conversely, the formal group \(\G\) is certainly locally isomorphic to \(\A^1\) by a covering \[i_\alpha\co X_\alpha \to \Spec R\] and isomorphisms \[\phi_\alpha\co i_\alpha^* \G \cong \A^1.\]  However, \textit{a priori}, these isomorphisms may not glue, corresponding to the potential nontriviality of the {\Cech} \(1\)--cocycle \[[\phi_\alpha] \in \check{H}^1(\Spec R; \moduli{ps}^{\gpd}).\]  The group scheme \(\moduli{ps}^{\gpd}\) is populated by \(T\)--points of the form \[\moduli{ps}^{\gpd}(T) = \left\{ t_0 x + t_1 x^2 + t_2 x^3 + \cdots \mid t_j \in T, t_0 \in T^\times \right\},\] and it is admits a filtration by the closed subschemes \[\moduli{ps}^{\gpd, \ge N}(T) = \left\{ 1 \cdot x + t_N x^{N+1} + t_{N+1} x^{N+2} + \cdots \mid t_j \in T \right\}.\]  The associated graded of this filtration is \(\Gm \times \mathbb G_a^{\times \infty}\), and hence the filtration spectral sequence shows \[\check{H}^1(\Spec R; \moduli{ps}^{\gpd}) \xrightarrow{\simeq} \check{H}^1(\Spec R; \Gm),\] as \(\check{H}^1(\Spec R; \mathbb G_a) = 0\) for all affine schemes.  Finally, given a choice\footnote{Incidentally, a choice of trivialization of \(T_0 \G\) exactly resolves the indeterminacy of \(\log'(0)\) baked in to \Cref{RationalFGLsHaveLogarithms}.} of trivialization \(T_0 \G \cong R\), this induces compatible trivializations of \(T_0 i_\alpha^* \G\), which we can use to rescale the isomorphisms \(\phi_\alpha\) so that their image in \(\check{H}^1(\Spec R; \Gm)\) vanishes, and hence \([\phi_\alpha]\) is induced from a class in \[\check{H}^1(\Spec R; \moduli{ps}^{\gpd, \ge 1}).\]  This obstruction group vanishes.
\end{proof}

\begin{example}
In light of \Cref{CoordinatizbleFGs}, it is easy to produce examples of ``non-coordinatizable formal groups'', i.e., maps of stacks \(\Spec T \to \moduli{fg}\) that do not come from maps of simplicial schemes \(\Spec T \to \moduli{fg}\).  Take \(\L\) to be any nontrivial line bundle over \(\Spec T\), trivialized on a cover \(\bigsqcup_j U_j\), and define the functor \(\G\) by setting \(\G|_{U_j} = \L(U_j) \otimes \G_a\) and then gluing these together using the data of \(\L\).  For a concrete source of such bundles \(\L\), one can use nontrivial fractional ideals in a Dedekind domain.
\end{example}

\begin{remark}\label{StrictIsosRemark}
The subgroup scheme \(\moduli{ps}^{\gpd, \ge 1}\) is often referred to in the literature as the group of \index{formal group!strict isomorphism}\textit{strict isomorphisms}.  There is an associated moduli of formal groups identified only up to strict isomorphism, which sits in a fiber sequence \[\Gm \to \moduli{fgl} \mmod \moduli{ps}^{\gpd, \ge 1} \to \moduli{fg}.\]  These appeared earlier in this Lecture as well: in the proof of \Cref{LazardsTheorem}, we constructed over \(L\) the universal formal group law equipped with a \emph{strict} \index{formal group!exponential}exponential map.  The moduli of formal group laws modulo strict isomorphisms appears as the context associated to the graded version, rather than even-periodic version, of the story told so far---i.e., as a sort of non-periodic context \(\context{MU}\).
\end{remark}











\section{The structure of \texorpdfstring{\(\moduli{fg}\)}{Mfg} II: Large scales}\label{MfgII:LargeScales}

We now turn to understanding the geometry of the quotient stack \(\moduli{fg}\) itself, armed with two important tools: \Cref{RationalFGLsHaveLogarithms} and \Cref{MfglIsSmooth}.  We begin with a rephrasing of the former:

\begin{theorem}[{cf.\ \Cref{RationalFGLsHaveLogarithms}}]\label{RationalGeometricPointsOfMfg}
Let \(k\) be any field of characteristic \(0\).  Then \(\G_a\) describes the unique map
\[\pushQED{\qed}
\Spec k \mmod \Gm \xrightarrow{\simeq} \moduli{fg}. \qedhere
\popQED\]
\end{theorem}

One of our overarching tasks from the introduction to this Case Study is to enhance this to a classification of \emph{all} of the geometric points of \(\moduli{fg}\), including those where \(k\) is a field of positive characteristic \(p\): \[\G\co \Spec k \to \moduli{fg} \times \Spec \Z_{(p)}.\]  We proved this Theorem in the characteristic \(0\) case by solving a certain differential equation, which necessitated integrating a power series, and integration is what we expect to fail in characteristic \(p\).  The following definition tracks \emph{where} it fails:
\begin{definition}\label{HeightDefn}
Let \(+_\phi\) be a formal group law over a \(\Z_{(p)}\)--algebra.  Let \(n\) be the largest degree such that there exists an invertible formal power series \(\ell\) with \[\ell(x +_\phi y) = \ell(x) + \ell(y) \pmod{(x, y)^{n}},\] i.e., \(\ell\) is a logarithm for the \((n-1)\)--bud determined by \(+_\phi\).  The \index{formal group!height}\textit{\(p\)--height of \(+_\phi\)} is defined to be \(\log_p(n)\).
\end{definition}

\begin{example}\label{HeightOfGmExample}
This definition is somewhat subtle, since \(\ell\) is not required to integrate a truncation of the invariant differential.  Nonetheless, it will be a consequence of the results below that the height of a formal group law can be determined by attempting to integrate its unit-speed invariant differential and noting the first degree where the requisite division is impossible, provided that that degree is of the form \(p^d\).  For example, the unit-speed invariant differential associated to the usual coordinate on the muliplicative group has the form \[\omega(x) = (1 + x + x^2 + \cdots + x^{p-1} + \cdots) \dx.\]  The radius of convergence of this ordinary differential equation in \(\Z_{(p)}\) is \(p\), owing to the term \[\int x^{p-1} \dx = \frac{x^p}{p} \not\in \Z_{(p)}[x].\]  We thus see that \(\G_m\) has height \(\log_p(p) = 1\).
\end{example}

This turns out to be a crucial invariant of a formal group law, admitting many other interesting presentations.  In this Lecture, investigation of this definition will lead us to a classification of the closed substacks of \(\moduli{fg}\), another of our overarching tasks.  As a first step, we would like to show that this value is well-behaved in various senses---for instance, it is always an integer (or \(\infty\)).  First, we note that this definition really depends on the formal group rather than the formal group law.

\begin{lemma}\label{HeightIsAnIsomInvariant}
The height of a formal group law is an isomorphism invariant, i.e., it descends to give a function \[\height\co \pi_0 \moduli{fg}(T) \to \R_{> 0} \cup \{\infty\}\] for any local test \(\Z_{(p)}\)--algebra \(T\).
\end{lemma}
\begin{proof}
The series \(\ell\) is a partial logarithm for the formal group law \(\phi\), i.e., an isomorphism between the formal group defined by \(\phi\) and the additive group.  Since isomorphisms compose, this statement follows.
\end{proof}

With this in mind, we look for a more standard form for formal group laws, where height taking on integer values will hopefully be obvious.  In order to give ourselves more tools to work with, we assume that the our ground ring is torsion-free---and although our true goal is to understand formal groups over positive characteristic fields, we are free to make this assumption by \Cref{MfglIsSmooth}.  In this setting, the most blindly optimistic standard form is as follows:
\begin{definition}[{cf.\ \cite[Proposition 15.2.4]{Hazewinkel}}]\label{DefnPTypInvDiffl}
We say that a formal group law \(+_\phi\) is \index{p typical@\(p\)--typical!logarithm}\textit{\(p\)--typical} when its invariant differential takes the form \[\omega(x) = \sum_{j=0}^\infty \ell_j x^{p^j-1} \dx.\]
\end{definition}

\begin{lemma}[{\cite[Theorem 15.2.9]{Hazewinkel}}]\label{EveryLogHaspTypification}\label{EveryFGLIsPTypical}
Every formal group law \(+_\phi\) over a \(\Z_{(p)}\)--algebra is naturally isomorphic to a \(p\)--typical formal group law, called the \textit{\(p\)--typification} of \(+_\phi\).
\end{lemma}
\begin{proof}
Let \(\G\) be the formal group associated to \(+_\phi\), denote its inherited parameter by \[g_0\co \A^1 \xrightarrow{\cong} \G,\] so that \(\omega_0(x) = (g_0^* \omega)(x) = \sum_{n=0}^\infty a_n x^{n-1} \dx\) is the invariant differential associated to \(+_\phi\).  Our goal is to perturb this coordinate to a new coordinate \(g_\infty\) so that its associated invariant differential has the form \[\sum_{n=0}^\infty a_{p^n} x^{p^n-1} \dx.\]  To do this, we introduce four operators on functions\footnote{Unfortunately, it is standard in the literature to call these operators on ``curves'', which does not fit well with our previous use of the term in \Cref{ComplexBordismChapter}.} \(\A^1 \to \G\):
\begin{itemize}
\item Given \(r \in R\), we can define a \index{homothety}\textit{homothety} by rescaling the coordinate by \(r\): \[(\theta_r^* g_0^* \omega)(x) = \omega_0(rx) = \sum_{n=1}^\infty (a_n r^n) x^{n-1} \dx.\]
\item For \(\ell \in \N\), we can define a shift operator (or \index{Verschiebung}\textit{Verschiebung}) by \[(V_\ell^* g_0^* \omega)(x) = \omega_0(x^\ell) = \sum_{n=1}^\infty a_n \ell x^{n \ell - 1} \dx.\]
\item For \(\ell \in \Z\), we define the \(\ell\)--series to be \[[\ell](g_0(x)) = \overset{\text{\(\ell\) times}}{\overbrace{g_0(x) +_{\G} \cdots +_{\G} g_0(x)}}.\]  We can extend this definition slightly: given an \(\ell \in \Z_{(p)}\), we form the \(\ell\)--series by writing \(\ell\) as a fraction \(\ell = s/t\) and composing the \(s\)--series with the inverse of the \(t\)--series.  The effect on the invariant differential is given by \[([\ell]^* g_0^* \omega)(x) = \ell \omega_0(x) = \sum_{n=1}^\infty \ell a_n x^{n-1} \dx.\]
\item For \(\ell \in \N\), we can define a \index{Frobenius}\textit{Frobenius operator}\footnote{There are other definitions of the Frobenius operator which are less mysterious but less explicit.  For instance, it also arises from applying the Verschiebung to the character group (or ``Cartier dual'') of \(\G\).} by \[F_\ell g_0(x) = \sumG_{j=1}^\ell g_0(\zeta_\ell^j x^{1/\ell}),\] where \(\zeta_\ell\) is a primitive \(\ell\){\th} root of unity.  Because this formula is Galois--invariant in choice of primitive root, it actually expands to a series which lies over the ground ring (without requiring an extension by \(\zeta_\ell\) or by \(z^{1/\ell}\)).  Using the standard identity \[\sum_{j=1}^\ell \zeta_\ell^{jn} = \begin{cases}\ell & \text{if \(\ell \mid n\)}, \\ 0 & \text{otherwise}, \end{cases}\] we can explicitly compute the behavior of \(F_\ell\) on the invariant differential: \[(F_\ell^* g_0^* \omega)(x) = \sum_{n=1}^\infty a_{n \ell} x^{n-1} \dx.\]
\end{itemize}
Stringing these together, for \(p \nmid \ell\) we have \[([1/\ell]^* V_\ell^* F_\ell^* g_0^* \omega)(x) = \sum_{n=1}^\infty a_{n \ell} x^{n \ell - 1} \dx.\]  Hence, we can iterate over primes \(\ell \ne p\), and for two adjacent such primes \(\ell' > \ell\) we consider the perturbation \[g_{\ell'} = g_\ell -_{\G} [1/\ell] V_\ell F_\ell g_\ell.\]  Each of these differences gives a parameter according to \Cref{InverseFunctionTheoremForFVars}, and the first possible nonzero term appears in degree \(\ell\), hence the coefficients stabilize linearly in \(\ell\).  Passing to the limit thus gives a new parameter \(g_\infty\) on the same formal group \(\G\), but now with the \(p\)--typicality property.
\end{proof}

\begin{lemma}
If \(x\) is a parameter for a formal group \(\G\), then any other parameter \(y\) admits a unique expression as \[y = \sumfgl{\G}_{j=0}^\infty \theta_{b_j}^* V_j^* x.\]
\end{lemma}
\begin{proof}
This a quick induction: set \(y = y_\infty\) and select the unit \(b_1\) such that setting \(b_1 x = y_1\) gives \[y_\infty - y_1 = y_\infty - \theta_{b_1}^* V_1^* x \equiv 0 \pmod{x^{1+1}}.\]  We inductively define \(y_n\) by examining \[y_\infty - y_{n-1} \equiv b_n x^n \pmod{x^{n+1}}\] and setting \[y_n = y_{n-1} +_{\G} \theta_{b_n}^* V_n^* x. \qedhere\]
\end{proof}

\begin{corollary}[{cf.\ \Cref{HeightOfGmExample}, cf.\ also \cite[Proposition 13.6]{LurieChromaticCourseNotes}}]\label{GoodParametersComputeHeight}
Let \(x\) be some parameter for a formal group \(\G\), and suppose that the minimal index so that the invariant differential is not integrable in that degree takes the form \(p^d-1\).  Then \(\G\) has height \(d\).
\end{corollary}
\begin{proof}
Take \(x\) to be a parameter as in the statement.  Although \textit{a priori} the partial logarithm \(\ell\) of \Cref{HeightDefn} may not be the partial integral of the invariant differential associated to \(x\), it is the partial logarithm associated to \emph{some} parameter \(y\), and we use the preceding Lemma to re-express \(y\) as \[y = \sumfgl{\G}_{j=0}^\infty \theta_{b_j}^* V_j^* x.\]  Consider the invariant differential associated to \(y\), expressed in terms of \(x\) and \(dx\), using the rules described in the proof of \Cref{EveryFGLIsPTypical}: \[\omega_y = \sum_{j=0}^\infty \theta_{b_j}^* V_j^* \left(\sum_{n=0}^\infty a_{p^n} x^{p^n-1} \dx\right) = \sum_{j=0}^\infty \sum_{n=0}^\infty j a_{p^n} b_j^{jp^n-1} x^{jp^n-1} \dx.\]  The terms in the critical degree \((p^d-1)\) take the form \[\sum_{n=0}^d p^{d-n} a_{p^n} b_{p^{d-n}}^{p^d-1} x^{p^d-1} \dx.\]  The term \(a_{p^n}\) is assumed to have \(p\)--adic valuation at least \(n\) for \(n < d\), and hence \(p^{d-n}a_{p^n}\) has \(p\)--adic valuation at least \(d\) for \(n < d\).  Since in the case \(n = d\) the coefficient \(a_{p^d}\) has assumed to have \(p\)--adic valuation strictly less than \(d\), this sum must also have \(p\)--adic valuation strictly less than \(d\).  In particular, this shows that the radius of convergence of the partial logarithm is at most \(p^d-1\), and the existence of \(x\) itself shows that it is at least \(p^d-1\).
\end{proof}

\begin{corollary}\label{FGLHeightIsAnInteger}
The height of a formal group law lies in \(\N \cup \{\infty\}\).
\end{corollary}
\begin{proof}
A \(p\)--typical coordinate is guaranteed to satisfy the preconditions of \Cref{GoodParametersComputeHeight}, and \Cref{EveryFGLIsPTypical} guarantees such coordinates.
\end{proof}

In the course of the above discussion, manipulations with the \(\ell\)--series have played a critical role, and we have shied away from the \(p\)--series because of the noninvertibility of \(p\) in \(\Z_{(p)}\).  As a consequence, this means that the \(p\)--series contains an unusual amount of information even after \(p\)--typification of a coordiante, and so we turn to its analysis.

\begin{lemma}[{\cite[Section 4]{Araki}}]\label{pTypLogGivesNicePSeries}\label{pTypLawsHaveNicePSeries}
A formal group law \(+_\phi\) is \(p\)--typical if and only if there are elements \(v_d\) with \[[p]_\phi(x) = px +_\phi v_1 x^p +_\phi v_2 x^{p^2} +_\phi \cdots +_\phi v_d x^{p^d} +_\phi \cdots.\]
\end{lemma}
\begin{proof}[Proof sketch]
Suppose first that \(+_\phi\) is \(p\)--typical with invariant differential \[\omega(x) = \sum_{n=0}^\infty a_n x^{p^n-1} \dx.\]  We can then compare the two series
\begin{align*}
(\theta_p^* \omega)(x) & = p \dx + \cdots, \\
([p]^* \omega)(x) & = p \omega(x) = p \dx + \cdots.
\end{align*}
The difference is concentrated in degrees of the form \(p^d-1\), beginning in degree \(p-1\), so we can find an element \(v_1\) such that \[[p]^* \omega(x) - (\theta_p^* \omega(x) + \theta_{v_1}^* V_p \omega(x))\] is also concentrated in degrees of the form \((p^d-1)\) but now starts in degree \((p^2-1)\).  Iterating this gives the equation
\begin{align*}
[p]^* \omega & = \theta_p^* \omega + \theta_{v_1}^* V_p^* \omega + \theta_{v_2}^* V_{p^2}^* \omega + \cdots, \\
\intertext{at which point we can use the invariance property of \(\omega\) to deduce}
[p]_\phi(x) & = px +_\phi v_1 x^p +_\phi v_2 x^{p^2} +_\phi \cdots +_\phi v_n x^{p^n} +_\phi \cdots.
\end{align*}
In the other direction, the invariant differential coefficients can be recursively recovered from the coefficients \(v_d\) for a formal group law with \(p\)--typical \(p\)--series, using a similar manipulation.  In fact, we can push this slightly further:
\begin{align*}
\sum_{d=0}^\infty p a_{p^d} x^{p^d-1} \dx & = \sum_{d=0}^\infty \sum_{j=0}^\infty p^d a_{p^j} v_d^{p^j} x^{p^{d+j}-1} \dx \\
& = \sum_{n=0}^\infty \left( \sum_{k=0}^n a_{p^k} p^{n-k} v_{n-k}^{p^k} \right) x^{p^n-1} \dx,
\end{align*}
implicitly taking \(a_1 = 1\) and \(v_0 = p\).
\end{proof}

\Cref{pTypLogGivesNicePSeries} shows that, at least in the case that the ground ring is an integral domain, the \(p\)--series of a \(p\)--typical formal group law contains exactly as much information as the logarithm itself (and hence fully determines the formal group law).  We make this observation precise in the following important definition and theorem:

\begin{definition}
In the setting of a coordinate on a formal group over a torsion-free \(\Z_{(p)}\)--algebra, the following conditions are equivalent:
\begin{enumerate}
\item Its invariant differential is \(p\)--typical, as in \Cref{DefnPTypInvDiffl}.
\item For each prime \(\ell \ne p\), the Frobenius \(F_\ell\) vanishes on the coordinate.
\item The coordinate factors through \(\eps\co \moduli{fgl} \to \moduli{fgl}\), where \(\eps\) denotes the idempotent \(p\)--typicalizing procedure developed in \Cref{EveryFGLIsPTypical}.
\end{enumerate}
The second and third conditions \emph{do not} require the torsion-free assumption, and so we use the second condition to define a closed subscheme \(\moduli{fgl}^{\ptyp} \subseteq \moduli{fgl}\), the \textit{moduli of \(p\)--typical formal group laws}.\footnote{The third condition selects the same functor as the second condition, but it does not as obviously show that this is a closed subscheme of $\moduli{fgl}$ (and hence itself an affine scheme).}
\end{definition}

\begin{theorem}[{cf.\ \cite[Proposition 5.1]{MillerNotesCobordism}, \cite[Theorem A2.2.3]{RavenelGreenBook}, and the proof of \cite[Proposition 19.10]{HopkinsCOCTALOS}}]\label{KudoArakiIsomorphism}
The \index{Kudo Araki map@Kudo--Araki map}\textit{Kudo--Araki map} determined by \Cref{pTypLawsHaveNicePSeries} \[\Z_{(p)}[v_1, v_2, \ldots, v_d, \ldots] \xrightarrow{v} \sheaf O_{\moduli{fgl}^{\ptyp}}\] is an isomorphism.
\end{theorem}
\begin{proof}
We begin with the image factorization definition of $\moduli{fgl}^{\ptyp}$:
\begin{center}
\begin{tikzcd}[column sep=-0.8em]
& \sheaf O_{\moduli{fgl}} \arrow["s"]{rdd} \arrow["\eps"]{rrd} \arrow{rrr} & & & \sheaf O_{\moduli{fgl}} \otimes \Q \arrow["\eps"]{rrd} \arrow["s" near end]{rdd} \\
& & & \sheaf O_{\moduli{fgl}} \arrow[crossing over]{rrr} & & & \sheaf O_{\moduli{fgl}} \otimes \Q \\
\Z_{(p)}[v_1, \ldots, v_d, \ldots] \arrow["v"]{rr} & & \sheaf O_{\moduli{fgl}^{\ptyp}} \arrow["i"]{ru} \arrow{rrr} & & & \sheaf O_{\moduli{fgl}^{\ptyp}} \otimes \Q \arrow["i"]{ru}.
\end{tikzcd}
\end{center}
We immediately deduce that all the horizontal arrows are injections: in \Cref{LazardsTheorem} we calculated \(\sheaf O_{\moduli{fgl}}\) to be torsion-free; idempotence of \(\eps\) shows that \(\sheaf O_{\moduli{fgl}^{\ptyp}}\) is a subring of \(\sheaf O_{\moduli{fgl}}\), hence it is also torsion-free; and \Cref{pTypLogGivesNicePSeries} shows that \((i \circ v)(v_n)\) agrees with \(pm_{p^n}\) in the module of indecomposables \(Q(\sheaf O_{\moduli{fgl}} \otimes \Q)\).

To complete the proof, we need to show that \(v\) is surjective, which will follow from calculating the indecomposables in \(\sheaf O_{\moduli{fgl}^{\ptyp}}\) and checking that \(Qv\) is surjective.  Since \(s\) is surjective, the map \(Qs\) on indecomposables is surjective as well, and its effect can be calculated rationally.  Since \((Q\eps)(m_n) = 0\) for \(n \ne p^d\), we have that \(Q(\sheaf O_{\moduli{fgl}^{\ptyp}})\) is generated by \(s(t_{p^d-1})\) under an isomorphism as in \Cref{LazardsTheorem}.  It follows that \(Qi\) injects, hence \(Qv\) must surject by the calculation of \(Q(i \circ v)(v_n)\) above.
\end{proof}

\begin{corollary}\label{PSeriesDetermines}
If \([p]_\phi(x) = [p]_\psi(x)\) for two \(p\)--typical formal group laws \(+_\phi\) and \(+_\psi\), then \(+_\phi\) and \(+_\psi\) are themselves equal. \qed
\end{corollary}

\begin{corollary}\label{EveryPSeriesArises}
For any sequence of coefficients \(v_j \in R\) in a \(\Z_{(p)}\)--algebra \(R\), there is a unique \(p\)--typical formal group law \(+_\phi\) with
\[\pushQED{\qed}
[p]_\phi(x) = px +_\phi v_1 x^p +_\phi v_2 x^{p^2} +_\phi \cdots +_\phi v_d x^{p^d} +_\phi \cdots. \qedhere
\popQED\]
\end{corollary}

\begin{corollary}
In the case that the ground ring \(R\) is a field of positive characteristic, the height of a formal group can be taken to be the size of its \(p\)--torsion: \[\height(\G) = \log_p \dim_R \sheaf O_{\G[p]} = \log_p \dim_R \sheaf (O_{\G} / [p](x)).\]  This is the first nonzero coefficient in the expansion of its \(p\)--series.\footnote{In the case of a field of characteristic \(0\), this definition of height is constant at \(0\).  This convention is uniformly abided.} \qed
\end{corollary}

Finally, we exploit these results to make deductions about the geometry of \(\moduli{fg} \times \Spec \Z_{(p)}\).  There is an inclusion of groupoid--valued sheaves from \(p\)--typical formal group laws with \(p\)--typical isomorphisms to all formal group laws with all isomorphisms.  \Cref{EveryFGLIsPTypical} can be viewed as presenting this inclusion as a deformation retraction, witnessing a natural \index{stack!equivalence}\emph{equivalence} of groupoids.  It follows from \Cref{WarningAboutStacks} that they both present the same stack.  The central utility of this equivalence is that the Kudo--Araki moduli of \(p\)--typical formal group laws is a considerably smaller algebra than \(\sheaf O_{\moduli{fgl}}\), resulting in a less noisy picture of the Hopf algebroid.

Our final goal in this Lecture is to exploit this refined presentation in the study of invariant functions.
\begin{definition}[{\cite[Lemma 2.28]{GoerssQCohOnMfg}}]\label{DefnClosedSubstack}
Let \((A, \Gamma)\) be a Hopf algebroid and let \((X_0, X_1)\) be the associated groupoid scheme.  A function \(f\co X_0 \to \mathbb A^1\) is said to be \index{stack!invariant function}\textit{invariant} when it is stable under isomorphism, i.e., when there is a diagram
\begin{center}
\begin{tikzcd}
X_1 \arrow[shift left=0.3em, "t"]{d} \arrow[shift right=0.3em, "s"']{d} \arrow["s^* f = t^* f"]{rd} \\
X_0 \arrow["f"]{r} & \mathbb A^1.
\end{tikzcd}
\end{center}
(In terms of Hopf algebroids, the corresponding element \(a \in A\) satisfies \(\eta_L(a) = \eta_R(a)\).)  Correspondingly, a closed subscheme \(A \subseteq X_0\) determined by the simultaneous vanishing of functions \(f_\alpha\) is said to be \index{stack!invariant ideal}\textit{invariant} when the vanishing condition is invariant---i.e., a point lies in the simultaneous vanishing locus if and only if its entire orbit under \(X_1\) also lies in the simultaneous vanishing locus.  (In terms of Hopf algebroids, the corresponding ideal \(I \subseteq A\) satisfies \(\eta_L(I) = \eta_R(I)\).)  Finally, a \index{stack!closed}\textit{closed substack} is a substack determined by an invariant ideal of \(X_0\).
\end{definition}

We now have the language to describe the closed substacks of \(\moduli{fg} \times \Spec \Z_{(p)}\), which is equivalent to discerning all of the invariant ideals of \(\sheaf O_{\moduli{fgl}^{\ptyp}}\).

\begin{corollary}[{\cite[Theorem 4.6 and Lemmas 4.7-8]{Wilson}}]\label{IdIsAnInvariantIdeal}
The ideal \(I_d = (p, v_1, \ldots, v_{d-1})\) is invariant under the action of \emph{strict} formal group law isomorphisms for all \(d\).  It determines the closed substack \(\moduli{fg}^{\ge d}\) of formal group laws of \(p\)--height at least \(d\).
\end{corollary}
\begin{proof}
\index{formal group!height}
Recall from \Cref{KudoArakiIsomorphism} the Kudo--Araki isomorphism \[\moduli{fgl}^{\ptyp} \xrightarrow{\simeq} \Spec \Z_{(p)}[v_1, v_2, \ldots, v_d, \ldots] =: \Spec V,\] and let \(+_L\) denote the associated universal \(p\)--typical formal group law with \(p\)--series \[[p]_L(x) = px +_L v_1 x^p +_L v_2 x^{p^2} +_L \cdots +_L v_d x^{p^d} +_L \cdots.\]  Over \(\Spec V[t_1, t_2, \ldots]\), we can form a second group law \(+_R\) by conjugating \(+_L\) by the universal \(p\)--typical coordinate transformation \(g(x) = \sumfgl{L}_{j=0}^\infty t_j x^{p^j}\).\footnote{To see that the transformation \(g\) must have this form, suppose merely that it is an isomorphism of formal group laws with \(p\)--typical source and target, \(+_L\) and \(+_R\) respectively.  Since \(\sheaf O_{\moduli{fgl}^{\ptyp}}\) is a torsion-free ring, by rationalizing we may express \(g\) as the composite of the rational logarithm for \(+_L\), a possible scalar multiplication, and the rational exponential for \(+_R\).  These are each \(p\)--typical transformations by hypothesis, and since \(p\)--typicality is stable under composition, this is true of \(g\).}  The corresponding \(p\)--series \[[p]_R(x) = \sumfgl{R}_{d=0}^\infty \eta_R(v_d) x^{p^d}\] determines the \(\eta_R\) map of the Hopf algebroid \((V, V[t_1, t_2, \ldots])\) presenting the moduli of \(p\)--typical formal group laws and \(p\)--typical isomorphisms.  We cannot hope to compute \(\eta_R(v_d)\) explicitly, but modulo \(p\) we can apply Freshman's Dream to the expansion of \[[p]_L(g(x)) = g([p]_R(x))\] to discern some information: \[\sumfgl{L}_{\substack{i \ge 0 \\ j > 0}} t_i \eta_R(v_j)^{p^i} \equiv \sumfgl{L}_{\substack{i > 0 \\ j \ge 0}} v_i t_j^{p^i} \pmod p.\]  This is still inexplicit, since \(+_L\) is a very complicated operation, but we can see \(\eta_R(v_d) \equiv v_d \pmod{I_d}\).  It follows that \(I_d\) is invariant for each \(d\).  Additionally, the closed substack this determines are those formal groups admitting local \(p\)--typical coordinates for which \(v_{\le d} = 0\), guaranteeing that the height of the associated formal group is at least \(d\).
\end{proof}

\noindent What is \emph{much} harder to prove is the following:

\begin{theorem}[{Landweber's classification of invariant prime ideals, \cite[Corollary 2.4 and Proposition 2.5]{LandweberInvariantRegIdeals}, cf.\ \cite[Theorem 4.9]{Wilson}}]\label{LandwebersClassificationOfClosedSubstacks}
The unique closed reduced substack of \(\moduli{fg} \times \Spec \Z_{(p)}\) of codimension \(d\) is selected by the invariant prime ideal \(I_d \subseteq \sheaf O_{\moduli{fgl}^{\ptyp}}\).
\end{theorem}
\begin{proof}[Proof sketch]
We want to show that if \(I\) is an invariant prime ideal, then \(I = I_d\) for some \(d\).  To begin, note that \(v_0 = p\) is the only invariant function on \(\moduli{fgl}^{\ptyp}\), hence \(I\) must either be trivial or contain \(p\).  Then, inductively assume that \(I_d \subseteq I\).  If this is not an equality, we want to show that \(I_{d+1} \subseteq I\) is forced.  Take \(y \in I \setminus I_d\); if we could show \[\eta_R(y) = a v_d^j t^K + \text{higher order terms}\] for nonzero \(a \in \Z_{(p)}\), we could proceed by primality to show that \(v_d \in I\) and hence \(I_{d+1} \subseteq I\).  This is possible (and, indeed, this is how the full proof goes), but it requires serious bookkeeping.
\end{proof}

\begin{remark}\label{OpenSubstacksOfMfg}
The complementary \index{stack!open}open substack of dimension \(d\) is harder to describe. %\footnote{Alternatively, just checking that \(X_d = \Spec \Z_{(p)}[v_1, \ldots, v_{d-1}, v_d^\pm] \to \moduli{fg}\) is flat, without bothering with a moduli-theoretic interpretation, is easier.  We pull this map back along the cover \(\moduli{fgl} \to \moduli{fg}\), which gives a map of affines \[\moduli{fgl} \times_{\moduli{fgl}} (\moduli{fgl} \times \moduli{PS}^{\gpd}) \times_{\moduli{fgl}} X_d \cong (\moduli{fgl} \times \moduli{PS}^{\gpd}) \times_{\moduli{fgl}} X_d \to X_d.\]  This is then something you can verify by hand.}
From first principles, we can say only that it is the locus where the coordinate functions \(p\), \(v_1\), \ldots, \(v_d\) do not \emph{all simultaneously vanish}.  It turns out that:
\begin{enumerate}
\item On a cover, at least one of these coordinates can be taken to be invertible.\item Once one of them is invertible, a coordinate change on the formal group law can be used to make \(v_d\) (and perhaps others in the list) invertible.  Hence, we can use \(v_d^{-1} \sheaf O_{\moduli{fgl}^{\ptyp}}\) as a coordinate chart.
\item Over a further base extension and a further coordinate change, the higher coefficients \(v_{d+k}\) can be taken to be zero.  Hence, we can also use the quotient ring \(v_d^{-1} \Z_{(p)}[v_1, \ldots, v_d]\) as a coordinate chart.
\end{enumerate}
\end{remark}

\begin{remark}[{cf.\ \cite[Section 12]{StricklandFGNotes} and \cite[Remark 13.9]{LurieChromaticCourseNotes}}]
Specialize now to the case of a field \(k\) of characteristic \(p\).  Since the additive group law has vanishing \(p\)--series and is \(p\)--typical, a consequence of \Cref{PSeriesDetermines} is that \emph{every} \(p\)--typical group law with vanishing \(p\)--series is exactly equal to \(\G_a\), and in fact any formal group law with vanishing \(p\)--series \(p\)--typifies exactly to \(\G_a\).  This connects several ideas we have seen so far: the presentation of formal group laws with logarithms in \Cref{CalculationOfAutGaActionOnMO}, the presentation of the context \(\context{MOP}\) in \Cref{ContextOfMOPExample}, and the Hurewicz image of \(MU_*\) in \(\HFp_* MU\) in \Cref{HZMUCarriesALog}.
\end{remark}

\begin{remark}
It's worth pointing out how strange all of this is. In Euclidean geometry, open subspaces are always top-dimensional, and closed subspaces can drop dimension.  Here, proper open substacks of every dimension appear, and every nonempty closed substack is \(\infty\)--dimensional (albeit of positive codimension).
\end{remark}

\begin{remark}
The results of this section have several alternative forms in the literature.  For instance, \([p]_\phi(x)\) can also be expressed as \[[p]_\phi(x) = px + v_1 x^p + v_2 x^{p^2} + \cdots + v_d x^{p^d} + \cdots,\] where the sum is \emph{not} taken with respect to the group law, and this also determines a presentation of \(\sheaf O_{\moduli{fgl}^{\ptyp}}\).  These other elements \(v_d\), called \textit{Hazewinkel coordinates}, differ substantially from the Kudo--Araki coordinates favored here, although they are equally ``canonical''.  Different coordinate patches are useful for accomplishing different tasks, and the reader would be wise to remain flexible.\footnote{In particular, it is a largely open question whether there is a (partial) coordinate patch that is compatible with the results of \Cref{PowerOpnsSection}, though there are partial results along these lines~\cite{JohnsonNoel,LawsonSecondaryPowerOps,LawsonNaumann,StricklandProductsOnModules}.}\footnote{An unusual set of canonical generators is discussed in~\cite[Section V.10]{LazardCFGs}.}
\end{remark}

\begin{remark}[{\cite[Section IV.9]{LazardCFGs}, \cite[Section 17.5]{Hazewinkel}}]\label{ArtinHasseExponential}
The operation of \(p\)--typification often gives ``unusual'' results.  For instance, we will examine the standard multiplicative formal group law of \Cref{GmAndItsLogExample}, its rational logarithm, and its rational exponential:
\[
x +_{\G_m^{\mathrm{std}}} y = x + y - xy, \quad
\log_{\G_m^{\mathrm{std}}}(x) = -\log(1 - x), \quad
\exp_{\G_m^{\mathrm{std}}}(x) = 1 - \exp(-x).
\]
By \Cref{EveryLogHaspTypification}, we see that the \(p\)--typification of this rational logarithm takes the form \[\log_{\G_m^{\ptyp}}(x) = \sum_{j=0}^\infty \frac{x^{p^j}}{p^j}.\]  We can couple this to the standard exponential of the rational multiplicative group
\begin{center}
\begin{tikzcd}
\A^1 \arrow["\eps x"]{r} \arrow[bend left, "\log^{\ptyp}"]{rr} & \G_m \arrow["\log"]{r} & \G_a \arrow["\exp"]{r} \arrow[bend left,"\exp^{\mathrm{std}}"]{rr} & \G_m \arrow["x"]{r} & \A^1
\end{tikzcd}
\end{center}
to produce the \(p\)--typifying coordinate change from \Cref{EveryFGLIsPTypical}: \[1 - \exp \left( -\sum_{j=0}^\infty \frac{x^{p^j}}{p^j} \right) = 1 - E_p(-x).\]  This series \(E_p(x)\) is known as the \index{Artin Hasse exponential@Artin--Hasse exponential}\textit{Artin--Hasse exponential}, and it has the miraculous property that it is a series lying in \(\Z_{(p)}\ps{x} \subseteq \Q\ps{x}\), as it is a change of coordinate series on \(\G_m\) over \(\Spec \Z_{(p)}\).
\end{remark}






\section{The structure of \texorpdfstring{\(\moduli{fg}\)}{Mfg} III: Small scales}\label{SectionMfgSmallScales}

In the previous two Lectures, we analyzed the structure of \(\moduli{fg}\) as a whole: first we studied the cover \[\moduli{fgl} \to \moduli{fg},\] and then we turned to the stratification described by the height function \[\height\co \pi_0 \moduli{fg}(\text{\(T\) a \(\Z_{(p)}\)--algebra}) \to \N \cup \{\infty\}.\]  In this Lecture, we will concern ourselves with the small scale behaviors of \(\moduli{fg}\): its geometric points and their local neighborhoods.\footnote{For an alternative perspective on much of this material, see~\cite[Section 18]{StricklandFGNotes}, where the presentation connects rather tightly with our \Cref{SectionDieudonneModules}.}  To begin, we have all the tools in place to perform an outright classification of the geometric points.

\begin{theorem}[{\cite[Th\'eor\`eme IV]{LazardGroupesDeLie}}]\label{FGpsOverAlgClosedFields}
Let \(\bar k\) be an algebraically closed field of positive characteristic \(p\).  The height map \[\height\co \pi_0 \moduli{fg}(\bar k) \to \N_{> 0} \cup \{\infty\}\] is a bijection.
\end{theorem}
\begin{proof}
Surjectivity follows from \Cref{EveryPSeriesArises}.  Namely, the \index{formal group!Honda group!law}\textit{\(d\){\th} Honda formal group law} is the \(p\)--typical formal group law over \(k\) determined by \[[p]_{\phi_d}(x) = x^{p^d},\] and it gives a preimage for \(d\).  To show injectivity, we must show that every \(p\)--typical formal group law \(\phi\) over \(\bar k\) is isomorphic to the appropriate Honda group law.  Suppose that the \(p\)--series for \(\phi\) begins \[[p]_\phi(x) = x^{p^d} +_\phi a x^{p^{d+k}} + \cdots.\]  Then, we will construct a coordinate transformation \(g(x) = \sumphi_{j=0}^\infty b_j x^{p^j}\) satisfying
\begin{align*}
g(x^{p^d}) & \equiv [p]_\phi(g(x)) & \pmod{x^{p^{d+k} + 1}} \\
\sumphi_{j=0}^\infty b_j x^{p^{d+j}} & \equiv \left( \sumphi_{j=0}^\infty b_j x^{p^j} \right)^{p^d} +_\phi a \left( \sumphi_{j=0}^\infty b_j x^{p^j} \right)^{p^{d+k}} & \pmod{x^{p^{d+k} + 1}} \\
\sumphi_{j=0}^\infty b_j x^{p^{d+j}} & \equiv \left( \sum_{j=0}^\infty {}_{(\operatorname{Frob}^d)^* \phi} b_j^{p^d} x^{p^{d+j}} \right) + a x^{p^{d+k}} & \pmod{x^{p^{d+k} + 1}}.
\end{align*}
For \(g\) to be a coordinate transformation, we must have \(b_0 = 1\), and because \(\bar k\) is algebraically closed we can induct on \(j\) to solve for the other coefficients in the series.  The coordinate for \(\phi\) can thus be perturbed so that the term \(x^{p^{d+k}}\) does not appear in the \(p\)--series, and inducting on \(d\) gives the result.
\end{proof}

\begin{remark}[{\cite[Remark 11.2]{StricklandFGNotes}}]
We can now see see that \(\pi_0 \moduli{fg}\), sometimes called the \index{formal group!coarse moduli}\textit{coarse moduli of formal groups}, is not representable by a scheme.  From \Cref{FGpsOverAlgClosedFields}, we see that there are infinitely many points in \(\pi_0 \moduli{fg}(\F_p)\).  From \Cref{MfglIsSmooth}, we see that these lift along the surjection \(\Z \to \F_p\) to give infinitely many distinct points in \(\pi_0 \moduli{fg}(\Z)\).  On the other hand, by \Cref{RationalGeometricPointsOfMfg} there is a single \(\Q\)--point of the coarse moduli, whereas the \(\Z\)--points of a representable functor would inject into its \(\Q\)--points.  In light of \Cref{ContextOfMUPExample}, this result is no surprise to a topologist: the nonaffine nature of the moduli of formal groups is reflected by \Cref{DefnOfNilpCompletionAndASS} and \Cref{IdentifyingAdamsE2Page} in the nontrivial structure of the \(MU\)--Adams spectral sequence.
\end{remark}

We now turn to understanding the \index{formal scheme!formal neighborhood}infinitesimal neighborhoods of these geometric points.  In general, for \(s\co \Spec k \to X\) a closed \(k\)--point of a scheme, we defined in \Cref{JetSpacesDefn} and \Cref{DefnCompletion} an infinitesimal neighborhood object \(X^\wedge_s\) with a lifting property
\begin{center}
\begin{tikzcd}
\Spec k \arrow["s"]{r} \arrow{d} & X^\wedge_s \arrow{d} \\
\Spf R \arrow{r} \arrow[densely dotted]{ru} & X
\end{tikzcd}
\end{center}
for any infinitesimal thickening \(\Spf R\) of \(\Spec k\).  Thinking of \(X\) as representing a moduli problem, a typical choice for \(\Spf R\) is \(\A^1_k\), and a map \(\A^1_k \to X\) extending \(s\) is a series solution to the moduli problem which constant term \(s\).  In turn, \(X^\wedge_s\) is the smallest object through which all such maps factor, and so we think of it as classifying Taylor expansions of solutions with constant term \(s\).

For a formal group \(\Gamma\co \Spec k \to \moduli{fg}\), the definition is formally similar, but actually writing it out is made complicated by \Cref{WarningAboutStacks}.  In particular, \(p\co \Spec k \to X\) may not lift directly through \(\Spf R \to X\), but instead \(\Spec R/\m \to X\) may present \(p\) on a cover \(i\co \Spec R/\m \to \Spec k\).

\begin{definition}[{\cite[Section 2.4]{RezkFelixKlein}, cf.\ \cite[Section 6]{StricklandFiniteSubgps}}]\label{LubinTateDefn}
Define \((\moduli{fg})^\wedge_\Gamma\), the \index{Lubin Tate stack@Lubin--Tate stack}\textit{Lubin--Tate stack}, to be the groupoid-valued functor from the category of infinitesimal thickenings of \(k\)\footnote{We are being somewhat cavalier by using the word ``stack'' to refer to a groupoid-valued functor that we have \emph{not} defined on all rings, as opposed to the usage in \Cref{FHGivesComodules} and \Cref{WarningAboutStacks}.  The reader is advised to privilege the word ``stack'' with the same flexibility as the word ``sheaf'', which many authors freely take to have quite exotic source categories and which satisfy unusual and varied descent properties.} which on such a thickening \(R\) has objects
\begin{center}
\begin{tikzcd}[row sep=2.5em, column sep=4em]
& \moduli{fg} \\
\Spec k
\arrow["\Gamma", bend left]{ru}
&
\Spec R/\m
\arrow[bend left=45]{u}[name=L,label=left:\(i^* \Gamma\)]{}
\arrow[bend right=45]{u}[name=R,label=right:\(\pi^* \G\)]{}
\arrow[shorten <=6pt, Rightarrow, to path={(L) -- node[label=above:\(\alpha\)] {} (R)}]{}
\arrow["i"']{l}
\arrow["\pi"]{r}
&
\Spf R
\arrow["\G"', bend right]{lu}
,
\end{tikzcd}
\end{center}
where \(i\) is an inclusion of \(k\) into the residue field \(R/\m\) and \(\alpha\co i^* \Gamma \to \pi^* \G\) is an isomorphism of formal groups.  The morphisms in the groupoid are maps \(f\co \G \to \G'\) of formal groups over \(\Spf R\) covering the identity on \(i^* \Gamma\), called \index{formal group!star iso@\(\star\)--isomorphism}\textit{\(\star\)--isomorphisms}.
\end{definition}

\begin{remark}[{cf.\ \cite[Section 4.1]{RezkNotesOnHMThm}}]\label{LubinTateStackInFGLTerms}
Because the ground field \(k\) is a local ring, the formal group \(\Gamma\co \Spec k \to \moduli{fg}\) at the special fiber always has trivializable Lie algebra, hence \Cref{CoordinatizbleFGs} shows that it always admits a presentation by a formal group law.  In fact, any deformation \(\G\co \Spf R \to \moduli{fg}\) of \(\Gamma\) also has a trivializable Lie algebra, since projective modules (such as \(T_0 \G\)) over local rings like \(R\) are automatically free (i.e., trivializable).  It follows that the groupoid \((\moduli{fg})^\wedge_\Gamma(R)\) admits a presentation in terms of formal group \emph{laws}.  Starting with the pullback square of groupoids
\begin{center}
\begin{tikzcd}[row sep=1.5em]
(\moduli{fg})^\wedge_\Gamma(R) \arrow{d} \arrow{rr} \arrow[drr, phantom, "\lrcorner", very near start] & & \moduli{fg}(R) \arrow{d} \\
\displaystyle\coprod_{i\co \Spec R/\m \to \Spec k} \{\Gamma\} \arrow{r} & \displaystyle\coprod_{i\co \Spec R/\m \to \Spec k} \moduli{fg}(k) \arrow{r} & \moduli{fg}(R/\m)
\end{tikzcd}
\end{center}
and selecting formal group laws everywhere, the objects of the groupoid \((\moduli{fg})^\wedge_\Gamma(R)\) are given by diagrams
\begin{center}
\begin{tikzcd}[column sep=1em]
{(\A^1_k, +_\Gamma)} \arrow{d} & {(\A^1_{R/\m}, +_{i^* \Gamma})} \arrow{rd} \arrow[ld, phantom, "\llcorner", very near start] \arrow[equal]{rr} \arrow{l} & & {(\A^1_{R/\m}, +_{\pi^* \G})} \arrow{ld} \arrow{r} \arrow[dr, phantom, "\lrcorner", very near start] & {(\A^1_R, +_{\G})} \arrow{d} \\
\Spec k & & \Spec R/\m \arrow["i"']{ll} \arrow["\pi"]{rr} & & \Spf R,
\end{tikzcd}
\end{center}
where we have required an \emph{equality} of formal group laws over the common pullback.  A morphism in this groupoid is a formal group law isomorphism \(f\) over \(\Spf R\) which reduces to the identity over \(\Spec R/\m\).
\end{remark}

The main result about \((\moduli{fg})^\wedge_\Gamma\) is due to Lubin and Tate:
\begin{theorem}[{Lubin--Tate theorem, \cite[Theorem 3.1]{LubinTate}}]\label{LubinTateModuliThm}
Suppose that \(\height \Gamma < \infty\) for \(\Gamma\) a formal group over \(k\) a perfect field of positive characteristic \(p\).  The functor \((\moduli{fg})^\wedge_\Gamma\) is valued in essentially discrete groupoids, and it is naturally equivalent to a smooth formal scheme over \(\W_p(k)\) of dimension \((\height(\Gamma) - 1)\).
\end{theorem}

\begin{remark}[{\cite[Theorem 4.35]{ZinkCartierTheory}}]\label{UnivPropertyOfWittRing}
The presence of the \index{Witt vectors}\textit{\(p\)--local Witt ring} \(\W_p(k)\) is explained by its universal property: for \(k\) as above and \(R\) an infinitesimal thickening of \(k\), \(\W_p(k)\) has the lifting property\footnote{Rings with such lifting properties are generally called \index{Cohen ring}\textit{Cohen rings}.  In the case that \(k\) is a perfect field of positive characteristic \(p\), the Witt ring \(\W_p(k)\) happens to model a Cohen ring for \(k\).}
\begin{center}
\begin{tikzcd}
\W_p(k) \arrow{d} \arrow[densely dotted, "\exists!"]{r} & R \arrow{d} \\
k \arrow["i"]{r} & R/\m
\end{tikzcd}
\end{center}
For the finite perfect fields \(k = \F_{p^d} = \F_p(\zeta_{p^d-1})\), the Witt ring can be computed to be \(\W_p(\F_{p^d}) = \Z_p(\zeta_{p^d-1})\).
\end{remark}

\begin{remark}\label{LubinTateModuliThmInFGLTerms}
In light of \Cref{LubinTateStackInFGLTerms}, we can also state \Cref{LubinTateModuliThm} in terms of formal group laws and their \(\star\)--isomorphisms.  For a group law \(+_\Gamma\) over a perfect field \(k\) of positive characteristic, it claims that there exists a ring \(X\), noncanonically isomorphic to \(\W_p(k)\ps{u_1, \ldots, u_{d-1}}\), as well as a certain group law \(+_{\widetilde \Gamma}\) on this ring.  The group law \(+_{\widetilde \Gamma}\) has the following property: if \(+_\G\) is a formal group law on an infinitesimal thickening \(\Spf R\) of \(\Spec k\) which reduces along \(\pi\co \Spec R/\m \to \Spf R\) to \(+_\Gamma\), then there is a unique ring map \(f\co X \to R\) such that \(f^* (+_{\widetilde \Gamma})\) is \(\star\)--isomorphic to \(\pi^* (+_{\G})\), and this \(\star\)--isomorphism is unique.
\end{remark}

We will spend the rest of this Lecture working towards a proof of \Cref{LubinTateModuliThm}.  We first consider a very particular sort of infinitesimal thickening: the square-zero extension \(R = k[\eps] / \eps^2\) with pointing \(\eps = 0\).  We are interested in two kinds of data over \(R\): formal group laws \(+_\Delta\) over \(R\) reducing to \(+_\Gamma\) at the pointing, and formal group law automorphisms \(\phi\) of \(+_\Gamma\) which reduce to the identity automorphism at the pointing.
\begin{lemma}
Define
\begin{align*}
\Gamma_1 & = \frac{\partial(x +_\Gamma y)}{\partial x}, &
\Gamma_2 & = \frac{\partial(x +_\Gamma y)}{\partial y}.
\end{align*}
Such automorphisms \(\phi\) are determined by series \(\psi\) satisfying \[0 = \Gamma_1(x, y) \psi(x) - \psi(x +_\Gamma y) + \psi(y) \Gamma_2(x, y).\]  Such formal group laws \(+_\Delta\) are determined by bivariate series \(\delta(x, y)\) satisfying \[0 = \Gamma_1(x +_\Gamma y, z) \delta(x, y) - \delta(x, y +_\Gamma z) + \delta(x +_\Gamma y, z) - \delta(y, z) \Gamma_2(x, y +_\Gamma z).\]
\end{lemma}
\begin{proof}
Such an automorphism \(\phi\) admits a series expansion
\begin{align*}
\phi(x) & = x + \eps \cdot \psi(x). \\
\intertext{Then, we take the homomorphism property}
\phi(x +_\Gamma y) & = \phi(x) +_\Gamma \phi(y) \\
(x +_\Gamma y) + \eps \cdot \psi(x +_\Gamma y) & = (x + \eps \cdot \psi(x)) +_\Gamma (y + \eps \cdot \psi(y)) \\
\intertext{and apply \(\left. \frac{\partial}{\partial\eps} \right|_{\eps = 0}\) to get}
\psi(x +_\Gamma y) & = \Gamma_1(x, y) \cdot \psi(x) + \Gamma_2(x, y) \cdot \psi(y).
\end{align*}
Similarly, such a formal group law \(+_\Delta\) admits a series expansion \[x +_\Delta y = (x +_\Gamma y) + \eps \cdot \delta(x, y).\]  Beginning with the associativity property \[(x +_\Delta y) +_\Delta z = x +_\Delta (y +_\Delta z),\] we compute \(\left. \frac{\partial}{\partial \eps} \right|_{\eps = 0}\) applied to both sides:
\begin{align*}
& \left. \frac{\partial}{\partial \eps} \right|_{\eps = 0} \left((x +_\Delta y) +_\Delta z \right) \\
& \quad = \!\!\left. \frac{\partial}{\partial \eps} \right|_{\eps = 0} \left((((x +_\Gamma y) + \eps \cdot \delta(x, y)) +_\Gamma z) + \eps \cdot \delta(x +_\Gamma y, z)\right) \\
& \quad = \Gamma_1(x +_\Gamma y,z) \cdot \delta(x, y) + \delta(x +_\Gamma y, z), \\
\intertext{and similarly}
& \left. \frac{\partial}{\partial \eps} \right|_{\eps = 0} \left( x +_\Delta (y +_\Delta z) \right) \\
& \quad = \!\!\left. \frac{\partial}{\partial \eps} \right|_{\eps = 0} \left( (x +_\Gamma ((y +_\Gamma z) + \eps \cdot \delta(y, z))) + \eps \cdot \delta(x, y +_\Gamma z) \right) \\
& \quad = \Gamma_2(x, y +_\Gamma z) \cdot \delta(y, z) + \delta(x, y +_\Gamma z).
\end{align*}
Equating these gives the condition in the Lemma statement.
\end{proof}

The key observation is that these two conditions appear as cocycle conditions for the first two levels of a natural cochain complex.
\begin{definition}[{\cite[Section 3]{LazarevDeformations}}]\label{DeformationComplex}
The \index{deformation complex}deformation complex\footnote{Pieces are of this complex are visible in work of Drinfel'd~\cite[Section 4.A]{Drinfeld} and of Lubin--Tate~\cite{LubinTate}, but neither actually assemble the whole complex.} \(\widehat C^*(+_\Gamma; k)\) is defined by \[k \to k\ps{x_1} \to k\ps{x_1, x_2} \to k\ps{x_1, x_2, x_3} \to \cdots\] with differential
\begin{align*}
(df)(x_1, \ldots, x_{n+1}) & = \Gamma_1\left(\sumGamma_{i=1}^n x_i, x_{n+1} \right) \cdot f(x_1, \ldots, x_n) \\
& \quad + \sum_{i=1}^n (-1)^i \cdot f(x_1, \ldots, x_i +_\Gamma x_{i+1}, \ldots, x_{n+1}) \\
& \quad + (-1)^{n+1} \cdot \Gamma_2\left(x_1, \sumGamma_{i=2}^{n+1} x_i \right) \cdot f(x_2, \ldots, x_{n+1}),
\end{align*}
where we have again written
\begin{align*}
\Gamma_1(x, y) & = \frac{\partial(x +_\Gamma y)}{\partial x}, &
\Gamma_2(x, y) & = \frac{\partial(x +_\Gamma y)}{\partial y}.
\end{align*}
\end{definition}

The complex even knits the information together intelligently:

\begin{corollary}[{\cite[p.\ 1320]{LazarevDeformations}}]\label{InterpretLTCoboundaries}
Two extensions \(+_\Delta\) and \(+_{\Delta'}\) of \(+_\Gamma\) to \(k[\eps] / \eps^2\) are isomorphic if their corresponding \(2\)--cocycles in \(\widehat{Z}^2(+_\Gamma; k)\) differ by an element in \(\widehat B^2(+_\Gamma; k)\). \qed
\end{corollary}

Remarkably, we have already encountered this complex before:

\begin{lemma}[{\cite[p.\ 1320]{LazarevDeformations}}]\label{LazarevComparisonOfCplxes}
Write \(\G\) for the formal group associated to the group law \(+_\Gamma\).  The cochain complex \(\widehat C^*(+_\Gamma; k)\) is quasi-isomorphic to the \index{formal group!cohomology}cohomology cochain complex considered in the proof of \Cref{Symmetric2CocycleLemma}:
\begin{align*}
\widehat C^*(+_\Gamma; k) & \to \InternalHom{FormalSchemes}(B\G, \G_a)(k) \\
f & \mapsto \Gamma_1\left(0, \sumGamma_{i=1}^n x_i \right)^{-1} \cdot f(x_1, \ldots, x_n). \pushQED{\qed}\qedhere\popQED
\end{align*}
\end{lemma}

Two Lectures ago while proving \Cref{Symmetric2CocycleLemma}, we computed the cohomology of this complex in the specific case of \(\G = \G_a\).  This is the one case where Lubin and Tate's theorem does \emph{not} apply, since it requires \(\height \G < \infty\).  Nonetheless, by filtering the multiplication on \(\G\) by degree, we can use this specific calculation to get up to the one we now seek.

\begin{lemma}\label{CalculationOfLTTangentSpace}
Let \(\G\) be a formal group of finite height \(d\) over a field \(k\).  Then \(H^1(\G; \G_a) = 0\) and \(H^2(\G; \G_a)\) is a free \(k\)--vector space of dimension \(d\).\index{formal group!cohomology}
\end{lemma}
\begin{proof}[Proof (after Hopkins)]
We select a \(p\)--typical coordinate on \(\G\) of the form \[x +_\phi y = x + y + \mathrm{unit} \cdot c_{p^d}(x, y) + \cdots,\] where \(c_{p^d}(x, y)\) is as in one of Lazard's symmetric \(2\)--cocycles, as in \Cref{Symmetric2CocycleLemma}.  Filtering \(\G\) by degree, the multiplication projects to \(x +_\phi y = x + y\) in the associated graded, and the resulting \index{tangent spectral sequence}filtration spectral sequence has signature \[[H^*(\G_a; \G_a)]_* \Rightarrow H^*(\G; \G_a),\] where the second grading comes from the degree of the homogeneous polynomial representatives of classes in \(H^*(\G_a; \G_a)\).

Because \Cref{Symmetric2CocycleLemma} gives different calculations of \(H^*(\G_a; \G_a)\) for \(p = 2\) and \(p > 2\), we specialize to \(p > 2\) for the remainder of the proof and leave the similar \(p = 2\) case to the reader.  For \(p > 2\), \Cref{Symmetric2CocycleLemma} gives \[[H^*(\G_a; \G_a)]_* = \left[\frac{k[\alpha_j \mid j \ge 0]}{\alpha_j^2 = 0} \otimes k[\beta_j \mid j \ge 0]\right]_*,\] where \(\alpha_j\) is represented by \(x^{p^j}\) and \(\beta_j\) is represented by \(c_{p^j}(x, y)\).  To compute the differentials in this spectral sequence, one computes by hand the formula for the differential in the bar complex, working up to lowest nonzero degree.  For instance, to compute \(d(\alpha_j)\) we examine the series \[(x +_\phi y)^{p^j} - (x^{p^j} + y^{p^j}) = (\text{unit}) \cdot c_{p^{d + j}}(x, y) + \cdots,\] where we used \(c_{p^d}^{p^j} = c_{p^{j+d}}\), giving \(d(\alpha_j) = \beta_{j+d}\).  So, we see that nothing in the \(1\)--column of the spectral sequence is a permanent cocycle and that there are \(d\) classes at the bottom of the \(2\)--column of the spectral sequence which are not coboundaries.  To conclude the Lemma statement, we need only to check that they are indeed permanent cocycles.  To do this, we note that they are realized as deformations, by noting \[x +_{\mathrm{univ}} y \cong x + y + v_j c_{p^j}(x, y) \pmod{v_1, \ldots, v_{j-1}, (x, y)^{p^j+1}}\] where \(+_{\mathrm{univ}}\) is the Kudo--Araki universal \(p\)--typical law (cf.\ \cite[Proposition 1.1]{LubinTate}).
\end{proof}

\begin{proof}[{Proof of \Cref{LubinTateModuliThm} using \Cref{LubinTateModuliThmInFGLTerms}}]
We will prove this inductively on the order of the infinitesimal neighborhood of \(\Spec k = \Spec R / \m\) in \(\Spf R\):\footnote{The reader may also be interested in a proof presented in more stacky language~\cite[Reduction to Theorem 21.5]{LurieChromaticCourseNotes}.} \[\Spec R / \m \xrightarrow{j_r} \Spec R/\m^r \xrightarrow{i_r} \Spf R.\]  Suppose that we have demonstrated the Theorem for \(+_{\G_{r-1}} = i_{r-1}^* (+_{\G})\), so that there is a map \(\alpha_{r-1}\co \W_p(k)\ps{u_1, \ldots, u_{d-1}} \to R/\m^{r-1}\) and a strict isomorphism \(g_{r-1}\co +_{\G_{r-1}} \to \alpha_{r-1}^* +_{\tilde \Gamma}\) of formal group laws.  The exact sequence \[0 \to \m^{r-1} / \m^r \to R/\m^r \to R/\m^{r-1} \to 0\] exhibits \(R/\m^r\) as a square--zero extension of \(R/\m^{r-1}\) by \(M = \m^{r-1} / \m^r\).  Then, let \(\beta\) be \emph{any} lift of \(\alpha_{r-1}\) and \(h\) be \emph{any} lift of \(g_{r-1}\) to \(R/I^r\), and let \(A\) and \(B\) be the induced group laws
\begin{align*}
x +_A y & = \beta^* \tilde \phi, &
x +_B y & = h\left( h^{-1}(x) +_{\G_r} h^{-1}(y) \right).
\end{align*}
Since these both deform the group law \(+_{\G_{r-1}}\), we know by \Cref{InterpretLTCoboundaries} and \Cref{CalculationOfLTTangentSpace} there exist \(m_j \in M\) and \(f(x) \in M\ps{x}\) satisfying \[(x +_B y) - (x +_A y) = (df)(x, y) + \sum_{j=1}^{d-1} m_j c_{p^j}(x, y),\] where \(c_{p^j}(x, y)\) is the \(2\)--cocycle associated to the cohomology \(2\)--class \(\beta_j\).  The following definitions complete the induction:
\begin{align*}
g_r(x) & = h(x) - f(x), &
\alpha_r(u_j) & = \beta(u_j) + m_j. \qedhere
\end{align*}
\end{proof}

\begin{remark}\label{ActionBySnLiftsToLTn}
Our calculation \(H^1(\G_\phi; \G_a) = 0\) shows that the automorphisms \(\alpha\co \Gamma \to \Gamma\) of the special fiber induce \index{Lubin Tate stack@Lubin--Tate stack!automorphisms}automorphisms of the entire Lubin--Tate stack by universality.  Namely, for \(\Gamma \to \widetilde \Gamma\) the universal deformation, the precomposite \[\Gamma \xrightarrow{\alpha} \Gamma \to \widetilde \Gamma\] presents \(\widetilde \Gamma\) as a deformation of \(\Gamma\) in a different way, hence induces a map \[\widetilde \alpha\co \widetilde \Gamma \to \widetilde \Gamma,\] which by \Cref{LubinTateModuliThm} is in turn induced by a map \[\widetilde \alpha\co (\moduli{fg})^\wedge_\Gamma \to (\moduli{fg})^\wedge_\Gamma.\]  The action is \emph{highly} nontrivial in all but the most degenerate cases, and its study is of serious interest to homotopy theorists (cf.\ \Cref{ChromaticLocalizationSection}) and to arithmetic geometers (cf.\ \Cref{ThePeriodMapSection}).
\end{remark}

\begin{remark}
We also see that our analysis of infinitesimal behavior fails wildly for the case \(\Gamma = \G_a\).  The differential calculation in \Cref{CalculationOfLTTangentSpace} is meant to give us an upper bound on the dimensions of \(H^1(\Gamma; \G_a)\) and \(H^2(\Gamma; \G_a)\), but this family of differentials is zero in the additive case.  Accordingly, both of these vector spaces are infinite dimensional, completely prohibiting us from making any further assessment.
\end{remark}

Having accomplished all our major goals, we close our algebraic analysis of \(\moduli{fg}\) with \Cref{MfgPicture}, a diagram summarizing our results.

\afterrectopage{
\begin{sidewaysfigure}
\centering
\input{drawing_alg.eps_tex}
\caption{Portrait of \(\moduli{fg} \times \Spec \Z_{(p)}\).}\label{MfgPicture}
\end{sidewaysfigure}
\begin{sidewaysfigure}
\centering
\input{drawing_top.eps_tex}
\caption{Topological realizations of various pieces of \(\moduli{fg} \times \Spec \Z_{(p)}\).}
\end{sidewaysfigure}
}









\section{Nilpotence and periodicity in finite spectra}\label{NilpotenceAndPeriodicity}

With our analysis of \(\moduli{fg}\) complete, our first goal in this Lecture is to finish the program sketched in the introduction to this Case Study by manufacturing those interesting homology theories connected to the functor \(\context{MU}(-)\).  We begin by rephrasing our main tool, \Cref{LandwebersStackyTheorem}, in terms of algebraic conditions.
\begin{theorem}[{Landweber Exact Functor Theorem, \cite[Corollary 2.7]{LandweberHomologicalComodules} and \cite[Theorem 21.4 and Proposition 21.5]{HopkinsCOCTALOS}}]
Let \(\sheaf F\) be a \index{sheaf!quasicoherent}quasicoherent sheaf over \(\moduli{fg} \times \Spec \Z_{(p)}\), thought of as a \index{comodule}comodule \(M\) for the Kudo--Araki Hopf algebroid (cf.\ \Cref{KudoArakiIsomorphism}) \[(A, \Gamma) = (\sheaf O_{\moduli{fgl}^{\ptyp}}, \sheaf O_{\moduli{fgl}^{\ptyp}}[t_1, t_2, \ldots]).\]  If \((p, v_1, \ldots, v_d, \ldots)\) forms an infinite regular sequence on \(M\), then \[X \mapsto M \otimes_{\sheaf O_{\moduli{fgl}^{\ptyp}}} MUP_0(X)\] determines a homology theory on \emph{finite} spectra \(X\).  Moreover, if \(M/I_d = 0\) for some \(d \gg 0\), then the same formula determines a homology theory on \emph{all} spectra \(X\).
\label{LEFTRealTheoremWithProof}
\end{theorem}
\begin{proof}
Following the discussion in the introduction, we note that a cofiber sequence \[X' \to X \to X''\] of spectra gives rise to an exact sequence
\begin{center}
\begin{tikzcd}
\cdots \arrow{r} & \context{MUP}(X') \arrow{r} & \context{MUP}(X) \arrow{r} & \context{MUP}(X'') \arrow{r} & \cdots \\
\cdots \arrow{r} & \sheaf N' \arrow[equal]{u} \arrow{r} & \sheaf N \arrow[equal]{u} \arrow{r} & \sheaf N'' \arrow[equal]{u} \arrow{r} & \cdots.
\end{tikzcd}
\end{center}
We thus see that we are essentially tasked with showing that \(\sheaf F\) is \index{sheaf!flat}flat, so that tensoring with \(\sheaf F\) does not disturb the exactness of this sequence.  In that case, we can then apply Brown representability to the composite functor \(\sheaf F \otimes \context{MUP}(X)\).

Flatness of \(\sheaf F\) is equivalent to \(\Tor_1(\sheaf F, \sheaf N) = 0\) for an arbitrary auxiliary quasicoherent sheaf \(\sheaf N\) (soon to be thought of as \(\context{MUP}(X)\)).  By our regularity hypothesis, there is an exact sequence of sheaves \[0 \to \sheaf F \xrightarrow{p} \sheaf F \to \sheaf F / (p) \to 0,\] so applying \(\Tor_*(-, \sheaf N)\) gives an exact sequence \[\Tor_2(\sheaf F / (p), \sheaf N) \xrightarrow{} \Tor_1(\sheaf F, \sheaf N) \xrightarrow{p} \Tor_1(\sheaf F, \sheaf N)\] of \(\Tor\) groups.  The sequence gives the following sufficiency condition: 
\begin{align*}
[\Tor_1(p^{-1} \sheaf F, \sheaf N) &= 0, & \Tor_2(\sheaf F/(p), \sheaf N) & = 0] & \Rightarrow \quad\quad\!\!\! \Tor_1(\sheaf F, \sheaf N) & = 0. \\
\intertext{Similarly, the \(v_1\)--multiplication sequence gives another sufficiency condition:}
[\Tor_2(v_1^{-1} \sheaf F/(p), \sheaf N) & = 0, & \Tor_3(\sheaf F/I_2, \sheaf N) & = 0] & \Rightarrow \Tor_2(\sheaf F/(p), \sheaf N) & = 0.
\end{align*}
 Continuing in this fashion, for some \(D \gg 0\) we would like to show
\begin{align*}
\Tor_{d+1}(v_d^{-1} \sheaf F/I_d, \sheaf N) & = 0, \tag{for each \(d < D\)} \\
\Tor_{D+1}(\sheaf F/I_{D+1}, \sheaf N) & = 0.
\end{align*}
The second condition is satisfied one of two ways, corresponding to our two auxiliary hypotheses and two conclusions in the Theorem statement:
\begin{itemize}
\item If \(\sheaf F\) itself satisfies \(\sheaf F / I_{D+1} = 0\), we are done.
\item Writing \(j_{D+1}\co \moduli{fg}^{\ge D+1} \to \moduli{fg}\) for the inclusion of the prime closed substack, we can identify \(\sheaf N / I_{D+1}\) with \(j_{D+1}{}_* j_{D+1}^* \sheaf N\).  If \(\sheaf N\) is coherent (for instance, in the case that \(\sheaf N = \context{MU}(X)\) for a \emph{finite} complex \(X\)), then \(j_{D+1}^* \sheaf N\) is free for large \(D\) and hence has vanishing \(\Tor\) groups.
\end{itemize}

We then turn to the first collection of conditions.  They are \emph{always} satisfied, but this requires an argument.  We write \(i_d\co \moduli{fg}^{= d} \to \moduli{fg}\) for the inclusion of the substack of formal groups of height exactly \(d\), which (following \Cref{OpenSubstacksOfMfg}) has a presentation by the Hopf algebroid \[(v_d^{-1} A / I_d, \Gamma \otimes v_d^{-1} A / I_d).\]  We are trying to study the derived functors of \[\sheaf N \mapsto (i_d{}_* i_d^* \sheaf F) \otimes \sheaf N \cong i_d{}_* (i_d^* \sheaf F \otimes i_d^* \sheaf N).\]  Since \(i_d{}_*\) is exact, we are moved to study the composite functor spectral sequence for \[\CatOf{QCoh}_{\moduli{fg}} \xrightarrow{i_d^*} \CatOf{QCoh}_{\moduli{fg}^{=d}} \xrightarrow{i_d^* \sheaf F \otimes -} \CatOf{QCoh}_{\moduli{fg}^{=d}}.\]  The second functor is actually exact: the geometric map \[\Gamma_d\co \Spec k \to \moduli{fg}^{=d}\] is a faithfully flat cover, and \(k\)--modules have no nontrivial \(\Tor\).  Meanwhile, the first functor has at most \(d\) derived functors: \(i_d^*\) is modeled by tensoring with \(v_d^{-1} A / I_d\), but \(A / I_d\) admits a Koszul resolution with \(d\) stages and \(A / I_d \to v_d^{-1} A / I_d\) is exact.  As \(\Tor_{d+1}\) is beyond the length of this resolution, it is always zero.
\end{proof}

\begin{remark}
This construction always gives an \(MUP\)--module spectrum in the homotopy category.  If \(\sheaf F\) comes from the pushforward of the ring of functions along a flat map \(\Spec R \to \moduli{fg}\), then the resulting spectrum is a ring spectrum, and flat sheaves on it become module spectra over this ring spectrum.
\end{remark}

\begin{remark}[{\cite[Equation 20.1]{HopkinsCOCTALOS}}]\label{PullingBackOverMfgVsMfgl}
If \(f\co \Spec R \to \moduli{fg}\), then in the pullback
\begin{center}
\begin{tikzcd}
P \arrow{d} \arrow["f'"]{r} \arrow[dr, phantom, "\lrcorner", very near start] & \moduli{fgl} \arrow{d} \\
\Spec R \arrow["f"]{r} & \moduli{fg}
\end{tikzcd}
\end{center}
the sheaf \({f'}^* \context{MU}(X)\) gives a model for \((MU \sm R)_0(X)\) \emph{without first defining \(R_0\)}.  We can use this to define \(R_0(X)\) by suitably equalizing the maps \(s, t\co (\moduli{fgl} \times \moduli{ps}^{\gpd}) \to \moduli{fgl}\), but forming this equalizer may not be exact.  By selecting a lift \(\widetilde f\co \Spec R \to \moduli{fgl}\), this equalizer becomes \emph{forked} (i.e., we gain an extra degeneracy in the simplicial object), and the equalizer is thus guaranteed to be exact.  
\end{remark}

\begin{definition}\label{DefnChromaticHomologyThys}
Coupling \Cref{LEFTRealTheoremWithProof} to our understanding of \(\moduli{fg}\), we produce many interesting homology theories, collectively referred to as \textit{chromatic\footnote{The elements of \Cref{ANSS2Figure} and \Cref{ANSS3Figure} are related to each other by ``\(v_d\)--multiplication'' (cf.\ \Cref{GreekLetterElements}), and families of such elements can be selected for by inverting \(v_d\), i.e., by passing to the open substack \(\moduli{fg}^{\le d}\).  The word ``chromatic'' here thus refers to an analogy: this localization selects certain periodic families of elements, like a bandpass filter selects certain frequencies out of a complicated radio signal.} homology theories}:
\begin{itemize}
\item Recall that the moduli of \(p\)--typical group laws is affine, presented in \Cref{KudoArakiIsomorphism} by \[\sheaf O_{\moduli{fgl}^{\ptyp}} \cong \Z_{(p)}[v_1, v_2, \ldots, v_d, \ldots].\]  Since the inclusion of \(p\)--typical group laws into all group laws induces an equivalence of stacks, it is in particular flat, and hence this formula determines a homology theory on finite spectra, called \index{Brown Peterson homology@Brown--Peterson homology}\textit{Brown--Peterson homology}: \[BPP_0(X) := MUP_0(X) \otimes_{MUP_0} BPP_0.\]
\item A chart for the open substack \(\moduli{fg}^{\le d}\) in terms of \(\moduli{fgl}^{\ptyp}\) was given in \Cref{OpenSubstacksOfMfg} by \(\Spec \Z_{(p)}[v_1, v_2, \ldots, v_d^\pm]\).  Since open maps are in particular flat, it follows that there is a homology theory \(E(d)P\), called \index{Johnson--Wilson homology}\textit{the \(d\){\th} Johnson--Wilson homology}, defined on all spectra by \[E(d)P_0(X) := MUP_0(X) \otimes_{MUP_0} \Z_{(p)}[v_1, v_2, \ldots, v_d^\pm].\]
\item Similarly, for a formal group \(\Gamma\) of height \(d < \infty\) over a field \(k\), we produced in \Cref{LubinTateModuliThm} a chart \(\Spf \W_p(k)\ps{u_1, \ldots, u_{d-1}}\) for its deformation neighborhood.  Since inclusions of deformation neighborhoods of substacks of Noetherian stacks are flat~\cite{Matsumura}, there is a corresponding homology theory \(E_\Gamma{}\), called \index{Morava E theory@Morava \(E\)--theory}\textit{the (discontinuous) Morava \(E\)--theory for \(\Gamma\)}, determined by \[E_\Gamma{}_0(X) := MUP_0(X) \otimes_{MUP_0} \W_p(k)\ps{u_1, \ldots, u_{d-1}}[u^\pm].\]  In the case that \(\Gamma = \Gamma_d\) is the Honda formal group of height \(d\), the notation is often abbreviated from \(E_{\Gamma_d}\) to merely \(E_d\).
\item Since \(\mathfrak m = (p, u_1, \ldots, u_{d-1})\) is a regular ideal in \(E_\Gamma{}_*\), we can model the reduction to the special fiber using the succession of cofiber sequences
\begin{align*}
E_\Gamma \xrightarrow{p} E_\Gamma & \to E_\Gamma / (p), \\
E_\Gamma / (p) \xrightarrow{u_1} E_\Gamma / (p) & \to E_\Gamma / (p, u_1), \\
& \vdots \\
E_\Gamma / I_{d-1} \xrightarrow{u_{d-1}} E_\Gamma / I_{d-1} & \to E_\Gamma / I_d.
\end{align*}
This determines a spectrum \(K_\Gamma = E_\Gamma / I_d\), and hence determines a homology theory called \index{Morava K theory@Morava \(K\)--theory}\textit{the Morava \(K\)--theory for \(\Gamma\)}, with coefficient ring $K_\Gamma{}_* = k[u^\pm]$.  In the case where \(\Gamma\) comes from the Honda \(p\)--typical formal group law (of height \(d\)), this spectrum is often written as \(K(d)\).  As an edge case, we also set \(K(0) = H\Q\) and \(K(\infty) = \HFp\).\footnote{By \Cref{FGpsOverAlgClosedFields} and \Cref{FieldSpectraAreKTheories} to follow, it often suffices to consider just these spectra \(K(d)\) to make statements about all \(K_\Gamma\).  With more care, it even often suffices to consider \(d \ne \infty\).}
\item More delicately, there is a version of Morava \(E\)--theory which takes into account the formal topology on \((\moduli{fg})^\wedge_\Gamma\), called \index{}\textit{continuous Morava \(E\)--theory}.  It is defined by the pro-system \(\{E_\Gamma(X) / u^I\}\), where \(I\) ranges over multi-indices and the quotient is again given by cofiber sequences.
\item There is also a homology theory associated to the closed substack \(\moduli{fg}^{\ge d}\).  Since \(I_d = (p, v_1, \ldots, v_{d-1})\) is generated by a regular sequence on \(BPP_0\), we can directly define the spectrum \(P(d)P\) by a regular quotient: \[P(d)P = BP / (p, v_1, \ldots, v_{d-1}).\]  This spectrum does have the property \(P(d)P_0 = BPP_0 / I_d\) on coefficient rings, but \(P(d)P_0(X) = BPP_0(X) / I_d\) \emph{only} when \(I_d\) forms a regular sequence on \(BPP_0(X)\)---which is reasonably rare among the cases of interest.
\end{itemize}
\end{definition}

\begin{remark}
The trailing ``\(P\)'' in these names is to disambiguate them from similar less-periodic objects in the literature.  Namely, \(BP\) is often taken to be a minimal wedge summand of \(MU_{(p)}\), whereas \(E(d)\), \(E_\Gamma\), and \(K(d)\) can all be taken to be \(2(p^d-1)\)--periodic (for heights \(0 < d < \infty\)).  The one exception to this minimality convention is \(E_\Gamma\), which is \emph{usually} taken to be \(2\)--periodic already, so we do not attach a ``\(P\)'' to its name.
\end{remark}

\begin{example}[{cf.\ \Cref{CPinftyKUExample}}]\label{ExampleOfMoravasTheoriesAtGm}
In the case \(\Gamma = \G_m\) over \(k = \F_p\), the resulting spectra are connected to complex \(K\)--theory:
\begin{align*}
E_{\G_m} & \cong KU^\wedge_p, &
K_{\G_m} & \cong KU / p, &
E(1)P & \cong KU_{(p)}.
\end{align*}
\end{example}

\begin{remark}[{\cite[Section 5.2]{KLW}, \cite[Corollaries 2.14 and 2.16]{RavenelLocalizationWRTPeriodic}, \cite[Theorem 2.13]{StricklandProductsOnModules}}]\label{MoravaKIsNotCommutative}
In general, the quotient of a ring spectrum by a homotopy element does not give another ring spectrum.  The most typical example of this phenomenon is that \(\S/2\) is not a ring spectrum, since its homotopy is not \(2\)--torsion.  Most of our constructions above do not suffer from this deficiency, with one exception: Morava \(K\)--theories at \(p = 2\) are not commutative.  Instead, there is a \index{Milnor primitive}\index{Bockstein}derivation \(Q_d: K(d) \to \Susp K(d)\) which tracks the commutativity by the relation \[ab - ba = u Q_d(a) Q_d(b).\]  In particular, we find that \(K(d)^* X\) is a commutative ring whenever \(K(d)^1 X = 0\), which is often the case.
\end{remark}

\begin{remark}[{\cite[Section 3]{HopkinsFromSpectraToStacks}}]\label{RemovingStackinessFromSpectra}
Before turning to the other half of this Lecture, we feel obligated to include one out-of-place remark that the first-time reader is advised to skip.  The pullback idea expressed in \Cref{PullingBackOverMfgVsMfgl} intermingles interestingly with the detection result expressed in \Cref{StackinessMeasuresNonorientability}: there is a certain program, which is beyond the scope of this Lecture, which realizes spectra associated to certain nontrivial \emph{stacks} equipped with maps to the moduli of formal groups.  For instance, the non-complex-orientable spectrum \(KO\) is attached to a map \[\Spec \Z \mmod C_2 \to \moduli{fg}\] which selects \(\G_m\) with its complex-conjugation action.  There is a sequence of non-complex-orientable ring spectra \index{Xn@\(X(n)\)}\(X(n) = T(\Loops \SU(n))\) which limit to \(X(\infty) = MU\) and which carry ``partial complex-orientations'' that give a Thom isomorphism for \(\CP^{n-1}\), i.e., they come equipped with a specified formal group law modulo terms of degree \(n\).  We write \(\moduli{fg}^{(n)}\) for the moduli of formal groups where the isomorphisms are required to act trivially on space of \index{formal scheme!formal neighborhood}\(n\)--jets (so that, e.g., \Cref{StrictIsosRemark} concerns \(\moduli{fg}^{(1)}\)).  The pullback of stacks
\begin{center}
\begin{tikzcd}
P \arrow{r} \arrow{d} \arrow[dr, phantom, "\lrcorner", very near start] & \moduli{fg}^{(2)} \arrow{d} \\
\Spec \Z \mmod C_2 \arrow{r} & \moduli{fg}
\end{tikzcd}
\end{center}
is actually affine, and this is a witness to the fact that \(X(2) \sm KO\) is a complex-orientable ring spectrum, even if neither of \(KO\) or \(X(2)\) is.
\end{remark}

Having constructed these chromatic homology theories, for the rest of this Lecture we pursue an example of a ``fiberwise'' analysis of a phenomenon in homotopy theory.  First, recall the following classical theorem:

\begin{theorem}[{Nishida's Theorem, \cite{Nishida}, \cite[Section II.2]{BMMS}}]
Every homotopy class \(\alpha \in \pi_{\ge 1} \S\) is nilpotent.\footnote{``Nilpotent'' has two equivalent interpretations here: the maps \(\alpha^{\sm n}\co \S^{\sm n} \to \S^{\sm n}\) and \(\alpha^{\circ n}\co \S \to \S\) are naturally equivalent.  In fact, these two kinds of nilpotence continue to agree for more general ring spectra~\cite[Introduction]{DHS}.} \qed
\end{theorem}

\noindent People studying \(K\)--theory in the '\(70\)s discovered the following related phenomenon:

\begin{theorem}[{\cite[Theorem 12.1]{AdamsJXIV}}]\label{AdamsSelfMapThm}
Let \(M_{2n}(p)\) denote the mod--\(p\) Moore spectrum with bottom cell in degree \(2n\).  Then there is an index \(n\) and a map \index{vd self map@\(v_d\)--self--map}\(v\co M_{2n}(p) \to M_0(p)\) such that \(KU_* v\) acts by multiplication by the \(n\)\textsuperscript{th}\, power of the Bott class.  The minimal such \(n\) is given by the formula
\[
\pushQED{\qed}
n = \begin{cases} p-1 & \text{when \(p \ge 3\)}, \\ 4 & \text{when \(p = 2\)}. \end{cases}
\qedhere
\popQED
\]
\end{theorem}

\noindent In particular, the map \(v\) cannot be nilpotent, since a null-homotopic map induces the zero map in any homology theory.  Just as we took the non-nilpotent endomorphism \(p \in \pi_0 \End \S\) and coned it off, we can take the endomorphism \(v \in \pi_{2p-2} \End M_0(p)\) and cone it off to form a new spectrum called \(V(1)\).\footnote{The spectrum \(V(1)\) is actually defined to be a finite spectrum with \(BP_* V(1) \cong BP_* / (p, v_1)\). At \(p = 2\) this spectrum doesn't exist and this is a misnomer.  More generally, at odd primes \(p\) Nave shows that \(V((p+1)/2)\) doesn't exist~\cite[Theorem 1.3]{Nave}.}  One can ask, then, whether the pattern continues: does \(V(1)\) have a non-nilpotent self-map, and can we cone it off to form a new such spectrum with a new such map?  Can we then do that again, indefinitely?  In order to study this question, we are motivated to find spectra satisfying the following condition:

\begin{definition}[{\cite[Definition 4]{HopkinsSmith}, cf.\ \cite[Theorem 1]{DHS}}]
A ring spectrum \(E\) \index{detects nilpotence}\textit{detects nilpotence} if for any ring spectrum \(R\) the kernel of the Hurewicz homomorphism \[R_*\eta_E\co \pi_* R \to E_* R\] consists of nilpotent elements.  (In particular, such an \(E\) cannot send such a nontrivial self-map to zero.)
\end{definition}

This question and surrounding issues formed the basis of Ravenel's nilpotence conjectures~\cite[Section 10]{RavenelLocalizationWRTPeriodic}, which were resolved by Devinatz, Hopkins, and Smith~\cite{DHS,HopkinsSmith}.  One of their two main technical achievements was to demonstrate that we already have access to a nice homology theory which detects nilpotence:

\begin{theorem}[{Devinatz--Hopkins--Smith Nilpotence Theorem, \cite[Theorem 1.i]{DHS}}]\label{DevinatzHopkinsSmith}
The spectrum \(MU\) detects nilpotence. \qed
\end{theorem}

\noindent This is a very hard theorem, and we will not attempt to prove it.\footnote{In particular, this is a very hard \emph{geometric} theorem.  Its proof is phrased homotopically, but it comes down to very concrete, computational facts about such geometric objects as double-loopspaces of spheres.  (One unfulfilled daydream of this book is to re-encode these computations in the language of formal geometry---alas.)  One way of understanding the contents of the Theorem is that the spectral sequences pictured in \Cref{ANSS2Figure} and \Cref{ANSS3Figure} have \emph{asymptotically flat} vanishing curves, so that powers of any particular element eventually escape the populated region of the spectral sequence.  (In fact, this vanishing curve is conjectured to be asymptotically equivalent to a square root function, but little about this is known.)  On the other hand, we can see from \Cref{ANSS2Figure} that such a vanishing line is \emph{not} initially present, due to the nonnilpotence of \(\eta\)---and as a consequence, there is no analogue of the nilpotence theorems for \(\CatOf{QCoh}(\moduli{fg})\) itself.  This is another sense in which it is a fundamentally geometric fact.  It is also not even true at the \(E_\infty\) page of \Cref{HF2ASSFigure}, where the ``image of \(J\) pattern'' (the name for the ``shark fins'' near the main diagonal) give a family of permanent cycles along a line of slope \(1\).}
% \todo{Someday, I want to include a formal-geometric interpretation of the proof of this theorem.  I would be thrilled to dedicate another 20 pages to that task here, if only I knew how to do it.}
However, taking this as input, they are easily able to show several other interesting structural results about finite spectra.  For instance, they also show that the \(MU\) is the universal object which detects nilpotence, in the sense that any other ring spectrum can have this property checked stalkwise on \(\context{MU}\).

\begin{corollary}[{\cite[Theorem 3]{HopkinsSmith}}]\label{LocalNilpotenceDetection}
A ring spectrum \(E\) detects nilpotence if and only if for all \(0 \le d \le \infty\) and for all primes \(p\), \(K(d)_* E \ne 0\) (i.e., the support of \(\context{MU}(E)\) is not a proper substack of \(\context{MU}\)).
\end{corollary}
\begin{proof}
If \(K(d)_* E = 0\) for some \(d\), then the non-nilpotent unit map \(\S \to K(d)\) lies in the kernel of the Hurewicz homomorphism for \(E\), so \(E\) fails to detect nilpotence.

In the other direction, suppose that for every \(d\) we have \(K(d)_* E \ne 0\).  Because \(K(d)_*\) is a field, it follows by picking a basis of \(K(d)_* E\) that \(K(d) \sm E\) is a nonempty wedge of suspensions of \(K(d)\).  So, for \(\alpha \in \pi_* R\), if \(E_* \alpha = 0\) then \((K(d) \sm E)_* \alpha = 0\) and hence \(K(d)_* \alpha = 0\).  So, we need to show that if \(K(d)_* \alpha = 0\) for all \(n\) and all \(p\) then \(\alpha\) is nilpotent.  Taking \Cref{DevinatzHopkinsSmith} as given, it would suffice to show merely that \(MU_* \alpha\) is nilpotent.  This is equivalent to showing that the ring spectrum \(MU \sm R[\alpha^{-1}]\) is contractible, which is equivalent to showing that the unit map is null: \[\S \to MU \sm R[\alpha^{-1}].\]

A nontrivial result of Johnson and Wilson shows that the following conditions are equivalent:\footnote{Specifically, it is immediate that \(MU_* X = 0\) forces \(P(d+1)_* X = 0\) and \(v_{d'}^{-1} P(d')_*(X) = 0\) for all \(d' < d\).  What's nontrivial is showing that \(v_{d'}^{-1} P(d')_*(X) = 0\) if and only if \(K(d')_*(X) = 0\)~\cite[Theorem 2.1.a]{RavenelLocalizationWRTPeriodic},~\cite[Section 3]{JohnsonWilson}.}
\begin{enumerate}
    \item \(MU_* X = 0\) holds.
    \item For any \(d < \infty\), \(K([0, d])_* X = 0\) and \(P(d+1)_* X = 0\) hold.
    \item There exists a \(d < \infty\) such that \(K([0, d])_* X = 0\) and \(P(d+1)_* X = 0\) hold.
\end{enumerate}
Taking \(X = R[\alpha^{-1}]\), we have assumed that \(K([0, d])_* X = 0\), but we have not made a direct assumption on \(P(d+1)_* X\).  However, we have \[\colim_d P(d+1) \simeq \HFp \simeq K(\infty),\] and we have assumed \(\S \to K(\infty) \sm R[\alpha^{-1}]\) to be null.  By compactness of \(\S\), that null-homotopy factors through some finite stage \(P(d+1) \sm R[\alpha^{-1}]\) for \(d \gg 0\).
\end{proof}

\Cref{LocalNilpotenceDetection} has the following consequence, which speaks to the primacy of both the chromatic program and these results.

\begin{definition}
A ring spectrum \(R\) is a \index{field spectrum}\textit{field spectrum} when every \(R\)--module (in the homotopy category) splits as a wedge of suspensions of \(R\).  (Equivalently, \(R\) is a field spectrum when it has K\"unneth isomorphisms.)
\end{definition}

\begin{corollary}[{\cite[Proposition 1.9]{HopkinsSmith}}]\label{FieldSpectraAreKTheories}
Every field spectrum \(R\) splits as a wedge of Morava's theories \(K(d)\).
\end{corollary}
\begin{proof}
It is easy to check (as mentioned in the proof of \Cref{LocalNilpotenceDetection}) that \(K(d)\) is a field spectrum.

Now, consider an arbitrary field spectrum \(R\).  Set \(E = \bigvee_{\text{primes $p$}} \bigvee_{d \in [0, \infty]} K(d)\), so that \(E\) detects nilpotence.  The class \(1\) in the field spectrum \(R\) is non-nilpotent, so it survives when paired with some \(K\)--theory \(K(d)\), and hence \(R \sm K(d)\) is not contractible.  Because both \(R\) and \(K(d)\) are field spectra, the smash product of the two simultaneously decomposes into a wedge of \(K(d)\)s and a wedge of \(R\)s.  So, \(R\) is a retract of a wedge of \(K(d)\)s, and one can show~\cite[1.10--1.12]{HopkinsSmith} that any such retract is itself a wedge of \(K(d)\)s.
\end{proof}

\begin{remark}
In the \(2\)--periodic setting we've become accustomed to, the analogue of \Cref{FieldSpectraAreKTheories} is that every \(2\)--periodic field spectrum splits as a wedge of suspensions of \(K(d)P\).
\end{remark}

\begin{remark}
In service of \Cref{ExampleOfMoravasTheoriesAtGm}, the geometric definition of \(MU\) given in \Cref{OriginalDefnOfBordism}, the edge cases of \(K(0) = H\Q\) and \(K(\infty) = \HFp\), and the claimed primacy of these methods, we might wonder if there is any geometric interpretation of the field theories \(K(d)\) for \(0 < d < \infty\).  To date, this is a completely open question and the subject of intense research.
\end{remark}

We're now well-situated to address Ravenel's question about finite spectra and periodic self-maps.  The key observation is that spectra admitting such self-maps are closed under some natural operations, leading to the following definition:

\begin{definition}
A full subcategory of a triangulated category (e.g., the homotopy category of \(p\)--local finite spectra) is \index{thick subcategory}\textit{thick} if\ldots
\begin{itemize}
\item \ldots it is closed under isomorphisms and retracts.
\item \ldots it has a \(2\)-out-of-\(3\) property for cofiber sequences.
\end{itemize}
\end{definition}

\noindent Examples of thick subcategories include:
\begin{itemize}
\item The category \(\CatOf{C}_d\) of \(p\)--local finite spectra which are \(K(d-1)\)--acyclic.  (For instance, if \(d = 1\), the condition of \(K(0)\)--acyclicity is that the spectrum have purely torsion homotopy groups.)  These are called ``finite spectra of type at least \(d\)''.
\item The category \(\CatOf{D}_d\) of \(p\)--local finite spectra \(F\) for which there is a self-map \(v: \Susp^N F \to F\), \(N \gg 0\) which induces multiplication by a unit in \(K(d)\)--homology and which is nilpotent in \(K(\ne d)\)--homology.  These are called ``finite spectra admitting \index{vd self map@\(v_d\)--self--map}\(v_d\)--self--maps''.\footnote{It is not obvious that \(\CatOf D_d\) satisfies the cofiber extension axiom of a thick subcategory.  One is required to show that for any map $f\co X \to Y$ of finite complexes of type \(d\), \(v_d\)--self--maps can be chosen on both $X$ and $Y$ which commute with $f$, which is another difficult theorem of Hopkins and Smith~\cite[Theorem 11]{HopkinsSmith}.}
\end{itemize}

\noindent The categories \(\CatOf D_d\) are the ones we are interested in analyzing, and we hope to identify these putative spectra \(V(d)\) inside of them.  Ravenel shows the following foothold interrelating the \(\CatOf C_d\):

\begin{lemma}[{\cite[Theorem 2.11]{RavenelLocalizationWRTPeriodic}}]\label{CdCategoriesNest}
For \(X\) a finite complex, there is a bound \[\dim K(d-1)_* X \le \dim K(d)_* X.\]  In particular, there is an inclusion \(\CatOf C_d \subseteq \CatOf C_{d+1}\).
\end{lemma}
\begin{proof}[Proof sketch]
One should compare this with the statement that the stalk dimension of a coherent sheaf is upper semi-continuous.  In fact, this analogy gives the essentials of Ravenel's proof: one considers the ring spectrum \(v_d^{-1} BP / I_{d-1}\), which admits two maps
\begin{center}
\begin{tikzcd}[row sep=1em]
& v_{d-1}^{-1} (v_d^{-1} BP / I_{d-1}) \\
v_d^{-1} BP / I_{d-1} \arrow{ru} \arrow{rd} \\
& (v_d^{-1} BP / I_{d-1}) / v_{d-1}.
\end{tikzcd}
\end{center}
Studying the relevant \(\Tor\) spectral sequences gives the result.
\end{proof}

Hopkins and Smith are able to use their local nilpotence detection result, \Cref{LocalNilpotenceDetection}, to completely understand the behavior not only of the thick subcategories \(\CatOf C_d\) but of \emph{all} thick subcategories of \(\CatOf{Spectra}_{(p)}^{\fin}\).  In particular, this connects the \(\CatOf C_d\) with the \(\CatOf D_d\), as we will see.

\begin{theorem}[{\cite[Theorem 7]{HopkinsSmith}}]\label{ThickSubcatClassification}
Any thick subcategory \(\CatOf C\) of the category of \(p\)--local finite spectra must be \(\CatOf C_d\) for some \(d\).
\end{theorem}
\begin{proof}
Since \(\CatOf C_d\) are nested by \Cref{CdCategoriesNest} and they form an exhaustive filtration (i.e., \(\CatOf C_\infty\) = 0), it is thus sufficient to show that any object \(X \in \CatOf C\) with \(X \in \CatOf C_d \setminus \CatOf C_{d-1}\) induces an inclusion \(\CatOf C_d \subseteq \CatOf C\).  Write \(R\) for the endomorphism ring spectrum \(R = F(X, X)\), and write \(F\) for the fiber of its unit map: \[F \xrightarrow{f} \S \xrightarrow{\eta_R} R.\]  Finally, let \(Y \in \CatOf C_d\) be \emph{any} finite spectrum of type at least \(d\).  Our goal is to demonstrate \(Y \in \CatOf C\).  

Now consider applying \(K(n)\)--homology (for \emph{arbitrary} \(n\)) to the map \[1 \sm f\co Y \sm F \to Y \sm \S.\]  The induced map is always zero:
\begin{itemize}
\item In the case that \(K(n)_* X\) is nonzero, then \[K(n)_* R = K(n)_* (X \sm DX) = K(n)_* X \otimes (K(n)_* X)^*\] is also nonzero.  It follows that the unit map is \(K(n)_* \eta_R\) is injective, and so \(K(n)_* f\) is zero.
\item In the case that \(K(n)_* X\) is zero, then \(n \le d\) and, because of the bound on type, \(K(n)_* Y\) is zero as well.
\end{itemize}
By a small variant of local nilpotence detection (\Cref{LocalNilpotenceDetection}, \cite[Corollary 2.5]{HopkinsSmith}), it follows for \(j \gg 0\) that \[Y \sm F^{\sm j} \xrightarrow{1 \sm f^{\sm j}} Y \sm \S^{\sm j}\] is null-homotopic.  Hence, one can calculate the cofiber to be \[\cofib\left( Y \sm F^{\sm j} \xrightarrow{1 \sm f^{\sm j}} Y \sm \S^{\sm j} \right) \simeq Y \sm \cofib f^{\sm j} \simeq Y \vee (Y \sm \Susp F^{\sm j}),\] so that \(Y\) is a retract of this cofiber.

We now work to show that this smash product lies in the thick subcategory \(\CatOf C\) of interest.  First, note that it suffices to show that \(\cofib f^{\sm j}\) on its own lies in \(\CatOf C\): a finite spectrum (such as \(Y\) or \(F\)) can be expressed as a finite gluing diagram of spheres, and smashing this through with \(\cofib f^{\sm j}\) then expresses \(Y \sm \cofib f^{\sm j}\) as the iterated cofiber of maps with source and target in \(\CatOf C\).  With that in mind, we will in fact show that \(\cofib f^{\sm k}\) lies in \(\CatOf C\) for all \(k \ge 1\).  Consider the following smash version of the octahedral axiom: the factorization \[F \sm F^{\sm (k-1)} \xrightarrow{1 \sm f^{\sm (k-1)}} F \sm \S^{\sm (k-1)} \xrightarrow{f \sm 1} \S \sm \S^{\sm (k-1)}\] begets a cofiber sequence \[F \sm \cofib f^{\sm (k-1)} \to \cofib f^{\sm k} \to \cofib f \sm \S^{\sm (k-1)}.\]  Noting that the base case \(\cofib(f) = R = X \sm DX\) lies in \(\CatOf C\), we can inductively use the \(2\)-out-of-\(3\) property on the octahedral cofiber sequence to see that \(\cofib(f^{\sm k})\) lies in \(\CatOf C\) for all \(k\).  It follows in particular that \(Y \sm \cofib(f^{\sm j})\) lies in \(\CatOf C\), and using the retraction \(Y\) belongs to \(\CatOf C\) as well.
\end{proof}

Although this didn't affect the previous Theorem statement, one is led by its proof to wonder there exist such spectra $X \in \CatOf C_d \setminus \CatOf C_{d-1}$---i.e., whether these nested containments are proper.  The following result lays this to rest:

\begin{theorem}[{Hopkins--Smith Periodicity Theorem, \cite[Theorem 4.11, Section 5, and Theorem 9]{HopkinsSmith}}]\label{CdEqualsDd}
A \(p\)--local finite spectrum is \(K(d-1)\)--acyclic exactly when it admits a \(v_d\)--self--map.  Additionally, the inclusion \(\CatOf C_d \subsetneq \CatOf C_{d-1}\) is proper.
\end{theorem}
\begin{proof}[Executive summary of proof]
Given the classification of thick subcategories, if a property is closed under thickness then one need only exhibit a single spectrum with the property to know that all the spectra in the thick subcategory it generates also all have that property.  Inductively, they manually construct finite spectra \index{Moore spectrum}\(M_0(p^{i_0}, v_1^{i_1}, \ldots, v_{d-1}^{i_{d-1}})\) for sufficiently large\footnote{We ran into the asymptotic condition \(I \gg 0\) earlier, when we asserted that there is no root of the \(2\)--local \(v_1\)--self--map \(v\co M_8(2) \to M_0(2)\).} indices \(i_*\) which admit a self-map \(v\) governed by a commuting square
\begin{center}
\begin{tikzcd}
BP_* M_{|v_d| i_d}(p^{i_0}, v_1^{i_1}, \ldots, v_{d-1}^{i_{d-1}}) \arrow{r}{v} \arrow[equal]{d} & BP_* M_0(p^{i_0}, v_1^{i_1}, \ldots, v_{d-1}^{i_{d-1}}) \arrow[equal]{d} \\
\Susp^{|v_d| i_d} BP_* / (p^{i_0}, v_1^{i_1}, \ldots, v_{d-1}^{i_{d-1}}) \arrow{r}{- \cdot v_d^{i_d}} & BP_* / (p^{i_0}, v_1^{i_1}, \ldots, v_{d-1}^{i_{d-1}}).
\end{tikzcd}
\end{center}
These maps are guaranteed by very careful study of Adams spectral sequences.
\end{proof}

They therefore conclude the strongest possible positive response to Ravenel's conjectures.  Not only can we continue the sequence \[\S, \; \S/p, \; \S/(p, v), \; \ldots,\] but in fact \emph{any} finite spectrum admits an (essentially unique) interesting periodic self-map.  This may be the most remarkable of the statements: although Nishida's theorem initially led us to think of periodic self-maps as rare, they are in fact ubiquitous.  Additionally, we learned that the shift\footnote{This is sometimes referred to as the ``wavelength'' in the chromatic analogy.} of this self-map is determined by the first nonvanishing \(K(d)\)--homology, giving an effective detection tool.  Finally, all such periodicity shifts arise: for any \(d\), there is a spectrum admitting a \(v_d\)--self--map but no \(v_{<d}\)--self--maps.








\section{Chromatic fracture and convergence}\label{ChromaticLocalizationSection}

In this Lecture, we will couple the ideas of \Cref{StableContextLecture} to the homology theories and structure theorems described in \Cref{NilpotenceAndPeriodicity}.  In particular, we have not yet exhausted \Cref{ThickSubcatClassification}, and for inspiration about how to utilize it, we will begin with an algebraic analogue of the situation considered thus far.

For a ring \(R\), the full derived category \(D(\Spec R)\) and the derived category of perfect complexes \(D^{\perf}(\Spec R)\) form examples of triangulated categories analogous to \(\CatOf{Spectra}\) and \(\CatOf{Spectra}^{\fin}\).  By interpreting an \(R\)--module as a quasicoherent sheaf over \(\Spec R\), we can use them to probe for structure of \(\Spec R\)---for instance, we can test whether \(\widetilde M\) is supported over some closed subscheme \(\Spec R/I\) by restricting the sheaf, which amounts algebraically to asking whether \(M\) is annihilated by \(I\).  In the reverse, we can also try to discern what ``closed subscheme'' should mean in some arbitrary triangulated category by codifying the properties of the subcategory of \(D(\Spec R)\) supported away from \(\Spec R\).  The key observation is this subcategory is closed under tensoring modules: if \(M\) is annihilated by \(I\), then \(M \otimes_R N\) is also annihilated by \(I\).

\begin{definition}[{\cite[Definition 1.3]{Balmer}}]
Let \(\CatOf C\) be a triangulated \(\otimes\)--category \(\CatOf C\).  A thick subcategory \(\CatOf C' \subseteq \CatOf C\) is\ldots
\begin{itemize}
\item \ldots a \index{thick subcategory!tensor ideal@\(\otimes\)--ideal}\textit{\(\otimes\)--ideal} when \(x \in \CatOf C'\) forces \(x \otimes y \in \CatOf C'\) for any \(y \in \CatOf C\).
\item \ldots a \textit{prime \(\otimes\)--ideal} when \(x \otimes y \in \CatOf C'\) also forces at least one of \(x \in \CatOf C'\) or \(y \in \CatOf C'\).
\end{itemize}
Finally, define the \index{thick subcategory!spectrum}\textit{spectrum} of \(\CatOf C\) to be its collection of prime \(\otimes\)--ideals.  For any \(x \in \CatOf C\) we define a basic open \(U(x) = \{\CatOf C' \mid x \in \CatOf C'\}\), which altogether give a basis for a topology on the spectrum.
\end{definition}

The basic result about this definition is that it does not miss any further conditions:

\begin{theorem}[{\cite[Proposition 8.1]{Balmer}}]
The spectrum of \(D^{\perf}(\Spec R)\) is naturally homeomorphic to the Zariski spectrum of \(R\). \qed
\end{theorem}

\noindent Satisfied, we apply the definition to the more difficult case of \(\CatOf{Spectra}\).

\begin{theorem}[{\cite[Corollary 9.5]{Balmer}}]
The spectrum of \(\CatOf{Spectra}_{(p)}^{\mathrm{fin}}\) consists of the thick subcategories \(\CatOf C_d\), and \(\{\CatOf C_n\}_{n=0}^d\) are its open sets.
\end{theorem}
\begin{proof}
Using \Cref{CdEqualsDd}, we can characterize \(\CatOf C_d\) as the kernel of \(K(d-1)_*\).  This shows it to be a prime \(\otimes\)--ideal: \[K(d-1)_*(X \sm Y) \cong K(d-1)_* X \otimes_{K(d-1)_*} K(d-1)_* Y\] is zero exactly when at least one of \(X\) and \(Y\) is \(K(d-1)\)--acyclic.
\end{proof}

\begin{corollary}[{cf.\ \Cref{LandwebersClassificationOfClosedSubstacks}, \Cref{ThickSubcatClassification}, and \Cref{CdEqualsDd}}]\label{MUInducesSpectrumHomeo}
The functor \[\context{MU}(-)\co \CatOf{Spectra}^{\fin} \to \CatOf{Coh}(\context{MU})\] induces\footnote{This has to be interpreted delicately, as the functor \(\context{MU}(-)\) is not (quite) a functor of triangulated categories~\cite[2.4.2]{MoravaCplxBordismInAT}.} a homeomorphism of the spectrum of \(\CatOf{Spectra}^{\fin}\) to that of \(\moduli{fg}\). \qed
\end{corollary}

The construction as we have described it falls short of completely recovering \(\Spec R\), as we have constructed only a topological space rather than a locally ringed space (or anything otherwise equipped locally with algebraic data, as in our functor of points perspective).  The approach taken by Balmer~\cite[Section 6]{Balmer} is to use Tannakian reconstruction to extract a structure sheaf of local rings from the prime \(\otimes\)--ideal subcategories.  We, however, are at least as interested in finite spectra as we are the ring spectrum \(\S\), so we will take an approach that emphasizes module categories rather than local rings.  Specifically, Bousfield's theory of \index{Bousfield localization}homological localization allows us to lift the localization structure among open substacks of \(\moduli{fg}\) to the category \(\CatOf{Spectra}\) as follows:

\begin{theorem}[{Bousfield localzation, \cite{BousfieldLocalization}, \cite[Theorem 7.7]{Margolis}}]\label{BousfieldLocalizationThm}
Let \(j\co \Spec R \to \moduli{fg}\) be a flat map, and let \(R_*\) denote the homology theory associated to it by \Cref{LandwebersStackyTheorem}.  There is then a diagram
\begin{center}
\begin{tikzcd}[column sep=2.2cm,row sep=2cm]
\CatOf{Spectra}_R \arrow["\context{R}(-)", "\mathrm{conservative}"', very thick]{r} \arrow[leftarrow, shift right=0.20cm, very thick, "L_R"']{d} & \CatOf{QCoh}(\context{R}) \arrow[shift right=0.20cm, very thick, leftarrow, "j^*"']{d} \\
\CatOf{Spectra} \arrow[leftarrow,shift right=0.20cm, "\dashv", "i"']{u} \arrow[very thick]{ru}[description]{\context{R}(-)} \arrow[very thick]{r}{\context{MU}(-)} & \CatOf{QCoh}(\context{MU}), \arrow[leftarrow, shift right=0.20cm, "\dashv", "j_*"']{u}
\end{tikzcd}
\end{center}
such that \(L_R\) is left-adjoint to \(i\), \(j^*\) is left-adjoint to \(j_*\), \(i\) and \(j_*\) are inclusions of full subcategories, \(L_R\) and \(j^*\) are idempotent, the bold composites are all equal, and \(R_*\) is conservative on \(\CatOf{Spectra}_R\).\footnote{The meat of this theorem is in overcoming set-theoretic difficulties in the construction of \(\CatOf{Spectra}_R\).  Bousfield accomplished this by describing a model structure on \(\CatOf{Spectra}\) for which \(R\)--equivalences create the weak-equivalences.} \qed
\end{theorem}

The idea, then, is that \(\CatOf{Spectra}_R\) plays the topological role of the derived category of those sheaves supported on the image of the map \(j\).  In \Cref{DefnChromaticHomologyThys}, we identified several classes of interesting such maps \(j\) tied to the geometry of \(\moduli{fg}\).  We record these special cases now:
\begin{definition}
In the case \(R = E_\Gamma\) of continuous Morava \(E\)--theory, this is a model of the inclusion of the deformation space around the point \(\Gamma\), and we will denote the associated localizer by \(L_\Gamma\).  In the special case that \(\Gamma = \Gamma_d\) is taken to be the \index{formal group!Honda group}Honda formal group, we further abbreviate the localizer by \[\CatOf{Spectra} \xrightarrow{\widehat L_d} \CatOf{Spectra}_{\Gamma_d}.\]  In the case when \(R = E(d)\) models the inclusion of the open complement of the unique closed substack of codimension \(d\), we will denote the localizer by \[\CatOf{Spectra} \xrightarrow{L_d} \CatOf{Spectra}_d = \CatOf{Spectra}_{\moduli{fg}^{\le d}}.\]
\end{definition}

These localizers have a number of nice properties linking them to algebraic models.

\begin{lemma}
There are natural factorizations
\begin{align*}
\operatorname{id} \to L_d \to L_{d-1}, & & \operatorname{id} \to L_d \to \widehat L_d.
\end{align*}
In particular, \(L_d X = 0\) implies both \(L_{d-1} X = 0\) and \(\widehat L_d X = 0\).
\end{lemma}
\begin{proof}[Analogy to \(j_* \vdash j^*\)]
The open substack of dimension \(d\) properly contains both the open substack of dimension \((d-1)\) and the infinitesimal deformation neighborhood of the geometric point of height \(d\).  The factorization of inclusions gives a factorization of pullback functors.
\end{proof}

\begin{lemma}[{\cite[Theorem 7.5.6]{RavenelOrangeBook}, \cite[Proof of Lemma 2.3]{HoveyCSC}}]\label{FormulaForKnLocalization}
There are equivalences
\begin{align*}
L_d X & \simeq (L_d \S) \sm X, &
\widehat L_d X & \simeq \lim_I \left( M_0(v^I) \sm L_d X \right).
\end{align*}
\end{lemma}
\begin{proof}[Analogy to \(j_* \vdash j^*\)]
The first formula stems from \(j\) an open inclusion, which has \(j^* M \simeq R \otimes M\) in the algebraic setting.  The second formula can be compared to the inclusion \(j\) of the formal infinitesimal neighborhood of a closed subscheme, which has algebraic model \(j^* M = \lim_j (R/I^j \otimes M)\).\footnote{In keeping with our discussion of continuous Morava \(E\)--theory, it is also possible to consider the object \(\{\left( M_0(v^I) \sm L_d X \right)\}_I\) itself as a pro-spectrum.  This is interesting to explore: Davis and Lawson have shown that setting \(X = \S\) gives an \(E_\infty\)--ring pro-spectrum, even though none of the individual objects are \(E_\infty\)--ring spectra themselves~\cite{DavisLawson}.}
\end{proof}

\begin{lemma}\label{StableMixedKthyCoopnsVanish}
Let \(k\) be a field of positive characteristic \(p\), and let \(\Gamma\) and \(\Gamma'\) be two formal groups over \(k\) of differing heights \(0 \le d, d', \le \infty\).  Then \(K_\Gamma \sm K_{\Gamma'} \simeq 0\).
\end{lemma}
\begin{proof}[Analogy to \(j_* \vdash j^*\)]
The map classifying the formal group \(\CP^\infty_{K_{\Gamma} \sm K_{\Gamma'}}\) simultaneously factors through the maps classifying the formal groups \(\CP^\infty_{K_\Gamma} = \Gamma\) and \(\CP^\infty_{K_{\Gamma'}} = \Gamma'\).  By \Cref{HeightIsAnIsomInvariant}, such a formal group must simultaneously have heights \(d\) and \(d'\), which forces the homotopy ring to be the zero ring.\footnote{Alternatively, \Cref{FieldSpectraAreKTheories} shows that \(K_\Gamma \sm K_{\Gamma'}\) simultaneously decomposes as a wedge of \(K_\Gamma\)s and of \(K_{\Gamma'}\), which forces both wedges to be empty.}
\end{proof}

\begin{lemma}[{\cite[Lemma 23.6]{LurieChromaticCourseNotes}}]\label{ChromaticFractureInput}
For \(d > \height \Gamma\), \(\widehat L_{\Gamma} L_d \simeq 0\).
\end{lemma}
\begin{proof}[Proof sketch]
After a nontrivial reduction argument, this comes down to an identical fact: the formal group associated to \(E(d) \sm K_\Gamma\) must simultaneously be of heights at most \(d\) and exactly \(\height \Gamma > d\), which forces the spectrum to vanish.
\end{proof}

\begin{corollary}
\(L_\Gamma E = 0\) for any coconnective \(E\), and hence \[L_\Gamma E = L_\Gamma(E[n, \infty))\] for \emph{any} spectrum \(E\) and \emph{any} index \(n\).\footnote{A memorable slogan is that Morava \(K\)--theories are sensitive only to the ``germ at \(\infty\)''~\cite[Section 3.3.3]{MitchellIwasawa}.}
\end{corollary}
\begin{proof}
Any coconnective spectrum can be expressed as the colimit of its truncations
\begin{center}
\begin{tikzcd}[column sep=1em]
E[n, n] \arrow{r} \arrow[equals]{d} & E[n-1, n] \arrow{r} \arrow{d} & E[n-2, n] \arrow{d} \arrow{r} & \cdots \arrow["\colim"]{r} & E(-\infty, n] \\
\Susp^n H\pi_nE & \Susp^{n-1} H\pi_{n-1} E & \Susp^{n-2} H\pi_{n-2} E & \cdots.
\end{tikzcd}
\end{center}
Applying \(L_\Gamma\) preserves this colimit diagram, but the above argument shows that \(HA\) is \(L_\Gamma\)--acyclic for any abelian group \(A\).  This gives the statement about coconnective spectra, from which the general statement follows by considering the cofiber sequence \[E[n, \infty) \to E \to E(-\infty, n). \qedhere\]
\end{proof}

\begin{corollary}[{Chromatic fracture, \cite[Proposition 23.5]{LurieChromaticCourseNotes}}]\label{ChromaticFractureSquares}
There are homotopy pullback squares
\begin{center}
\begin{tikzcd}
L_d X \arrow{r} \arrow{d} \arrow[dr, phantom, "\lrcorner", very near start] & \widehat L_d X \arrow{d} & X \arrow{r} \arrow{d} \arrow[dr, phantom, "\lrcorner", very near start] & \prod_p X^\wedge_p \arrow{d} \\
L_{d-1} X \arrow{r} & L_{d-1} \widehat L_d X, & X_{\Q} \arrow{r} & \left( \prod_p X^\wedge_p \right)_{\Q}.
\end{tikzcd}
\end{center}
\end{corollary}
\begin{proof}[Analogy to \(j_* \vdash j^*\)]
For the left-hand square, the inclusion of the open substack of dimension \(d-1\) into the one of dimension \(d\) has relatively closed complement the point of height \(d\).  Algebraically, this gives a \index{Mayer Vietoris sequence@Mayer--Vietoris sequence}Mayer--Vietoris sequence with analogous terms.  The right-hand square is analogous to the \index{ad{\`e}les}ad\`elic decomposition of abelian groups.\footnote{Whenever \(L_B L_A = 0\), \(L_{A \vee B}\) is the pullback of \(L_A \to L_A L_B \from L_B\).  Hence, this follows from \Cref{ChromaticFractureInput}, as well as the identifications \(L_{E(d)} \simeq L_{E(d-1) \vee K(d)} \simeq L_{K(0) \vee \cdots \vee K(d)}\).}
\end{proof}

\begin{remark}
\Cref{ChromaticFractureSquares} is maybe the most useful result discussed in this Lecture.  It shows that a map to an \(L_d\)--local spectrum can be understood as a system of compatible maps to its \(\widehat L_j\)--localizations, \(j \le d\).  In turn, any map into an \(\widehat L_j\)--local object factors through the \(\widehat L_j\)--localization of the source.  Thus, if the source itself has chromatic properties, this often puts \emph{very} strong restrictions on how maps can behave.
\end{remark}

These functors and their properties listed thus far give a tight analogy between certain local categories of spectra and sheaves supported on particular submoduli of formal groups, in a way that lifts the six-functors formalism of \(j_* \vdash j^*\) to the level of spectra.  With this analogy in hand, however, one is led to ask considerably more complicated questions whose proofs are not at all straightforward.  For instance, a useful fact about \emph{coherent} sheaves on \(\moduli{fg}\) is that they are completely determined by their restrictions to all of the open submoduli.  The analogous fact about finite spectra is referred to as \index{chromatic localization!convergence}\textit{chromatic convergence}:

\begin{theorem}[{Chromatic convergence, \cite[Theorem 7.5.7]{RavenelOrangeBook}}]\label{ChromaticConvergence}
The homotopy limit of the tower \[\cdots \to L_d F \to L_{d-1} F \to \cdots \to L_1 F \to L_0 F\] recovers the \(p\)--local homotopy type of any finite spectrum \(F\).\footnote{Spectra satisfying this limit property are said to be \index{chromatic localization!completeness}\textit{chromatically complete}, which is closely related to being \index{chromatic localization!harmonic}\textit{harmonic}, i.e., being local with respect to \(\bigvee_{d=0}^\infty K(d)\).  (I believe this a joke about ``music of the spheres''.)  It is known that nice Thom spectra are harmonic~\cite{Kriz} (so, in particular, every suspension and finite spectrum), that every finite spectrum is chromatically complete, and that there exist some harmonic spectra which are not chromatically complete~\cite[Section 5.1]{Barthel}.}\footnote{A consequence of the fact that \(p\)--local finite spectra are \(\bigvee_{d < \infty} K(d)\)--local, there are no nontrivial maps \(\HFp \to F\), and in particular the Spanier--Whitehead dual of \(\HFp\) is null.}\footnote{While we're talking about \(\bigvee_{d < \infty} K(d)\), the cofiber of \(\bigvee_{d < \infty} K(d) \to \prod_{d < \infty} K(d)\), where we are using the \(2(p^d-1)\)--periodic spectra, is concentrated in degree zero since all other homotopy degrees carry contributions from only finitely many factors.  It follows that the cofiber is Eilenberg--Mac Lane---an unusual property.} \qed
\end{theorem}

In addition to furthering the analogy, \Cref{ChromaticConvergence} suggests a method for analyzing the homotopy groups of spheres: we could study the homotopy groups of each \(L_d \S\) and perform the reassembly process encoded by this inverse limit.  Additionally, \Cref{ChromaticFractureSquares} shows that this process is inductive: \(L_d \S\) can be understood in terms of the spectrum \(L_{d-1} \S\), the spectrum \(\widehat L_d \S\), and some gluing data in the form of \(L_{d-1} \widehat L_d \S\).  Hence, we become interested in the homotopy of \(\widehat L_d \S\), which is the target of the \(E_d\)--Adams spectral sequence considered in \Cref{StableContextLecture}.

\begin{theorem}[{\Cref{IdentifyingAdamsE2Page} and \Cref{DefnChromaticHomologyThys}, see also \Cref{Pi2AndInvariantDiffls}, \Cref{DefnOfNilpCompletionAndASS}, and \Cref{FHGivesComodules}}]\label{ASSForLKdS}
The \(E_d\)--based\index{Bockstein}\footnote{Although the \(K(d)\)--Adams spectral sequence more obviously targets \(\widehat L_d \S\), we have chosen to analyze the \(E_d\)--Adams spectral sequence above because \(K(d)\) fails to satisfy {\CH}.  Starting with \(BPP_0 BPP \cong BPP_0[t_0^{\pm}, t_1, t_2, \ldots]\) from \Cref{DefnChromaticHomologyThys} and \Cref{IdIsAnInvariantIdeal}, we can calculate \(E(d)P_0 E(d)P\) by base-changing this Hopf algebroid: \(E(d)P_0 E(d)P = E(d)P_0 \otimes_{BPP_0} BPP_0 BPP \otimes_{BPP_0} E(d)P_0\), which is again free over \(E(d)P_0\).  Since \(K(d)P\) is formed from \(E(d)P\) by quotienting by a regular sequence, we calculate that \(K(d)P_0 E(d)P\) is free over \(K(d)P_0\), generated by the same summands.  However, when quotienting by the regular sequence \emph{again} to form \(K(d)P_* K(d)P\), the maps in the quotient sequences act by elements in \(I_d = 0\), hence introduce Bocksteins.  The end result is \[K(d)P_* K(d)P = \left(K(d)P_* \otimes_{BPP_*} BPP_* BPP \otimes_{BPP_*} K(d)P_*\right) \otimes \Lambda[\tau_0, \ldots, \tau_{d-1}],\] where \(\tau_j\) in degree \(1\) controls the cofiber of \(E_d \xrightarrow{u_j} E_d\).  In this sense, \(E_d\) forms a kind of maximal deformation of \(K(d)P\) as a ring spectrum, since it exhausts the collection of \(K(d)P\) Bocksteins.  Additionally, this behavior of odd-degree classes is quite generic: whenever odd-primary information appears near the formal geometric picture, it seems to come from a poorly behaved homotopical quotient---some element was killed twice, say, or in some specific case a map was zero but is generically nonzero.  So it is here.}
Adams spectral sequence for the sphere converges strongly to \(\pi_* \widehat L_d \S\).  Writing \(\omega\) for the line bundle on \((\moduli{fg})^\wedge_{\Gamma_d}\) of invariant differentials, we have
\[\pushQED{\qed}
E_2^{*, *} = H^*((\moduli{fg})^\wedge_{\Gamma_d}; \omega^{\otimes *}) \Rightarrow \pi_* \widehat L_d \S. \qedhere
\popQED\]
\end{theorem}

\noindent Our algebraic analysis from \Cref{LubinTateModuliThm} and \Cref{LubinTateModuliThmInFGLTerms} shows a further identification \[\context{E_d} = \left( \moduli{fg} \right)^\wedge_{\Gamma_d} \simeq \widehat{\mathbb A}^{d-1}_{\mathbb W(k)} \mmod \InternalAut(\Gamma_d).\]  This computation is thus boiled down to a calculation of the cohomology of the \(\Aut(\Gamma_d)\)--representations arising via \Cref{ActionBySnLiftsToLTn} as the global sections of the sheaves \(\omega^{\otimes *}\) (cf.\ the discussion in \Cref{HopfAlgebrasFromFiniteGroups} and \Cref{HF2HomologyIsValuedInAutGaEquivarModules}).\footnote{In fact, the stable \emph{operations} of \(E_d\) take the form of the twisted group-ring \(E_d^0 E_d = E_d^0\<\!\<\Aut(\Gamma_d)\>\!\>\).}  We will later deduce the following polite description of \(\Aut \Gamma_d\):
\begin{theorem}[{cf.\ \Cref{FormOfStabilizerGroup}}]\label{FormOfStabilizerGroupEarly}
\index{Lubin Tate stack@Lubin--Tate stack!stabilizer}For \(\Gamma_d\) the Honda formal group law of height \(d\) over a perfect field \(k\) of positive characteristic \(p\), we compute \[\Aut \Gamma_d \cong \left( \W_p(k) \<S\> \middle/ \left( \begin{array}{c} Sw = w^\phi S, \\ S^d = p \end{array} \right) \right)^\times,\] where \(\phi\) denotes a lift of the Frobenius from \(k\) to \(\W_p(k)\). \qed
\end{theorem}

\begin{remark}[{\cite[Section 24]{StricklandFPFP}, \cite{DevinatzHopkins}}]\label{StablizerRepIsComplicated}
As a matter of emphasis, this Theorem does not give any description of the \(\Aut \Gamma_d\)--\emph{representation} structure of \(E_d{}_0\), which is very complicated (cf.\ \Cref{ThePeriodMapSection}).  Here are some basic facts about it:
\begin{itemize}
    \item The center of \(\Aut \Gamma_d\) is given by \(\Z_p^\times\), which is the subgroup consisting of the multiplication--by--\(n\) maps.  This subgroup acts trivially on the deformation space.
    \item More generally, one can show that the action of \(\W_p(k)\) extends this action.  It is the stabilizer of the \index{Lubin Tate stack@Lubin--Tate stack!canonical lift}\textit{canonical lift}, which is the \(\W_p(k)\)--point of Lubin--Tate space given by sending the generators \(v_j\) to zero, \(j \ge 1\).
    \item The formula for the action of \(a = \sum_{j=0}^{n-1} a_j S^j\) on the tangent space is specified by the linear system \[a^* \left( \begin{array}{c} u_0 \\ u_1 \\ \vdots \\ u_{d-1} \end{array}\right) \equiv a_0 \left( \begin{array}{cccc} a_0 & 0 & \cdots & 0 \\ a_1 & a_0^p & \cdots & 0 \\ \vdots & \vdots & \ddots & \vdots \\ a_{d-1} & a_{d-2}^p & \cdots & a_0^{p^d} \end{array} \right)^{-1} \cdot \left( \begin{array}{c} u_0 \\ u_1 \\ \vdots \\ u_{d-1} \end{array} \right) \pmod{\mathfrak{m}^2}.\]
    \item Plenty more information can be found in the work of Devinatz and Hopkins~\cite{DevinatzHopkins}, which is best digested after \Cref{SectionDieudonneModules}.
\end{itemize}
\end{remark}

\begin{remark}
The arithmetically-minded reader might recognize this description of \(\Aut \Gamma_d\) as the group of units of a maximal order \(\mathbf o_D\) in the \index{division algebra}division algebra \(D\) of Brauer--Hasse invariant \(1/d\) over \(k\)---another glimpse of arithmetic geometry poking through to affect stable homotopy theory.\footnote{This finally explains our preference for using the letter ``\(d\)'' to represent the height of a formal group---the ``\(d\)'' (or, rather the ``\(D\)'') stands for ``division algebra''.  The typical algebraic topologist writes ``\(n\)'' for the height, a trend set by Jack Morava, allegedly because the localizer ``\(L_n\)'' is a homophone of his wife's name, Ellen.  It has been further alleged that the ``\(E\)'' in ``Morava \(E\)--theory'' is also an abbreviation for Ellen.  With no disrespect meant to either of them, I find ``\(d\)'' to be a considerably better mnemonic and to be less likely to conflict with other indices.  ``\(E\)'' is also prone to collisions (with spectral sequences, with operads, \ldots), but there is no compelling alternative.}
\end{remark}

\begin{example}[{Adams, \cite[Lemma 2.5]{HMS}}]\label{piLK1SExample}
In the case \(d = 1\), the objects involved are small enough that we can compute them by hand.  To begin, we have an isomorphism \(\operatorname{Aut}(\Gamma_1) = \Z_p^\times\), and the action of this group on \(\pi_* E_1 = \Z_p[u^\pm]\) is by \(\gamma \cdot u^n \mapsto \gamma^n u^n\).  At odd primes \(p\), one computes\footnote{At odd primes, \(p\) is coprime to the order of the torsion part of \(\Z_p^\times\).  At \(p = 2\), this is not true, so the representation has infinite cohomological dimension and there is plenty of room for differentials in the ensuing \(E_{\G_m}\)--Adams spectral sequence.} \[H^s(\operatorname{Aut}(\Gamma_1); \pi_* E_1) = \begin{cases}\Z_p & \text{when \(s = 0\)}, \\ \bigoplus_{j = 2(p-1)k} \Z_p\{u^j\} / (pk u^j) & \text{when \(s = 1\)}, \\ 0 & \text{otherwise}. \end{cases}\]  This, in turn, gives the calculation\footnote{The groups \(\pi_* \widehat L_1 \S\) are familiar to homotopy theorists: the Adams conjecture~\cite{AdamsJXIV} (and its solution) implies that the \(J\)--homomorphism \(J_{\C}\co BU \to BGL_1 \S\) described in \Cref{DefnRealJHomomorphism} and \Cref{ComplexJHomomorphism} selects exactly these elements for nonnegative \(t\).}
\[
\pi_t \widehat L_1 \S^0 = \begin{cases} \Z_p & \text{when \(t = 0\)}, \\ \Z_p / (pk) & \text{when \(t = k|v_1| - 1\)}, \\ 0 & \text{otherwise}. \end{cases}
\]
With this in hand, we can compute the homotopy of the rest of the fracture square:
\begin{center}
\begin{tikzcd}
\pi_* L_1 \S \arrow{r} \arrow{d} & \Z_p \oplus \bigoplus_{t = k|v_1| - 1} \Susp^t \Z_p/(pk) \arrow{d} \\
\Q \arrow{r} & \Q_p \oplus \Susp^{-1} \Q_p,
\end{tikzcd}
\end{center}
from which we deduce
\begin{align*}
\pi_t L_1 \S^0 & = \begin{cases} \Z_{(p)} & \text{when \(t = 0\)}, \\ \Z_p / (pk) & \text{when \(t = k|v_1| - 1\) and \(t \ne 0\)}, \\ \Z/p^\infty & \text{when \(t = (0 \cdot |v_1| - 1) - 1 = -2\)}, \\ 0 & \text{otherwise}. \end{cases}
\end{align*}
\end{example}

\begin{example}[{\cite[Example 7.18]{Rezk512Notes}}]
We can also give an explicit chromatic analysis of the homotopy element \(\eta \in \pi_1 \S\) studied in \Cref{HopfAlgebraLecture}.  As before, consider the complex \(\CP^2 = \Susp^2 C(\eta)\).  We now consider the possibility that \(\CP^2\) splits as \(\S^2 \vee \S^4\), in which case there would be a dotted retraction in the cofiber sequence
\begin{center}
\begin{tikzcd}
\S^2 \arrow{r} & \CP^2 \arrow{r} \arrow[densely dotted, bend right, "i"']{l} & \S^4.
\end{tikzcd}
\end{center}
If this were possible, we would also be able to detect the retraction after chromatic localization---so, for instance, we could consider the cohomology theory \(E_{\G_m} = KU^\wedge_p\) from \Cref{ExampleOfMoravasTheoriesAtGm} and test this hypothesis in \(\G_m\)--local homotopy.  Writing \(t\) for a coordinate on \(\CP^\infty_{KU^\wedge_p}\), this cofiber sequence gives a short exact sequence on \(KU^\wedge_p\)--cohomology:
\begin{center}
\begin{tikzcd}
0 & (t) / (t)^2 \arrow{l} \arrow[bend left, densely dotted, "i^*"]{r} & (t) / (t)^3 \arrow{l} & (t)^2 / (t)^3 \arrow{l} & 0. \arrow{l}
\end{tikzcd}
\end{center}
Because \(i\) is taken to be a retraction, the map \(i^*\) would satisfy \(i^*(t) = t \pmod{t^2}\), so that \(i^*(t) = t + at^2\) for some \(a\).  Additionally, \(i^*\) would be natural with respect to all \index{operations!Adams}cohomology operations on \(KU^\wedge_p\).  In particular, the element \((-1) \in \Z_p^\times \cong \Aut \G_m\) gives rise to an operation \(\psi^{-1}\), which acts by the \((-1)\)--series on the coordinate \(t\).  In the case that \(t\) is the coordinate considered in \Cref{CPinftyKUExample}, this gives \[[-1](t) = -\sum_{j=1}^\infty t^j = -t - t^2 \pmod{t^3}.\]  We thus compute:
\begin{align*}
\psi^{-1} \circ i(t) & = i \circ \psi^{-1}(t) \\
\psi^{-1}(t + at^2) & = i(-t) \\
(-t - t^2) + a(-t - t^2)^2 & = -(t + at^2) \\
-t + (a - 1) t^2 & = -t - at^2,
\end{align*}
so that we would arrive at a contradiction if the equation \(2a = 1\) were insoluable.  Note that this has no solution in \(\Z_2\), so that the attaching map \(\eta\) in \(\CP^2\) is nontrivial in \(\G_m\)--local homotopy at the prime \(2\) (hence also in the global homotopy group \(\pi_1 \S\)).  For \(p\) odd, this equation \emph{does} have a solution in \(\Z_p\), and it furthermore turns out that \(\eta = 0\) at odd primes.  This problem also disappears if we require \(i(t) = 2t + at^2\) instead, so that the above argument does not obstruct the triviality of \(2 \eta\) (and, indeed, \Cref{HF2ASSFigure} shows that the relation \(2 \eta = 0\) holds in \(2\)--adic homotopy).
\end{example}

\begin{example}[{\cite[Example 7.17 and Corollary 5.12]{Rezk512Notes}}]
Take \(k\) to be a perfect field of positive characteristic \(p\), and take \(\Gamma\) over \(\Spec k\) to be a finite height formal group with associated Morava \(E\)--theory \(E_\Gamma\).  By smashing the unit map \(\S \to E_\Gamma\) with the mod--\(p\) Moore spectrum, we get an induced map of homotopy groups \[h_{2n}\co \pi_{2n} M_0(p) \to \pi_{2n} E_\Gamma/p.\]  We concluded as a consequence of \Cref{IdIsAnInvariantIdeal} that there is an invariant section \(v_1\) of \(\omega^{\otimes(p-1)}\) on \(\moduli{fg}^{\ge 1} \to \A^1\), and hence a preferred element of \(\pi_{2(p-1)} E_\Gamma\) which is natural in the choice of \(\Gamma\).  One might hope that these elements are the image of an element in \(\pi_{2(p-1)} M_0(p)\) under the Hurewicz map \(h\), and this turns out to be true: this element is called \(\alpha_{1/1}\).  This element furthermore turns out to be \(p\)--torsion, meaning it extends to a map
\begin{center}
\begin{tikzcd}
\S^{2(p-1)} \arrow["p"]{r} \arrow["0"]{rd} & \S^{2(p-1)} \arrow["\alpha_{1/1}"]{d} \arrow["\cofib"]{r} & M_{2(p-1)}(p) \arrow[densely dotted, "v"]{ld} \\
& M_0(p).
\end{tikzcd}
\end{center}
At odd primes, this turns out to be the \(v_1\)--self-map \(v\co M_{2(p-1)}(p) \to M_0(p)\) announced in \Cref{AdamsSelfMapThm} (cf.\ also \cite[Proposition 12.7]{AdamsJXIV}).\index{vd self map@\(v_d\)--self--map}

This admits many generalizations.  First, different powers \(v_1^j\) of the section \(v_1\) also give rise to homotopy elements \(\alpha_{j/1} \in \pi_{2(p-1)j} M_0(p)\).  These have varying orders of divisibility, and we write \(\alpha_{j/k}\) for the element of \(\pi_* \S\) satisfying \(p^{k-1} \alpha_{j/k} = \alpha_{j/1}\).  Additionally, each Moore spectrum supports an Adams \(v_1\)--self--map of the form \[v(p^j) \co M_{|v_1| p^{j-1}}(p^j) \to M_0(p^j),\] which collectively form commutative diagrams of the shape
\begin{center}
\begin{tikzcd}
M_{p \cdot |v_1| p^{j-1}}(p^j) \arrow["v(p^j)^p"]{r} \arrow{d} & M_0(p^j) \arrow{d} \\
M_{|v_1|p^j}(p^{j+1}) \arrow["v(p^{j+1})"]{r} & M_0(p^{j+1}).
\end{tikzcd}
\end{center}
The other invariant functions described in \Cref{IdIsAnInvariantIdeal} (e.g., \(v_d\) modulo \(I_d\)) also give rise to elements in \(H^*(\moduli{fg}^{\ge d}; \omega^{\otimes *})\), which map to the \(BP\)--Adams \(E_2\)--term and which sometimes survive the spectral sequence to give rise to homotopy elements of the generalized Moore spectra \(M_0(v^I)\).  Homotopy elements arising in this way are collectively referred to as \index{Greek letter family}\textit{Greek letter families}~\cite[Section 3]{MRW}.
\end{example}

\begin{remark}\label{GreekLetterElements}
In the broader literature, the phrase ``Greek letter elements'' typically refers to the pushforward of the above elements to the homotopy groups of \(\S\) by pinching to the top cell.  This is somewhat obscuring: for instance, this significantly entangles how multiplication by \(\alpha_{j/k}\) behaves.  Finally, the incarnation of these elements in \(\G_m\)--local homotopy are exactly the elements witnessed by the invariant function \(u^{2(p-1)k}\) in \Cref{piLK1SExample}.
\end{remark}

\begin{remark}[{\cite{AdamsAtiyah}, \cite[Section 5.2]{RavenelGreenBook}}]
The second solution of the Hopf invariant one problem, due to Adams and Atiyah, can be rephrased in this language.  As discussed in \Cref{HopfInvariant1ExampleMO}, the ``Hopf invariant one problem'' refers to the question of whether the \(1\)--cocycles \(h_j\) in the \(\HFtwo\)--Adams spectral sequence are permanent cycles, thereby producing stable homotopy classes.  The orientation \(BP \to \HFtwo\) induces a map of Adams spectral sequences, so that if \(h_j\) were to survive to detect a class, that class would also be present in the \(BP\)--Adams spectral sequence, and its filtration degree would be not more than that of \(h_j\), which lies in degree \(1\).  In turn, the \(BP\)--Adams \(E_2\)--term can be computed by an ad\`elic complex~\cite{BeilinsonAdeles,Huber}, which is itself the target of a \v{C}ech-type spectral sequence known internally to chromatic homotopy theory as the \textit{chromatic spectral sequence}\index{chromatic spectral sequence}~\cite[Section 3]{MRW}, \cite[Equation 4.60]{Wilson}: \[E^2_{*,*,d} = H^*(\moduli{fg}; v_d^{-1} BP_* / (p^\infty, v_1^\infty, \ldots, v_{d-1}^\infty)\widetilde{\quad}) \Rightarrow H^*(\moduli{fg} \times \Spec \Z_{(p)}).\]  The \(1\)--line of this spectral sequence is entirely governed by \Cref{piLK1SExample}, and by finishing the even--primary form of that calculation, one discovers that the \(2\)--divisibilities of the relevant \(\alpha\)--elements are too low to produce \emph{any} classes on the classical Adams \(1\)--line.  It follows that the elements that start life on the classical Adams \(1\)--line cannot be permanent cycles, lest they contribute to a contradiction.
\end{remark}

\begin{remark}
This method is nonconstructive, in the sense that we learn that the classes \(h_j\) must participate in \(\HFtwo\)--Adams differentials, but we do not know what those differentials are.  By wholly different means~\cite[Corollary VI.1.5]{BMMS}, one can show for all \(j\) the differential \[d_2 h_j = h_0 h_{j-1}^2,\] and the accident is that the right-hand side of the equation happens to be zero for \(j \le 3\).  However, because we are working in characteristic \(2\), the existence of these differentials gives no information about the survival of the classes \(h_j^2\), sometimes referred to as the ``(Arf--)Kervaire invariant one problem''.\footnote{Remarkably, just as the Hopf invariant one problem finds geometric application in the question of \(H\)--space structures on spheres, the Kervaire invariant one problem predicts the existence of certain nonsmoothable manifolds~\cite{Browder}.}  Its recent solution by Hill, Hopkins, and Ravenel~\cite{HHR} follows in the footsteps of previous work by Ravenel~\cite{RavenelNonexistenceArfInvariantElts}, and one of the crucial leaps forward is the serious employ of the theory of abelian varieties~\cite{MoravaAbVarsAndKervaire}.
\end{remark}










